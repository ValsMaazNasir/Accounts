﻿
@{
    ViewBag.Title = "UniversalBilty";
}


<style>

    table thead .header {
        background-color: lightblue;
    }

    .SearchTable {
        cursor: pointer;
        border: 2px solid maroon;
        background-color: #f1cbcb;
        width: 100%;
        position: absolute;
        z-index: 1;
        right: 0;
    }

        .SearchTable th {
            font-size: 11px !important;
            font-weight: bold !important;
        }

        .SearchTable td {
            font-size: 10px !important;
        }

    .modalBackground {
        background-color: Gray;
        filter: alpha(opacity=70);
        opacity: 0.7;
    }
</style>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery-ui.min.js"></script>
@*<script src="~/Scripts/ValsAnimation.js"></script>*@

<script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/jquery.inputmask.bundle.js"></script>

<div class="row">

    <input type="hidden" id="hfWholeBiltyEdit" />
    <div class="col-md-12">
        <!-- General Data Block -->
        <div class="block">
            <!-- General Data Title -->
            <div class="block-title">

                <h2><i class="fas fa-edit"></i><strong> Manual Bilty</strong></h2>

                @*<img src="~/img/watch.png" width="40" height="30" title="Show All" data-toggle="tooltip" style="cursor:pointer;margin-right:20px;margin-top:5px" id="showAll" class="pull-right" />*@
                <a href="#" class="pull-right btn btn-sm btn-default" title="Show all" data-toggle="tooltip" style="cursor:pointer;margin-right:20px;margin-top:5px" id="showAll"><i class="fa fa-eye" style="font-size:18px;color:black"></i></a>
                @*<img src="~/img/4cf8949a9c.png" width="40" height="30" style="cursor:pointer;margin-right:20px;margin-top:5px" id="hideAll" class="pull-right" />*@
                <a href="#" class="pull-right btn btn-sm btn-default" title="Hide all" data-toggle="tooltip" style="cursor:pointer;margin-right:3px;margin-top:5px" id="hideAll"><i class="fa fa-eye-slash" style="font-size:18px;color:black"></i></a>
                <div class="dropdown pull-right" id="Openddl">
                    <button class="btn btn-sm btn-primary dropdown-toggle" style="cursor:pointer;margin-right:20px;margin-top:5px" type="button" data-toggle="dropdown">
                        Open
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" id="lnkCI">Customer Info</a></li>
                        <li><a href="#" id="lnkLI">Location Info</a></li>
                        <li id="cInfoOpen"><a href="#" id="lnkCosI">Container Info</a></li>
                        <li><a href="#" id="lnkVI">Vehicle Info</a></li>
                        <li><a href="#" id="lnkPI">Product Info</a></li>
                        <li><a href="#" id="lnkDD">Dispatch Document Detail</a></li>
                        <li><a href="#" id="lnkRI">Receiving Information</a></li>
                        @*<li><a href="#" id="lnkDI">Receiving Document Info</a></li>*@
                        <li><a href="#" id="lnkEI">Expense Detail</a></li>
                        <li><a href="#" id="Damage">Damage Info</a></li>
                    </ul>
                </div>
            </div>

            <!-- END General Data Title -->
            <!-- General Data Content -->


            <div class="form-horizontal form-bordered">
                <form>
                    <div class="form-group">


                        <div class="col-md-2 col-xs-6">
                            <label>Self Company</label>
                            @*@Html.DropDownList("ddlOwnCompany", ViewBag.OwnCompany as SelectList, new { @class = "form-control", @readonly = true })*@
                            <select class="form-control">
                                <option>--Select--</option>
                            </select>
                        </div>


                        <div class="col-md-2 col-xs-6">
                            <label>Bilty #</label>
                            <input type="text" class="form-control" id="BiltyNoManual" placeholder="Bilty No" />
                        </div>

                        <div class="col-md-2">
                            <label>Bilty Date</label>
                            <input type="text" class="form-control MakeDate" id="BiltyDate" placeholder="Date like: 150719" />
                        </div>

                        <div class="col-md-1 col-xs-2" style="display:none;">
                            <button type="button" class="btn btn-danger">Combined</button>
                        </div>

                        <div class="col-md-1 col-xs-2" style="margin-left: 13px;display:none;">
                            <button type="button" class="btn  btn-danger">Canceled</button>
                        </div>

                        <div class="col-md-1 col-xs-2" style="margin-left: 6px;display:none;">
                            <button type="button" class="btn btn-danger">Merged</button>
                        </div>

                    </div>

                </form>
                @*@using (Html.BeginForm("addBilty", "Home", FormMethod.Post))
                    {*@
                <form>
                    <div class="form-group customer_info" id="customer_info">
                        <div class="col-md-12">
                            <h5 style="font-weight:bold;width:300px;display:inline-block">Customer Information</h5>

                            <input type="text" placeholder="Search" class="form-control" id="txtSearchWithAllTags" style="width:300px;display:inline-block;float:right" />
                            <table style="cursor:pointer" class="table table-hover table-bordered SearchTable hidden" id="tblSearchWithAllTags">
                                <thead>
                                    <tr style="Background-color:lightblue">
                                        <th></th>
                                        <th>Group Code</th>
                                        <th>Group Name</th>
                                        <th></th>
                                        <th>Company Code</th>
                                        <th>Company Name</th>
                                        <th></th>
                                        <th>Depart Code</th>
                                        <th>Depart Name</th>
                                        <th></th>
                                        <th>Person Code</th>
                                        <th>Person Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @*@foreach (var item in ViewBag.CompanyHirarchy)
                                        {
                                            <tr class="SearchWithAll">

                                                <td><input type="hidden" value="@item["GroupID"]" /></td>
                                                <td>@item["GroupCode"]</td>
                                                <td>@item["GroupName"]</td>
                                                <td><input type="hidden" value="@item["CompanyID"]" /></td>
                                                <td>@item["CompanyCode"]</td>
                                                <td>@item["CompanyName"]</td>
                                                <td><input type="hidden" value="@item["DepartID"]" /></td>
                                                <td>@item["DepartCode"]</td>
                                                <td>@item["DepartName"]</td>
                                                <td><input type="hidden" value="@item["PersonalID"]" /></td>
                                                <td>@item["Code"]</td>
                                                <td>@item["Name"]</td>


                                            </tr>
                                        }*@

                                </tbody>
                            </table>
                        </div>
                        <div class="">
                            <input type="hidden" id="hfFocusFrom" />
                            <div class="col-md-2">
                                <label class="control-label" style="margin-top: 27px;">Consigner/Sender</label>

                            </div>
                            <input type="hidden" id="hfSenderGroupID" />
                            <input type="hidden" id="hfSenderCompanyID" />
                            <input type="hidden" id="hfSenderDepartID" />
                            <input type="hidden" id="hfSenderPersonID" />
                            <input type="hidden" id="hfSenderCompHierarchyID" />
                            <div class="col-md-2" id="Sender">

                                <label class="control-label">Code</label>
                                @*@Html.DropDownList("ddlConsigmentSender", ViewBag.ConsigmentSender as SelectList, new { @class = "select-chosen", id = "ddlConsigmentSender" })*@
                                <input id="txtSearch" type="text" placeholder="Code" class="form-control" />
                                <table class="table table-vcenter table-condensed  table-hover table-striped hidden" style="cursor:pointer" id="tblCosigmentInfo">
                                    <thead>
                                        <tr style="Background-color:lightblue">
                                            <th></th>
                                            <th>Group Code</th>
                                            <th>Group Name</th>
                                            <th></th>
                                            <th>Company Code</th>
                                            <th>Company Name</th>
                                            <th></th>
                                            <th>Depart Code</th>
                                            <th>Depart Name</th>
                                            <th></th>
                                            <th>Person Code</th>
                                            <th>Person Name</th>


                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@foreach (var item in ViewBag.CompanyHirarchy)
                                            {
                                                <tr class="Search">

                                                    <td><input type="hidden" value="@item["GroupID"]" /></td>
                                                    <td>@item["GroupCode"]</td>
                                                    <td>@item["GroupName"]</td>
                                                    <td><input type="hidden" value="@item["CompanyID"]" /></td>
                                                    <td>@item["CompanyCode"]</td>
                                                    <td>@item["CompanyName"]</td>
                                                    <td><input type="hidden" value="@item["DepartID"]" /></td>
                                                    <td>@item["DepartCode"]</td>
                                                    <td>@item["DepartName"]</td>
                                                    <td><input type="hidden" value="@item["PersonalID"]" /></td>
                                                    <td>@item["Code"]</td>
                                                    <td>@item["Name"]</td>


                                                </tr>
                                            }*@

                                    </tbody>
                                </table>
                            </div>
                            @*<div class="col-md-2">
                                    <label class="control-label">Group</label>
                                    <input type="text" id="ConisgmentSenderGroup" name="SenderGroup" placeholder="Group" class="form-control" />
                                </div>*@
                            <div class="col-md-3 col-xs-4">
                                <label class="control-label">Company</label>
                                <input type="text" id="ConisgmentSenderComp" name="SenderCompany" placeholder="Company" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">
                                <label class="control-label">Depart</label>
                                <input type="text" id="ConisgmentSenderDepart" name="SenderDepartment" placeholder="Department" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">
                                <label class="control-label">Person</label>
                                <input type="text" id="ConisgmentSenderPerson" name="" placeholder="Person" class="form-control" readonly />
                            </div>

                        </div>

                        <div>
                            <div class="col-md-2">
                                <label class="control-label">Consigner/Receiver</label>
                            </div>
                            <div class="col-md-2" id="Reciver">
                                <input type="hidden" id="hfReciverCompHierarchyID" />
                                <input type="hidden" id="hfReciverGroupID" />
                                <input type="hidden" id="hfReciverCompanyID" />
                                <input type="hidden" id="hfReciverDepartID" />
                                <input type="hidden" id="hfReciverPersonID" />
                                <label class="control-label">Code</label>
                                <input type="text" id="txtConsigmentReciverSearch" class="form-control" placeholder="Code" />
                                <table class="table table-vcenter table-condensed  table-hover table-striped hidden" style="cursor:pointer" id="tblCosigmentReciverInfo">
                                    <thead>
                                        <tr style="Background-color:lightblue">
                                            <th></th>
                                            <th>Group Code</th>
                                            <th>Group Name</th>
                                            <th></th>
                                            <th>Company Code</th>
                                            <th>Company Name</th>
                                            <th></th>
                                            <th>Depart Code</th>
                                            <th>Depart Name</th>
                                            <th></th>
                                            <th>Person Code</th>
                                            <th>Person Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@foreach (var item in ViewBag.CompanyHirarchy)
                                            {
                                                <tr class="ReciverSearch">

                                                    <td id="start"><input type="hidden" value="@item["GroupID"]" /></td>
                                                    <td>@item["GroupCode"]</td>
                                                    <td>@item["GroupName"]</td>
                                                    <td><input type="hidden" value="@item["CompanyID"]" /></td>
                                                    <td>@item["CompanyCode"]</td>
                                                    <td>@item["CompanyName"]</td>
                                                    <td><input type="hidden" value="@item["DepartID"]" /></td>
                                                    <td>@item["DepartCode"]</td>
                                                    <td>@item["DepartName"]</td>
                                                    <td><input type="hidden" value="@item["PersonalID"]" /></td>
                                                    <td>@item["Code"]</td>
                                                    <td>@item["Name"]</td>



                                                </tr>
                                            }*@

                                    </tbody>
                                </table>
                            </div>
                            @*<div class="col-md-2">
                                    <input type="text" id="txtConsigmentReciverGroup" name="ReciverGroup" placeholder="Group" class="form-control" />
                                </div>*@
                            <div class="col-md-3 col-xs-4">
                                <label class="control-label">Company</label>

                                <input type="text" id="txtConsigmentReciverCompany" name="ReciverCompany" placeholder="Company" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">
                                <label class="control-label">Department</label>

                                <input type="text" id="txtConsigmentReciverDepart" name="ReciverDepartment" placeholder="Department" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">
                                <label class="control-label">Person</label>

                                <input id="txtConsigmentReciverPerson" placeholder="Person" type="text" class="form-control" readonly />
                            </div>

                        </div>

                        <div>
                            <div class="col-md-2">
                                <label class="control-label">Client / Bill To</label>
                                @*<div class="col-md-2 col-xs-6" id="DIVwarehouse">*@
                                @*<input type="text" class="form-control" placeholder="Warehouse" id="WareHouse" />*@
                                <select id="ddlCustomerType" disabled class="form-control">
                                    <option value="0">-Select-</option>
                                    <option value="Paid">Paid</option>
                                    <option value="ToPay">ToPay</option>
                                </select>
                                @*</div>*@
                            </div>
                            <div class="col-md-2" id="BillTo">
                                <input type="hidden" id="hfBilltoCompHierarchyID" />
                                <input type="hidden" id="hfCompanyCode" />
                                <input type="hidden" id="hfBilltoGroupID" />
                                <input type="hidden" id="hfBilltoCompanyID" />
                                <input type="hidden" id="hfBilltoDepartID" />
                                <input type="hidden" id="hfBilltoPersonID" />
                                <input type="hidden" id="hfBilltoWalkingCustomerID" />
                                <input type="hidden" id="hfCustomerHierarchyID" />
                                <label class="control-label">Code</label>
                                <input type="text" class="form-control" id="txtBillToSearch" placeholder="Code" />
                                <table class="table table-vcenter table-condensed  table-hover table-striped hidden" style="cursor:pointer" id="tblBillToCustomer">
                                    <thead>
                                        <tr style="Background-color:lightblue">
                                            <th></th>
                                            <th>Group Code</th>
                                            <th>Group Name</th>
                                            <th></th>
                                            <th>Company Code</th>
                                            <th>Company Name</th>
                                            <th></th>
                                            <th>Depart Code</th>
                                            <th>Depart Name</th>
                                            <th></th>
                                            <th>Person Code</th>
                                            <th>Person Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@foreach (var item in ViewBag.CompanyHirarchy)
                                            {
                                                <tr class="BillToSearch">

                                                    <td><input type="hidden" value="@item["GroupID"]" /></td>
                                                    <td>@item["GroupCode"]</td>
                                                    <td>@item["GroupName"]</td>
                                                    <td><input type="hidden" value="@item["CompanyID"]" /></td>
                                                    <td>@item["CompanyCode"]</td>
                                                    <td>@item["CompanyName"]</td>
                                                    <td><input type="hidden" value="@item["DepartID"]" /></td>
                                                    <td>@item["DepartCode"]</td>
                                                    <td>@item["DepartName"]</td>
                                                    <td><input type="hidden" value="@item["PersonalID"]" /></td>
                                                    <td>@item["Code"]</td>
                                                    <td>@item["Name"]</td>



                                                </tr>
                                            }*@

                                    </tbody>
                                </table>
                            </div>
                            @*<div class="col-md-2">
                                    <input type="text" id="txtBillToGroup" name="BilltoCustomerGroup" placeholder="Group" class="form-control" />
                                </div>*@
                            <div class="col-md-3 col-xs-4">
                                <label class="control-label">Company</label>

                                <input type="text" id="txtBillToComp" name="BilltoCustomerCompany" placeholder="Company" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">
                                <label class="control-label">Department</label>

                                <input type="text" id="txtBillToDepart" name="BilltoCustomerDepartment" placeholder="Department" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">
                                <label class="control-label">Person</label>
                                <input type="text" id="txtBillToPerson" name="" placeholder="Person" class="form-control" readonly />
                            </div>

                        </div>
                        <div id="AgentLine">
                            <div class="col-md-2">
                                <label class="control-label">Clearing Agent</label>
                            </div>
                            <div class="col-md-2" id="Agent">
                                <input type="hidden" id="hfAgentGroupID" />
                                <input type="hidden" id="hfAgentCompanyID" />
                                <input type="hidden" id="hfAgentCompHierarchyID" />
                                <input type="hidden" id="hfAgentDepartID" />
                                <input type="hidden" id="hfAgentPersonID" />
                                <label class="control-label">Code</label>
                                <input type="text" class="form-control" id="txtAgentSearch" placeholder="Code" />
                                <table class="table table-vcenter table-condensed  table-hover table-striped hidden" style="cursor:pointer" id="tblAgent">
                                    <thead>
                                        <tr style="Background-color:lightblue">
                                            <th></th>
                                            <th>Group Code</th>
                                            <th>Group Name</th>
                                            <th></th>
                                            <th>Company Code</th>
                                            <th>Company Name</th>
                                            <th></th>
                                            <th>Depart Code</th>
                                            <th>Depart Name</th>
                                            <th></th>
                                            <th>Person Code</th>
                                            <th>Person Name</th>


                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@foreach (var item in ViewBag.CompanyHirarchy)
                                            {
                                                <tr class="AgentSearch">

                                                    <td><input type="hidden" value="@item["GroupID"]" /></td>
                                                    <td>@item["GroupCode"]</td>
                                                    <td>@item["GroupName"]</td>
                                                    <td><input type="hidden" value="@item["CompanyID"]" /></td>
                                                    <td>@item["CompanyCode"]</td>
                                                    <td>@item["CompanyName"]</td>
                                                    <td><input type="hidden" value="@item["DepartID"]" /></td>
                                                    <td>@item["DepartCode"]</td>
                                                    <td>@item["DepartName"]</td>
                                                    <td><input type="hidden" value="@item["PersonalID"]" /></td>
                                                    <td>@item["Code"]</td>
                                                    <td>@item["Name"]</td>


                                                </tr>
                                            }*@

                                    </tbody>
                                </table>
                            </div>
                            @*<div class="col-md-2">
                                    <input type="text" id="txtBillToGroup" name="BilltoCustomerGroup" placeholder="Group" class="form-control" />
                                </div>*@
                            <div class="col-md-3 col-xs-4">

                                <label class="control-label">Company</label>
                                <input type="text" id="AgentCompany" placeholder="Company" class="form-control" readonly />
                            </div>
                            <div class="col-md-2 col-xs-4">

                                <label class="control-label">Department</label>
                                <input type="text" id="AgentDepart" name="BilltoCustomerDepartment" readonly placeholder="Department" class="form-control" />
                            </div>
                            <div class="col-md-2 col-xs-4">

                                <label class="control-label">Person</label>
                                <input type="text" id="AgentPerson" name="" readonly placeholder="Person" class="form-control" />
                            </div>

                        </div>
                        <div>
                            <div class="col-md-4 col-xs-6" id="DIVbillingType">
                                <label class="control-label" style="font-weight:bold">Billing Type</label>
                                <select class="form-control" name="Type" id="BillingType" disabled>
                                    <option value="0">-Select-</option>
                                    <option>Vehicle Wise</option>
                                    <option>Weight Wise</option>
                                    <option>Vehicle + Weight Wise</option>
                                    <option>Lumpsum</option>
                                    <option>Unit Wise</option>
                                    <option>Space Wise</option>
                                </select>
                            </div>
                            @*</div>
                                <div class="form-group">*@
                            <div class="col-md-4 col-xs-6">
                                <label class="control-label" style="font-weight:bold">Shipment Type</label>
                                <select class="form-control" name="ShippingType" id="ShippingType">
                                    <option value="0">-Select-</option>
                                    <option>Containerized (Full)</option>
                                    <option>Containerized (Partial)</option>
                                    <option>Containerized Import</option>
                                    <option>Containerized Export</option>
                                    <option>Loose Cargo (Full)</option>
                                    <option>Loose Cargo (Partial)</option>
                                    <option>Parcel</option>
                                    <option>Courier</option>
                                    <option>Import</option>
                                    <option>Export</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-xs-8 hidden">
                                <label class="control-label" style="font-weight:bold">Loading Date</label>
                                <input type="text" class="form-control MakeDate" name="LoadingDate" id="LoadingDate" />
                            </div>


                        </div>

                        @*<div class="form-group">
                                <div class="col-md-10"></div>
                                <div class="col-md-2">


                                    <button type="submit" id="ForLocationInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                                </div>


                            </div>*@
                    </div>
                </form>
                <form>
                    <div class="form-group location_info">
                        <div class="col-md-12">
                            <h5 style="font-weight:bold;width:300px;display:inline-block">Location Information</h5>
                            <input type="checkbox" value="true" id="cblocalpick" /><label> Local Pick</label><input type="checkbox" value="true" id="cblocaldrop" /><label>Local Drop</label>
                            <input type="text" placeholder="Search" class="form-control" id="txtSearchLocationWithAll" style="width:300px;display:inline-block;float:right" />
                            <table class="table table-hover table-bordered SearchTable hidden" style="cursor:pointer" id="tblPickLocation">
                                <thead>
                                    <tr style="Background-color:lightblue">
                                        <th>Code</th>
                                        <th>Location</th>

                                        <th>Cities</th>
                                        <th>Area</th>
                                        <th>Address</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @*@foreach (var item in ViewBag.LocationList)
                                        {
                                            <tr class="PickLocationSearch">

                                                <td>@item["Code"]</td>
                                                <td>@item["Name"]</td>
                                                <td>@item["ProvinceID"]</td>
                                                <td>@item["Cities"]</td>
                                                <td>@item["Area"]</td>
                                                <td>@item["Address"]</td>



                                            </tr>
                                        }*@

                                </tbody>
                            </table>
                        </div>
                        @*<table class="table table-vcenter table-condensed  table-hover table-striped hidden" style="cursor:pointer" id="tblPickLocation">*@


                        <div class="">
                            @*<div class="col-md-2">
                                    <label class="control-label">Pick Location</label>
                                </div>*@

                            <div class="col-md-2" id="DIVpicuplocation">
                                <label class="form-label">Location Code</label>
                                <input type="text" id="txtPickLocationSearch" class="form-control" placeholder="Pick Up Code" />
                            </div>

                            @*<div class="col-md-2">
                                    <input type="text" class="form-control" placeholder="Province" name="PickUpCity" id="txtPicLocationProvince" readonly />
                                </div>*@

                            <div class="col-md-2 col-xs-3">
                                <label class="form-label">City</label>
                                <input type="text" class="form-control" placeholder="City" name="PickUpCity" id="txtPickLocationCity" readonly />
                                <input type="hidden" id="hfCityID" />
                            </div>

                            <div class="col-md-2 col-xs-3">
                                <label class="form-label">Area</label>
                                <input type="text" class="form-control" placeholder="Area" name="PickUpArea" id="txtPickLocationArea" readonly />
                                <input type="hidden" id="hfAreaID" />
                            </div>

                            <div class="col-md-2 col-xs-3">
                                <label class="form-label">Location</label>
                                <input type="text" class="form-control" placeholder="Location" name="PickUpRegion" id="txtPickLocationName" readonly />
                                <input type="hidden" id="hfPickDropID" />
                            </div>

                            <div class="col-md-4 col-xs-3">
                                <label class="form-label">Address</label>
                                <input type="text" class="form-control" placeholder="Address" name="PickUpAddress" id="txtPickLocationAddress" />
                            </div>

                            @*<div class="col-md-2">
                                    <div id="LI" class="close">X</div>
                                </div>*@
                        </div>

                        <div class="">
                            @*<div class="col-md-2">
                                    <label class="control-label">Drop Location</label>
                                </div>*@
                            <div class="col-md-2" id="DIVdroplocation">
                                <label class="form-label">Location Code</label>

                                <input type="text" class="form-control" id="txtDropLocationSearch" placeholder="Drop Off Code" />
                                <table class="table table-vcenter table-condensed  table-hover table-striped hidden" style="cursor:pointer" id="tblDropLocation">
                                    <thead>
                                        <tr style="Background-color:lightblue">
                                            <th>Code</th>
                                            <th>Location</th>
                                            <th>Province</th>
                                            <th>Cities</th>
                                            <th>Area</th>
                                            <th>Address</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@foreach (var item in ViewBag.LocationList)
                                            {
                                                <tr class="DropLocationSearch">

                                                    <td>@item["Code"]</td>
                                                    <td>@item["Name"]</td>
                                                    <td>@item["ProvinceID"]</td>
                                                    <td>@item["Cities"]</td>
                                                    <td>@item["Area"]</td>
                                                    <td>@item["Address"]</td>



                                                </tr>
                                            }*@

                                    </tbody>
                                </table>
                            </div>

                            @*<div class="col-md-2">
                                    <input type="text" class="form-control" placeholder="Province" name="DropCity" id="txtDropLocationProvince" readonly />
                                </div>*@

                            <div class="col-md-2 col-xs-3">
                                <label class="form-label">City</label>
                                <input type="hidden" id="hfDropCityID" />
                                <input type="text" class="form-control" placeholder="City" name="DropCity" id="txtDropLocationCity" readonly />
                            </div>
                            <div class="col-md-2 col-xs-3">
                                <label class="form-label">Area</label>

                                <input type="hidden" id="hfDropAreaID" />
                                <input type="text" class="form-control" placeholder="Area" name="DropArea" id="txtDropLocationArea" readonly />
                            </div>
                            <div class="col-md-2 col-xs-3">
                                <label class="form-label">Location</label>

                                <input type="text" class="form-control" placeholder="Location" name="DropRegion" id="txtDropLocationName" readonly />
                                <input type="hidden" id="hfDropID" />

                            </div>

                            <div class="col-md-4 col-xs-3">
                                <label class="form-label">Address</label>

                                <input type="text" class="form-control" placeholder="Address" name="DropAddress" id="txtDropLocationAddress" />
                            </div>

                        </div>
                        <div class="">
                            <div class="col-md-10"></div>
                            <div class="col-md-2">


                                @*<button type="submit" id="ForCosigmentInfo" class="btn btn-sm btn-primary btnSavePartial">Save &amp; Next <i class="fa fa-save"></i> </button>*@
                                <button type="submit" id="ForVehicleInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                            </div>


                        </div>
                        <hr />
                    </div>
                </form>
                <form>
                    <div class="Vehicle_info">
                        <div>
                            <h5 style="font-weight:bold;display:inline-block;width:300px">Vehicle Info</h5>

                            <table id="tblSearchVehicleWithAll" class="table table-hover table-bordered SearchTable hidden">
                                <thead>
                                    <tr style="background-color:lightblue">
                                        <td></td>
                                        <td>Code</td>
                                        <td>Name</td>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        @*<span class="btn btn-xs btn-primary pull-right" id="btnRefreshVehicleType" style="display:inline-block;float:right"><i class="fa fa-refresh"></i> </span>*@
                        <div class="form-group">

                            <div class="col-md-12">
                                @*<button type="button" id="btnVehicleInfo" class="btn btn-sm btn-info"><i class="fa fa-info"></i> | Add Vehicle Info</button>*@
                                <button type="button" id="btnUpdateVehicleInfo" class="btn btn-sm btn-warning hidden"><i class="fa fa-info"></i> | Update Vehicle Info</button>
                                <input type="text" id="SearchVehicleWithAll" class="form-control pull-right" placeholder="Search" style="display:inline-block;width:271px;margin-left:31px;margin-bottom:7px" />
                                <button type="button" id="btnAssignVehicle" onclick="$('#modal-add-Containerinfo').modal('show');" class="btn btn-sm btn-success" data-toggle="tooltip" data-placement="right" title="" data-original-title="Assign Vehicle to container"><i class="fa fa-plus"></i> Assign Vehicle</button>
                                <table id="detailsVehicle" class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th width="40%">
                                                <div style="width: 30%; float: left">
                                                    <input type="text" id="txtSearchVehicleInfo" placeholder="Code" class="form-control" />
                                                </div>
                                                <div style="width: 70%; float: left">
                                                    <input type="text" id="VehicleType" placeholder="Vehicle Type" class="form-control" readonly />
                                                </div>

                                            </th>


                                            @*<th width="10%">
                                                    <select class="form-control" id="isExternal">
                                                        <option value="Internal">Int</option>
                                                        <option value="External">Ext</option>
                                                    </select>
                                                </th>

                                                <th width="15%">  <input type="text" placeholder="Reg no" id="Regno" class="form-control" /> </th>*@
                                            <th width="10%">
                                                <button type="button" class="btn btn-xs btn-info" id="btnArrowUp" onclick="ChangeQty('up')"><i class="fas fa-arrow-up"></i> </button>
                                                <label id="VehicleQuantity">1</label>
                                                <button type="button" class="btn btn-xs btn-info" id="btnArrowDown" onclick="ChangeQty('down')"><i class="fas fa-arrow-down"></i> </button>


                                            </th>
                                            <th width="5%">   <button type="submit" class="btn btn-sm btn-success" id="btnAddVehicle"><i class="fa fa-plus"></i></button> </th>

                                        </tr>
                                    </thead>

                                    @*<tr>
                                            <td colspan="3"></td>
                                            <td>

                                            </td>
                                        </tr>*@
                                    @*</table>
                                        <table id="detailsVehicle" class="table table-bordered">*@
                                    @*<thead>
                                            <tr>
                                                <td>Vehicle Type</td>
                                                <td>Quantity</td>
                                                <td>Is External</td>
                                                <td>Reg no</td>
                                                <td>Delete</td>
                                            </tr>
                                        </thead>*@
                                    <tbody></tbody>
                                </table>
                                <table class="table table-striped hidden" id="tblRegNo">
                                    <thead>
                                        <tr style="background-color:lightblue">
                                            <td colspan="2">Reg no</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-2"></div>
                        </div>
                        @*<div class="col-md-2">

                                <div id="VI" class="close">X</div>
                            </div>*@
                        <div class="form-group">
                            @*<div class="col-md-6"></div>*@
                            <div class="col-md-6">

                            </div>
                        </div>
                        @*</div>*@
                        <div class="form-group">
                            <div class="col-md-10"></div>
                            <div class="col-md-2">


                                <button type="button" id="ForCosigmentInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i> </button>
                            </div>


                        </div>
                        <hr />
                    </div>
                </form>
                <form>
                    <div class="cosigment_info">
                        <div>
                            <h5 style="font-weight:bold;width:300px;display:inline-block">Container Information</h5>
                            @*<input type="text" id="txtSearchContainerWithAll" placeholder="Search" style="width:273px;display:inline-block;margin-left:333px" class="form-control" />*@
                            <div id="Cons" class="close pull-right" style="display:inline-block;float:right">X</div>
                            <table id="tblSearchContainerWithAll" class="table table-hover table-bordered SearchTable hidden">
                                <thead>
                                    <tr style="background-color:lightblue">
                                        <td></td>
                                        <td>Code</td>
                                        <td>Name</td>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>


                        <div class="form-group">



                            <div class="col-md-12">
                                @*<span class="btn btn-xs btn-primary pull-right" id="btnRefreshContainerType"><i class="fa fa-refresh"></i> </span>*@

                            </div>


                        </div>

                        <div class="form-group">
                            <input type="hidden" id="hfContainerTypeID" />
                            @*<div class="col-md-7">

                                </div>*@

                            @*<div class="col-md-3">
                                    <button type="submit" id="btnAddContainerType" class="btn btn-sm btn-success" style="width:200px" data-toggle="tooltip" data-placement="right" title="Add Container type From here"><i class="fa fa-plus"></i> Add Container Type</button><br />
                                    <button id="ContainerTypeInfo" class="btn btn-sm btn-info btnEdit" style="width:200px" onclick="$('#modal-add-Containerinfo').modal('show');" data-toggle="tooltip" data-placement="right" title="Add Container Information From here! If you've entered information and want to view don't click this button click 'View Container Information' for view information if you click this button your previous information will Delete"><i class="fa fa-info"></i> Add Container Info</button><br />
                                    <button type="button" id="viewContainerInfo" class="btn btn-sm btn-success" style="width:200px" onclick="$('#modal-add-Containerinfo').modal('show');"><i class="fa fa-eye"></i> View Container Info</button><br />
                                </div>*@
                            <div class="col-md-6">
                                <button type="button" id="ContainerTypeInfo" class="btn btn-sm btn-info btnEdit" style="margin:5px" data-toggle="tooltip" data-placement="right"><i class="fa fa-info"></i> | Add Container Info</button>
                                <button type="button" id="UpdateContainerTypeInfo" class="btn btn-sm btn-warning hidden btnEdit" style="margin:5px" data-toggle="tooltip" data-placement="right"><i class="fa fa-info"> | Update Container Info</i></button>
                                <input type="text" id="txtSearchContainerWithAll" placeholder="Search" style="width:273px;display:inline-block;margin-left:31px" class="form-control float-right" />
                                <table class="table table-bordered" style="margin-bottom: 0;">

                                    <tr>
                                        <td width="50%">
                                            <div style="width: 30%; float: left">
                                                <input id="txtSearchContainerType" type="text" placeholder="Code" class="form-control" />
                                            </div>
                                            <div style="width: 70%; float: left">
                                                <input id="ContainerType" placeholder="Container Type" readonly type="text" class="form-control" />
                                            </div>


                                        </td>
                                        <td width="15%">  <input id="Quantity" type="number" class="form-control" placeholder="Qty" /> </td>
                                        <td width="15%">  <input id="TotalWeight" type="number" class="form-control" placeholder="Weight" /> </td>
                                        <td width="20%"> <button type="submit" id="btnAddContainerType" class="btn btn-sm btn-success" data-toggle="tooltip" data-placement="right" title="Add Container type From here"><i class="fa fa-plus"></i></button>  </td>

                                    </tr>
                                </table>

                            </div>
                            <div class="col-md-6">
                                <table id="detailsTable" class="table table-bordered">
                                    <thead>
                                        <tr class="header">
                                            <td width="50%">Container Type</td>
                                            <td width="5%">Qty</td>
                                            <td width="15%">Weight</td>
                                            <td width="10%">Feed</td>
                                            <td width="15%">Operation</td>

                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-7">
                                @*<table id="detailsTable" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <td>Container Type</td>
                                                <td>Quantity</td>
                                                <td>Total Weight</td>
                                                <td>Delete</td>

                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>*@
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-10"></div>
                            <div class="col-md-2">


                                <button type="button" id="ForProductInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                            </div>


                        </div>
                        <hr />
                    </div>
                </form>

                <form>
                    <div class="product_info">

                        <div class="form-group">

                            @*<div class="col-md-2">

                                    <div id="PI" class="close">X</div>
                                </div>*@
                        </div>


                        <div class="form-group">
                            <div class="col-md-12">
                                <div style="margin-bottom:10px">
                                    <input type="hidden" id="hfProductID" />
                                    <h5 style="font-weight:bold;width:300px;display:inline-block">Product</h5>
                                    <input type="checkbox" class="text-center" id="AsPerDispatch">As per dispatch document
                                    <input type="text" placeholder="Search" class="form-control" id="txtSearchProductWithAll" style="width:300px;display:inline-block;float:right">
                                </div>
                                <table class="table table-hover table-bordered SearchTable hidden" style="cursor:pointer" id="tblProduct">
                                    <thead>
                                        <tr style="background-color:lightblue">
                                            <th>Code</th>
                                            <th>Item</th>
                                            <th>Code</th>
                                            <th>Model</th>
                                            <th>Package Type</th>
                                            <th>Qty</th>
                                            @*<th>Cities</th>
                                                <th>Area</th>
                                                <th>Address</th>*@
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*@foreach (var item in ViewBag.ProductLists)
                                            {
                                                <tr class="ProductSearch">

                                                    <td>@item["Code"]</td>
                                                    <td>@item["Item"]</td>
                                                    <td>@item["PackageType"]</td>
                                                    <td>@item["PackageQty"]</td>




                                                </tr>
                                            }*@

                                    </tbody>
                                </table>
                            </div>




                        </div>
                        <div class="hideProduct">
                            <div class="form-group">
                                <div class="col-md-4" id="DIVProductSearch">
                                    <label>Code</label>
                                    <input type="text" class="form-control" id="txtProductSearch" placeholder="Code" />

                                </div>
                                <div class="col-md-4">
                                    <label>Qty</label>
                                    <input type="number" class="form-control" id="txtItemQty" placeholder="Item Qty" />
                                </div>
                                <div class="col-md-2">
                                    <label>Add Product</label>
                                    <button type="submit" class="btn btn-sm btn-success" id="btnAddProduct"><i class="fa fa-plus"></i> Add Product</button>
                                </div>
                            </div>
                            <div class="form-group">


                                <div class="col-md-2">
                                    <label>Package Type</label>
                                    <input type="text" class="form-control" id="txtProductPackageType" placeholder="Package Type" readonly />
                                </div>
                                <div class="col-md-2">
                                    <label>Item</label>
                                    <input type="text" class="form-control" id="txtProductItem" placeholder="Item" readonly />
                                </div>
                                <div class="col-md-2">
                                    <label>Model</label>
                                    <input type="text" class="form-control" id="txtProductModel" placeholder="Model" readonly />
                                </div>
                                <div class="col-md-2">
                                    <label>Qty</label>
                                    <input type="text" class="form-control" id="txtProductQty" placeholder="Pkg Qty" readonly />
                                </div>

                                <div class="col-md-2">
                                    <label>Total Weight</label>
                                    <input type="text" class="form-control" id="txtTotalWeight" placeholder="Total Weight" readonly />
                                </div>

                            </div>
                            <div class="form-group">

                                <div class="col-md-10">
                                    <table id="detailsProduct" class="table table-bordered">
                                        <thead>
                                            <tr class="header">
                                                <td>Package Type</td>
                                                <td>Item Name</td>
                                                <td>Pkg Qty</td>
                                                <td>Item Qty</td>
                                                <td>Total Weight</td>
                                                <td>Delete</td>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-4"></div>
                                            <div class="col-md-1">
                                                <h6 id="lblTotalPkgQty"></h6>
                                            </div>
                                            <div class="col-md-1">
                                                <h6 id="lblTotalitemQty"></h6>
                                            </div>
                                            <div class="col-md-1" style="left:2%">
                                                <h6 id="lblTotalWeight"></h6>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-md-4"></div>
                                <div class="col-md-4">

                                    <input placeholder="Actual Weight" type="number" id="ActualWeight" class="form-control pull-right" readonly />
                                </div>
                                <div class="col-md-4">

                                    <input type="number" placeholder="Diffrence" class="form-control" readonly />
                                </div>

                            </div>


                        </div>
                        <div class="form-group">
                            <div class="col-md-10"></div>
                            <div class="col-md-2">


                                <button type="button" id="ForDispatchInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                            </div>


                        </div>

                        <hr />
                    </div>
                </form>
                <form>
                    <div class="dispatch_info">
                        <div class="col-md-6"><h5 style="font-weight:bold;display:inline-block;width:300px">Dispatch Document Info</h5></div>
                        <div class="col-md-6">
                            <input type="text" placeholder="Search" id="txtSearchDipatchDocumentWithAll" class="form-control" />
                            <table class="SearchTable hidden" id="tblDispatchSearch">
                                <thead>
                                    <tr style="font-weight:bold">
                                        <td>
                                            Code
                                        </td>
                                        <td>
                                            Name
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                        <div id="dispatch" style="display:inline-block;float:right" class="close">X</div>
                        <div class="form-group">

                            <div class="col-md-8">
                                <table class="table table-bordered">
                                    <tr>
                                        <th>Code</th>
                                        <th>Dispatch Document Type</th>
                                        <th>Document No</th>
                                        <th>File name</th>

                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="form-control" id="txtSearchDipatchCode" placeholder="Code" />
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" id="ddlDocument" placeholder="Document Type" readonly />

                                            @*@Html.DropDownList("ddlDocument", ViewBag.document as SelectList, "-Select-", htmlAttributes: new { @class = "form-control" })*@
                                        </td>
                                        <td>  <input type="text" id="txtDocumentNo" class="form-control" /> </td>
                                        <td>  <input type="text" id="txtFileName" class="form-control" readonly /> </td>

                                    </tr>

                                </table>
                            </div>

                            <div class="col-md-2">

                                <button type="submit" class="btn btn-sm btn-success" id="btnDispatchDocument" style="width:200px"><i class="fa fa-plus"></i>  Add Document</button>
                                <input id="DisptachInput" type="file" multiple>


                            </div>
                            <div class="col-md-2">
                                <span class="btn btn-xs btn-primary pull-right" id="btnRefreshDcoument"><i class="fa fa-refresh"></i> </span>

                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-10">
                                <table id="detailsDispatchDocument" class="table table-bordered">
                                    <thead>
                                        <tr class="header">
                                            <td>Document Type</td>
                                            <td>Document No</td>

                                            <td>File Name</td>
                                            <td>Delete</td>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                            <div class="col-md-2">


                                <button type="button" id="ForRecievingInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                            </div>


                        </div>

                        <hr />
                    </div>
                </form>
                <form>
                    <div class="Reciving_info">
                        <h5 style="font-weight:bold;display:inline-block;width:300px">Receiving Info</h5>

                        <div id="RI" class="close" style="display:inline-block;float:right">X</div>
                        <div class="form-group">

                            <div class="col-md-6">
                                <table class="table table-bordered">
                                    <tr>
                                        <th>Received By</th>
                                        <th>Date</th>
                                        <th>Time</th>

                                    </tr>
                                    <tr>
                                        <td>
                                            @*@Html.DropDownList("ddlRecieveBy", ViewBag.Employees as SelectList, new { @class = "form-control" })*@
                                            <select class="form-control" id="ddlRecieveBy">
                                                <option value="0">-Select-</option>
                                                <option>one</option>
                                                <option>two</option>

                                            </select>
                                        </td>
                                        <td>  <input type="text" id="txtDate" class="MakeDate form-control" /> </td>
                                        <td>  <input type="time" id="txtTime" class=" form-control" /> </td>

                                    </tr>
                                </table>
                            </div>

                            <div class="col-md-2">
                                <button type="button" class="btn btn-sm btn-success" id="btnAddReceiving" style="width:150px"><i class="fa fa-plus"></i>  Add Receiving Info</button>


                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-sm btn-success" id="addVehicleTimings" style="width:150px"><i class="fa fa-plus"></i>  Add Vehicle Timings</button>


                            </div>
                            @*<div class="col-md-2">
                                    <button type="button" class="btn btn-sm btn-success" style="width:150px"><i class="fa fa-plus"></i> Vehicle Type Info</button>


                                </div>*@
                            <div class="col-md-2">
                                <span class="btn btn-xs btn-primary pull-right" id="btnRefreshRecDcoument"><i class="fa fa-refresh"></i> </span>

                            </div>
                            <div class="form-group">
                                <div class="col-md-8">
                                    <table id="detailsReciveBy" class="table table-bordered">
                                        <thead>
                                            <tr class="header">
                                                <td>Receiving By</td>
                                                <td>Date</td>

                                                <td>Time</td>
                                                <td>Delete</td>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>



                            </div>

                            <div class="col-md-8">
                                <h5 style="font-weight:bold">Receiving Document Detail</h5>
                            </div>
                            <div class="col-md-4">
                                <input type="text" placeholder="Search" id="txtSearchrDocumentWithhAll" class="form-control" />
                                <table class="SearchTable hidden" id="tblrDocumentSearch">
                                    <thead>
                                        <tr style="font-weight:bold">
                                            <td>
                                                Code
                                            </td>
                                            <td>
                                                Name
                                            </td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="form-group">

                            <div class="col-md-8">
                                <table class="table table-bordered">
                                    <tr>
                                        <th>Code</th>
                                        <th>Receiving Document Type</th>
                                        <th>Document No</th>
                                        <th>File name</th>

                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="form-control" id="txtSearchrDocumentCode" placeholder="Code" />

                                        </td>
                                        <td>
                                            <input type="text" class="form-control" id="ddlDocumentRecive" placeholder="Document Type" />
                                            @*@Html.DropDownList("ddlDocumentRecive", ViewBag.document as SelectList, "-Select-", htmlAttributes: new { @class = "form-control" })*@
                                        </td>
                                        <td>  <input type="text" class="form-control" id="txtRecDocumentNo" /> </td>
                                        <td>  <input type="text" class="form-control" id="txtRecFileName" readonly /> </td>

                                    </tr>
                                </table>
                            </div>

                            <div class="col-md-2">
                                @*<button type="submit" class="btn btn-sm btn-success" id="btnReciveDocument" style="width:200px"><i class="fa fa-plus"></i>  Add Document</button>
                                    <input type="file" id="RecivingDocumentInput" />*@

                                <button type="submit" class="btn btn-sm btn-success" id="btnReciveDocument" style="width:200px"><i class="fa fa-plus"></i>  Add Document</button>
                                <input id="fileInput" type="file">

                            </div>
                            @*<div class="col-md-2">

                                    <div id="DI" class="close">X</div>
                                </div>*@
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <table id="detailsReciveDocument" class="table table-bordered">
                                    <thead>
                                        <tr class="header">
                                            <td>Receiving Document Type</td>
                                            <td>Document No</td>

                                            <td>File Name</td>
                                            <td>Delete</td>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                            <div class="col-md-2"></div>
                            <div class="col-md-2">


                                <button type="button" id="ForDamageInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                            </div>


                        </div>
                        <hr />
                    </div>
                </form>


                <div class="document_info">

                    <hr />
                </div>




                <form>
                    <div class="damage_info">
                        <h5 style="font-weight:bold;display:inline-block;width:300px">Damage Detail</h5>
                        <span class="btn btn-xs btn-primary pull-right" id="btnRefreshDamage" style="display:inline-block;float:right"><i class="fa fa-refresh"></i> </span>
                        <div class="form-group">

                            <div class="col-md-8">
                                <table class="table table-bordered">
                                    <tr>
                                        <th>Sr #</th>
                                        <th>Item Name</th>
                                        <th>Damage Type</th>
                                        <th>Document Type</th>
                                        <th>Claim/Damage Cost</th>
                                        <th>Cause of Damage</th>


                                    </tr>
                                    <tr>
                                        <td>
                                            1
                                        </td>

                                        <td>
                                            <select id="ddlProduct" class="form-control" disabled>
                                                <option value="0">-Select-</option>
                                            </select>
                                            @*@Html.DropDownList("ddlProduct", ViewBag.Product as SelectList, "-Select-", htmlAttributes: new { @class = "form-control productDamage" })*@
                                        </td>
                                        <td>
                                            <select id="ddlProduct" class="form-control" disabled>
                                                <option value="0">-Select-</option>
                                            </select>
                                            @*@Html.DropDownList("ddlDamage", ViewBag.damage as SelectList, "-Select-", htmlAttributes: new { @class = "form-control" })*@
                                        </td>
                                        <td>
                                            <select id="ddlProduct" class="form-control" disabled>
                                                <option value="0">-Select-</option>
                                            </select>
                                            @*@Html.DropDownList("ddlDamageDocumentType", ViewBag.document as SelectList, "-Select-", htmlAttributes: new { @class = "form-control" })*@
                                        </td>
                                        <td>  <input type="number" id="txtDamageCost" class="form-control" /> </td>
                                        <td>  <input type="text" id="txtCause" class="form-control" /> </td>


                                    </tr>
                                </table>
                            </div>

                            <div class="col-md-2">
                                <button type="submit" class="btn btn-sm btn-success" id="btnDamageType" style="width:150px"><i class="fa fa-plus"></i>  Add Damages</button>



                            </div>
                            <div class="col-md-2">

                                <div id="DMG" class="close">X</div>
                            </div>

                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <table id="detailsDamageType" class="table table-bordered">
                                    <thead>
                                        <tr class="header">
                                            <td>Item Name</td>
                                            <td>Damage Type</td>

                                            <td>Document Type</td>
                                            <td>Damage Cost</td>
                                            <td>Cause of Damage</td>
                                            <td>Delete</td>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                            <div class="col-md-3">

                                <button type="button" id="ForReimbursableInfo" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>
                                @*<button type="button" id="CollapseAll" class="btn btn-sm btn-primary">Collapse All </button>*@

                            </div>



                        </div>

                    </div>
                </form>
                <div class="expense_info">
                    <div class="col-md-8"><h5 style="font-weight:bold;width:300px;display:inline-block">Expenses</h5></div>
                    <div class="col-md-4"><input type="text" placeholder="Search" class="form-control" id="txtSearchExpenseWithAll" /></div>
                    <span class="btn btn-xs btn-primary pull-right" id="btnRefreshExpense" style="display:inline-block;float:right"><i class="fa fa-refresh"></i> </span>
                    <form>
                        <div class="form-group">

                            <div class="col-md-8">
                                <table class="table table-bordered">
                                    <tr class="header">
                                        <th>Code</th>
                                        <th>Account</th>
                                        <th>Amount</th>


                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" placeholder="Search" class="form-control" id="txtCodeRevenue" />
                                        </td>
                                        <td>
                                            <input type="text" placeholder="Account" class="form-control" id="txtAccount" />
                                            @*@Html.DropDownList("ddlExpense", ViewBag.expense as SelectList, "-Select-", htmlAttributes: new { @class = "form-control" })*@
                                        </td>
                                        <td>  <input type="number" class="form-control" id="txtReimursableAmount" /> </td>


                                    </tr>
                                </table>
                            </div>

                            <div class="col-md-2">
                                <button type="submit" class="btn btn-sm btn-success" id="btnReimursable" style="width:200px"><i class="fa fa-plus"></i></button>


                            </div>
                            <div class="col-md-2">

                                <div id="EI" class="close">X</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8">
                                <table id="detailsReimursable" class="table table-bordered">
                                    <thead>
                                        <tr class="header">
                                            <td>Account</td>
                                            <td>Amount</td>
                                            <td>Delete</td>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                            <div class="col-md-2">
                                <button type="button" id="ForWhole" class="btn btn-sm btn-primary btnSavePartial">Next | <i class="fa fa-angle-double-right"></i>  </button>

                            </div>
                            @*<div class="col-md-2">


                                    <button type="button" id="ForDamageInfo" class="btn btn-sm btn-primary">Load more <i class="fa fa-plus"></i> </button>
                                </div>*@


                        </div>
                    </form>
                    @*<h5 style="font-weight:bold">Actual Expenses</h5>
                        <form>
                            <div class="form-group">

                                <div class="col-md-8">
                                    <table class="table table-bordered">
                                        <tr>
                                            <th>Expense Type</th>
                                            <th>Amount</th>


                                        </tr>
                                        <tr>
                                            <td>
                                                @Html.DropDownList("ddlExpenseActual", ViewBag.expense as SelectList, "-Select-", htmlAttributes: new { @class = "form-control" })
                                            </td>
                                            <td>  <input type="number" class="form-control" id="txtActualAmount" /> </td>


                                        </tr>
                                    </table>
                                </div>

                                <div class="col-md-2">
                                    <button type="submit" class="btn btn-sm btn-success" id="btnActual" style="width:200px"><i class="fa fa-plus"></i>  Add Expense</button>


                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-md-8">
                                    <table id="detailsActualExpense" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <td>Expense Type</td>
                                                <td>Amount</td>
                                                <td>Delete</td>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                                <div class="col-md-2"></div>
                                <div class="col-md-2">


                                    <button type="button" id="ForDamageInfo" class="btn btn-sm btn-primary btnSavePartial">Save &amp; Next<i class="fa fa-save"></i> </button>
                                </div>


                            </div>
                        </form>
                        <hr />*@
                </div>

                <div class="form-group">
                    <div class="col-md-12">
                        <label>Remarks</label>
                        <textarea class="form-control" id="txtBiltyRemarks" placeholder="Enter remarks if needed." rows="2" cols="12"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-12">
                        <button type="submit" id="btnSaveBilty" onclick="SaveWholeBilty(true)" class="btn btn-success pull-left"><i class="fa fa-save"></i> Save Bilty</button>
                        <button type="submit" id="btnSaveBiltyandNew" onclick="SaveWholeBilty(false)" class="btn btn-success pull-right"><i class="fa fa-save"></i> Save & Next</button>
                    </div>
                </div>
                @*}*@

            </div>

            <!-- END General Data Content -->
        </div>
        <!-- END General Data Block -->
    </div>
</div>
@*<div id="Loading" style="height:100%;width:100%;top:0;left:0;position:absolute;background-color:lightgray;opacity:0.7">
        <img src="~/img/lg.rotating-balls-spinner.gif" style="left:43%;position:absolute;top:30%;" />
    </div>*@
<div id="modal-add-Containerinfo" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:1370px;left:0%">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header text-center">
                <h2 class="modal-title"><i class="fa fa-pencil"></i> Add Container Information</h2>
                <button type="button" class="btn btn-danger btn-xs pull-right" data-dismiss="modal"><i class="fa fa-close"></i></button>
            </div>
            <!-- END Modal Header -->
            <!-- Modal Body -->
            <div class="modal-body">
                <form>
                    <table class="table innerTable" id="modalTable">
                        <thead>
                            <tr>
                                <td>
                                    Sr.No
                                </td>
                                <td>
                                    Container Type
                                </td>
                                <td>
                                    Container #
                                </td>
                                <td>
                                    Weight
                                </td>
                                <td id="pickHeading">
                                    Empty container pick

                                </td>
                                <td id="dropHeading">
                                    Empty container Drop
                                </td>
                                <td>
                                    Vessel
                                </td>
                                <td>
                                    Remarks
                                </td>
                                <td>
                                </td>
                                <td>
                                    Vehicles
                                </td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>

                    <div class="col-md-11"></div>
                    <input type="submit" id="btnSaveContainerInfo" onclick="$('#modal-add-Containerinfo').modal('hide');" value="Save" class="btn btn-primary" />
                </form>
            </div>
            <!-- END Modal Body -->
        </div>
    </div>
</div>
<div id="modal-add-VehicleInfo" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:1200px;left:0%">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header text-center">
                <h2 class="modal-title"><i class="fas fa-edit"></i> Add Vehicle Information</h2>
                <button type="button" class="btn btn-danger btn-xs pull-right" data-dismiss="modal"><i class="fa fa-close"></i></button>
            </div>
            <!-- END Modal Header -->
            <!-- Modal Body -->
            <div class="modal-body">
                <input type="hidden" id="hfSearchVehicle" />
                <table class="table innerTable" id="VehiclemodalTable">
                    <thead>
                        <tr>
                            <th>
                                Sr.No
                            </th>
                            <th>
                                Vehicle Type
                            </th>
                            <th>
                                Reg no
                            </th>
                            @*<th>
                                    Contact
                                </th>*@
                            <th>
                                Cell

                            </th>
                            <th>
                                Driver name
                            </th>
                            <th>
                                Father
                            </th>
                            <th>
                                NIC
                            </th>
                            <th>
                                License
                            </th>
                            <th>
                                Broker <a href="#" class="btn btn-xs btn-success" id="addBrokers"><i class="fa fa-plus"></i></a>
                            </th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <table class="table table-striped tblRegNo hidden" style="position: absolute; z-index: 1; right: 0; top: 1px; background-color: whitesmoke;">
                    <thead>
                        <tr style="background-color:lightblue">
                            <td></td>
                            <td>RegNo</td>

                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

                <div class="col-md-11"></div>
                <input type="button" id="btnSaveVehicleInfo" onclick="$('#modal-add-VehicleInfo').modal('hide');" value="Save" class="btn btn-primary" />

            </div>
            <!-- END Modal Body -->
        </div>
    </div>
</div>


<div id="modal-add-VehicleTimings" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:1200px;left:0%">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header text-center">
                <h2 class="modal-title"><i class="fas fa-edit"></i> Add Vehicle Timings</h2>
                <button type="button" class="btn btn-danger btn-xs pull-right" data-dismiss="modal"><i class="fa fa-close"></i></button>
            </div>
            <!-- END Modal Header -->
            <!-- Modal Body -->
            <div class="modal-body">

                <table class="table table-bordered innerTable" id="VehicleTimings">
                    <thead>
                        <tr>
                            <th colspan="3">

                            </th>
                            <th colspan="2" class="text-center">
                                Vehicle Reporting
                            </th>
                            <th colspan="2" class="text-center">
                                Vehicle In
                            </th>
                            <th colspan="2" class="text-center">
                                Vehicle Out
                            </th>
                        </tr>
                        <tr>

                            <th>
                                Sr.No
                            </th>
                            <th>
                                Vehicle Type
                            </th>
                            <th>
                                Reg no
                            </th>
                            <th class="text-center">
                                Date
                            </th>
                            <th class="text-center">
                                Time

                            </th>
                            <th class="text-center">
                                Date
                            </th>
                            <th class="text-center">
                                Time
                            </th>
                            <th class="text-center">
                                Date
                            </th>
                            <th class="text-center">
                                Time
                            </th>

                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <div class="col-md-11"></div>
                <input type="button" id="btnSaveVehicleInfo" onclick="$('#modal-add-VehicleTimings').modal('hide');" value="Save" class="btn btn-primary" />

            </div>
            <!-- END Modal Body -->
        </div>
    </div>
</div>

<div id="modal-add-AssignVehicle" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:1200px;left:0%">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header text-center">
                <h2 class="modal-title"><i class="fas fa-edit"></i>  Assign Containers to Vehicle</h2>
                <button type="button" class="btn btn-danger btn-xs pull-right" data-dismiss="modal"><i class="fa fa-close"></i></button>
            </div>
            <!-- END Modal Header -->
            <!-- Modal Body -->
            <div class="modal-body">

                <table class="table table-striped innerTable" id="tblAssignVehicle">
                    <thead>

                        <tr>

                            <th>
                                Sr.No
                            </th>
                            <th>
                                Container Type
                            </th>
                            <th>
                                Size
                            </th>
                            <th>
                                Container #
                            </th>
                            <th>
                                Vehicle Types
                            </th>


                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <div class="col-md-11"></div>
                <input type="button" id="btnSaveVehicleInfo" onclick="$('#modal-add-VehicleInfo').modal('hide');" value="Save" class="btn btn-primary" />

            </div>
            <!-- END Modal Body -->
        </div>
    </div>
</div>


<div id="modal-message" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="top:25%">
        <div class="modal-content" style="width:436px;left: 20%;">
            <!-- Modal Header -->
            @*<div class="modal-header text-center">
                    <h2 class="modal-title"><i class="fas fa-edit"></i>  Assign Containers to Vehicle</h2>
                </div>*@
            <!-- END Modal Header -->
            <!-- Modal Body -->
            <div class="modal-body" style="display:inline-block">

                <img src="~/img/false-2061132_960_720.png" width="100" height="100" id="ErrorImage" style="margin-left:153px" />

                <h4 id="messagePara" class="text-center"></h4>

                <div style="width:50px;margin-left: 305px;">
                    <input type="button" id="btnSaveVehicleInfo" onclick="$('#modal-message').modal('hide');" value="OK" class="btn btn-primary" />
                </div>

            </div>
            <!-- END Modal Body -->
        </div>
    </div>
</div>

<div id="modal-success" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="top:25%">
        <div class="modal-content" style="width:436px;left: 20%;">
            <!-- Modal Header -->
            @*<div class="modal-header text-center">
                    <h2 class="modal-title"><i class="fas fa-edit"></i>  Assign Containers to Vehicle</h2>
                </div>*@
            <!-- END Modal Header -->
            <!-- Modal Body -->
            <div class="modal-body" style="display:inline-block">

                <img src="~/img/green-checkmark-icon-png-23.png" width="100" height="100" id="SuccessImage" style="margin-left:153px" />

                <h4 class="text-center"><span id="messagePara2">Bilty Saved Successfully</span> <br /><br />You want to Clear All data?</h4>
                @*<p>You want to Clear All data?</p>*@
                <div class="col-md-2"></div>
                <div class="col-md-9">
                    <button type="button" onclick="window.location.href = '/ValsERP/Home/Biltypage'" class="btn btn-danger" style="margin:10px">Yes Clear All</button>
                    <button type="button" class="btn btn-default" onclick="$('#modal-success').modal('hide');">No Thanks</button>
                </div>
                <div style="width:50px;margin-left: 305px;">
                    @*<input type="button" id="btnSaveVehicleInfo" onclick="$('#modal-success').modal('hide');" value="OK" class="btn btn-primary" />*@
                </div>

            </div>
            <!-- END Modal Body -->
        </div>
    </div>
</div>

<div id="modal-add-broker" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header text-center">
                <h2 class="modal-title"><i class="fas fa-edit"></i> Add Broker</h2>
                <button type="button" class="btn btn-danger btn-xs pull-right" data-dismiss="modal"><i class="fa fa-close"></i></button>
            </div>
            <!-- END Modal Header -->
            <!-- Modal Body -->

            <div class="modal-body">
                <table class="table table-responsive">
                    <tbody>
                        <tr>
                            <td>

                                <label class="control-label">Code</label>
                                <input type="text" id="Code" name="Code" class="form-control" required />
                            </td>
                            <td>
                                <label class="control-label">Name</label>
                                <input type="text" id="Name" name="Name" class="form-control" required />
                            </td>

                        </tr>


                    </tbody>
                </table>

            </div>

            <div class="modal-footer">
                @*<label class="control-label pull-left">Status</label>*@


                <button type="submit" id="btnSaveBroker" title="Add New Broker From Here" class="btn btn-primary pull-right"><b><i class="fa fa-save"></i> Save</b></button>
            </div>

            <!-- END Modal Body -->
        </div>
    </div>
</div>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.10.0.min.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.2/jquery-ui.min.js" type="text/javascript"></script>
<link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.2/themes/blitzer/jquery-ui.css"
      rel="Stylesheet" type="text/css" />
<script>var ControllerUrl = "../Home/";
    function Notification(message, type) {

        if (type != null) {
            if (type == "error") {
                //$("#messagePara").html('');
                //$("#messagePara").append("Error! " + message);
                //$("#modal-message").modal('show');
                alert("Error: " + message);
            }
            else if (type == "success") {
                //$("#messagePara2").html(message);
                //$('#modal-success').modal('show');
                alert("Success! " + message);
            }
        }
    }
    $(document).ready(function () {
        $("#ddlOwnCompany").val(3);
        getOrderByID();
        $(".datepicker").datepicker();
        $(".cosigment_info, .Vehicle_info, .product_info,.dispatch_info,.Reciving_info,.document_info,.expense_info,.damage_info").hide();
        $("#CollapseAll").click(function () {
            $(".customer_info,.location_info,.cosigment_info,.Vehicle_info,.product_info,.dispatch_info,.Reciving_info,.document_info,.expense_info,.damage_info").hide("slow");
            $("#ForCustomerInfo,#ForLocationInfo,#ForCosigmentInfo,#ForVehicleInfo,#ForProductInfo,#ForDispatchInfo,#ForRecievingInfo,#ForRecDocumentInfo,#ForReimbursableInfo,#ForDamageInfo").show("slow");
        });
        $("#hideAll").click(function () {
            $(".customer_info,.location_info,.cosigment_info,.Vehicle_info,.product_info,.dispatch_info,.Reciving_info,.document_info,.expense_info,.damage_info").hide("slow");
            $("#ForCustomerInfo,#ForLocationInfo,#ForCosigmentInfo,#ForVehicleInfo,#ForProductInfo,#ForDispatchInfo,#ForRecievingInfo,#ForRecDocumentInfo,#ForReimbursableInfo,#ForDamageInfo").show();
        });
        //OPEN SPECIFIC PANEL ON DROPDOWN BUTTON
        $("#lnkCI").click(function () {
            $(".customer_info").show("slow");
        });
        $("#lnkLI").click(function () {
            $(".location_info").show("slow");
        });
        $("#lnkCosI").click(function () {
            $(".cosigment_info").show("slow");
        });
        $("#lnkVI").click(function () {
            $(".Vehicle_info").show("slow");
        });
        $("#lnkPI").click(function () {
            $(".product_info").show("slow");
        });
        $("#lnkDD").click(function () {
            $(".dispatch_info").show("slow");
        });
        $("#lnkRI").click(function () {
            $(".Reciving_info").show("slow");
        });
        $("#lnkDI").click(function () {
            $(".document_info").show("slow");
        });
        $("#lnkEI").click(function () {
            $(".expense_info").show("slow");
        });
        $("#Damage").click(function () {
            $(".damage_info").show("slow");
        });


        //LOAD MORE FUNCTIOANLITY


        //HIDE PANEL ON CLOSE BUTTON


        $("#CI").click(function () {

            $(".customer_info").fadeOut(800);
        });

        $("#LI").click(function () {

            $(".location_info").fadeOut();
        });

        $("#Cons").click(function () {

            $(".cosigment_info").fadeOut();
        });

        $("#VI").click(function () {

            $(".Vehicle_info").fadeOut();

        });

        $("#PI").click(function () {

            $(".product_info").fadeOut();

        });

        $("#dispatch").click(function () {

            $(".dispatch_info").fadeOut();

        });

        $("#RI").click(function () {

            $(".Reciving_info").fadeOut();

        });


        $("#DI").click(function () {

            $(".document_info").fadeOut();

        });

        $("#EI").click(function () {

            $(".expense_info").fadeOut();

        });

        $("#DMG").click(function () {

            $(".damage_info").fadeOut();

        });


        $("form").on("submit", function (e) {
            debugger;
            e.preventDefault();
        });



        $("#Openddl,#showAll,#hideAll").hide();
        function formatState(state) {
            if (!state.id) {
                return state.text;
            }
            var baseUrl = "/user/pages/images/flags";
            var $state = $(
                '<span><img src="' + baseUrl + '/' + state.element.value.toLowerCase() + '.png" class="img-flag" /> ' + state.text + '</span>'
            );
            return $state;
        };

        $(".js-example-templating").select2({
            templateResult: formatState
        });
        $("#AgentLine").hide();
        $("input[type='text']").focus(function () {
            $(this).select();
        });
        //MY CUSTOM FUNCTIONS
        function getSenderCompany(value) {
            $.ajax({
                url: ControllerUrl + 'SearchCompanies',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value },
                success: function (data) {
                    debugger;
                    if (data.Hirarchy.length > 0) {
                        $("#ConisgmentSenderComp").val(data.Hirarchy[0].CompanyName);
                        $("#ConisgmentSenderPerson").val(data.Hirarchy[0].PersonName);
                        $("#ConisgmentSenderDepart").val(data.Hirarchy[0].DepartName);
                        $("#hfSenderCompanyID").val(data.Hirarchy[0].CompanyID);
                        $("#hfSenderGroupID").val(data.Hirarchy[0].GroupID);
                        $("#hfSenderDepartID").val(data.Hirarchy[0].DepartID);
                        $("#hfSenderPersonID").val(data.Hirarchy[0].PersonID);
                        $("#hfSenderCompHierarchyID").val(data.Hirarchy[0].CompanyHeirarchyID);
                        $("#tblCosigmentInfo").addClass("hidden");

                    }
                    else {
                        ResetSenderFields();
                        $("#txtSearchWithAllTags").focus();
                        $("#txtSearchWithAllTags").val($("#txtSearch").val());
                        $("#txtSearch").val('');
                        $("#tblCosigmentInfo").addClass("hidden");
                        $("#hfFocusFrom").val("sender");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getReciverCompany(value) {
            $.ajax({
                url: ControllerUrl + 'SearchCompanies',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value },
                success: function (data) {
                    debugger;
                    if (data.Hirarchy.length > 0) {
                        $("#txtConsigmentReciverCompany").val(data.Hirarchy[0].CompanyName);
                        $("#txtConsigmentReciverPerson").val(data.Hirarchy[0].PersonName);
                        $("#txtConsigmentReciverDepart").val(data.Hirarchy[0].DepartName);
                        $("#hfReciverCompanyID").val(data.Hirarchy[0].CompanyID);
                        $("#hfReciverDepartID").val(data.Hirarchy[0].DepartID);
                        $("#hfReciverPersonID").val(data.Hirarchy[0].PersonID);
                        $("#hfReciverCompHierarchyID").val(data.Hirarchy[0].CompanyHeirarchyID);

                        $("#tblCosigmentReciverInfo").addClass("hidden");


                    }
                    else {
                        ResetReciverFields();
                        $("#txtSearchWithAllTags").focus();
                        $("#txtSearchWithAllTags").val($("#txtConsigmentReciverSearch").val());
                        $("#txtConsigmentReciverSearch").val('');
                        $("#tblCosigmentReciverInfo").addClass("hidden");
                        $("#hfFocusFrom").val("reciver");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getBilltoCompany(value) {
            $.ajax({
                url: ControllerUrl + 'SearchCompanies',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value, isBillto: true },
                success: function (data) {
                    debugger;
                    if (data.Hirarchy.length > 0) {


                        $("#txtBillToComp").val(data.Hirarchy[0].CompanyName);
                        $("#txtBillToPerson").val(data.Hirarchy[0].PersonName);
                        $("#txtBillToDepart").val(data.Hirarchy[0].DepartName);


                        $("#hfCustomerHierarchyID").val(data.Hirarchy[0].CompanyHeirarchyID);

                        $("#hfBilltoCompanyID").val(data.Hirarchy[0].CompanyID);
                        $("#hfBilltoDepartID").val(data.Hirarchy[0].DepartID);
                        $("#hfBilltoPersonID").val(data.Hirarchy[0].PersonID);
                        $("#hfBilltoWalkingCustomerID").val(data.Hirarchy[0].WalkingCustomerID);
                        $("#hfBilltoCompHierarchyID").val(data.Hirarchy[0].CompanyHeirarchyID);
                        //turk

                        debugger;
                        GetSetCustomerType(data.Hirarchy[0].CompanyHeirarchyID);
                        //turk
                        $("#tblBillToCustomer").addClass("hidden");


                    }
                    else {
                        ResetBilltoFields();
                        $("#txtSearchWithAllTags").focus();
                        $("#txtSearchWithAllTags").val($("#txtBillToSearch").val());
                        $("#txtBillToSearch").val('');
                        $("#tblBillToCustomer").addClass("hidden");
                        $("#hfFocusFrom").val("billto");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getAgentCompany(value) {
            $.ajax({
                url: ControllerUrl + 'SearchCompanies',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value },
                success: function (data) {
                    debugger;
                    if (data.Hirarchy.length > 0) {

                        $("#AgentCompany").val(data.Hirarchy[0].CompanyName);
                        $("#AgentPerson").val(data.Hirarchy[0].PersonName);
                        $("#AgentDepart").val(data.Hirarchy[0].DepartName);

                        $("#hfAgentCompanyID").val(data.Hirarchy[0].CompanyID);
                        $("#hfAgentDepartID").val(data.Hirarchy[0].DepartID);
                        $("#hfAgentPersonID").val(data.Hirarchy[0].PersonID);

                        $("#tblAgent").addClass("hidden");


                    }
                    else {
                        ResetAgentFields();
                        $("#txtSearchWithAllTags").focus();
                        $("#txtSearchWithAllTags").val($("#txtAgentSearch").val());
                        $("#txtAgentSearch").val('')
                        $("#tblAgent").addClass("hidden");
                        $("#hfFocusFrom").val("agent");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getPickLocation(value) {
            debugger;
            let hirarchyId = $("#hfBilltoCompHierarchyID").val();
            $.ajax({
                url: ControllerUrl + 'SearchPickLocations',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value, HirarchyId: hirarchyId },
                success: function (data) {
                    debugger;
                    if (data.Locations.length) {
                        $("#txtPickLocationAddress").val(data.Locations[0].Address);
                        $("#txtPickLocationCity").val(data.Locations[0].City);
                        $("#txtPickLocationName").val(data.Locations[0].Name);
                        $("#txtPickLocationArea").val(data.Locations[0].Area);
                        //$("#txtPicLocationProvince").val(data.Locations[0].Province);
                        $("#hfPickDropID").val(data.Locations[0].PickDropID);
                        $("#hfAreaID").val(data.Locations[0].AreaID);
                        $("#hfCityID").val(data.Locations[0].CityID);
                        // $("#txtDropLocationSearch").focus();
                    }
                    else {
                        ResetPickup();
                        $("#txtSearchLocationWithAll").focus();
                        $("#txtSearchLocationWithAll").val($("#txtPickLocationSearch").val());
                        $("#txtPickLocationSearch").val('');
                        $("#hfFocusFrom").val("pickup");
                    }



                },
                error: function (xhr) {
                    alert("Error data not refresh");
                    //ResetPickup();
                    //   $("#txtSearchLocationWithAll").focus();
                    //   $("#txtSearchLocationWithAll").val($("#txtPickLocationSearch").val());
                    //   $("#txtPickLocationSearch").val('');
                    //   $("#hfFocusFrom").val("pickup");
                }
            });
        }
        function getDropLocation(value) {
            debugger;
            $.ajax({
                url: ControllerUrl + 'SearchDropLocations',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value, HirarchyId: $("#hfBilltoCompHierarchyID").val() },
                success: function (data) {

                    if (data.Locations.length) {
                        $("#txtDropLocationAddress").val(data.Locations[0].Address);
                        $("#txtDropLocationCity").val(data.Locations[0].City);
                        $("#txtDropLocationName").val(data.Locations[0].Name);
                        $("#txtDropLocationArea").val(data.Locations[0].Area);
                        $("#txtDropLocationProvince").val(data.Locations[0].Province);
                        $("#hfDropID").val(data.Locations[0].PickDropID);
                        $("#hfDropAreaID").val(data.Locations[0].AreaID);
                        $("#hfDropCityID").val(data.Locations[0].CityID);
                        $("#ForVehicleInfo").focus();
                    }
                    else {
                        ResetDrop();
                        $("#txtSearchLocationWithAll").focus();
                        $("#txtSearchLocationWithAll").val($("#txtDropLocationSearch").val());
                        $("#txtDropLocationSearch").val('');
                        $("#hfFocusFrom").val("drop");
                    }



                },
                error: function (xhr) {
                    alert("Error data not refresh");
                    //ResetPickup();
                    //   $("#txtSearchLocationWithAll").focus();
                    //   $("#txtSearchLocationWithAll").val($("#txtPickLocationSearch").val());
                    //   $("#txtPickLocationSearch").val('');
                    //   $("#hfFocusFrom").val("pickup");
                }
            });
        }
        function getProduct(value) {
            $.ajax({
                url: ControllerUrl + 'SearchProduct',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value },
                success: function (data) {
                    debugger;
                    if (data.Products.length > 0) {

                        $("#txtProductPackageType").val(data.Products[0].PackageType);
                        $("#txtProductItem").val(data.Products[0].Name);
                        $("#txtProductQty").val(data.Products[0].PackageQty);
                        $("#txtProductModel").val(data.Products[0].Model);
                        $("#hfProductID").val(data.Products[0].ProductID);


                        $("#tblProduct").addClass("hidden");

                        $("#txtItemQty").focus();
                    }
                    else {
                        //ResetAgentFields();
                        $("#txtSearchProductWithAll").focus();
                        $("#txtSearchProductWithAll").val($("#txtProductSearch").val());
                        $("#txtProductSearch").val('');
                        $("#tblProduct").addClass("hidden");
                        $("#hfFocusFrom").val("product");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getContainerType(value) {
            $.ajax({
                url: '../Home/SearchContainerType',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value },
                success: function (data) {
                    debugger;
                    if (data.containerType.length > 0) {
                        debugger;
                        $("#ContainerType").val(data.containerType[0].ContainerType1);
                        $("#hfContainerTypeID").val(data.containerType[0].ContainerTypeID);
                        $("#Quantity").focus();
                    }
                    else {
                        ResetContainerField();
                        $("#txtSearchContainerWithAll").focus();
                        $("#txtSearchContainerWithAll").val(value);
                        //$("#tblProduct").addClass("hidden");
                        //$("#hfFocusFrom").val("product");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getDispatchDocument(value) {
            $.ajax({
                url: '../Home/SearchDispatchDocument',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value, isMulti: false },
                success: function (data) {
                    debugger;
                    if (data.Dispatch.length > 0) {
                        $("#ddlDocument").val(data.Dispatch[0].Name);
                        $("#txtDocumentNo").focus();
                    }
                    else {
                        ResetDispatchField();
                        $("#txtSearchDipatchDocumentWithAll").focus();
                        $("#txtSearchDipatchDocumentWithAll").val(value);
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getrDocument(value) {
            $.ajax({
                url: '../Home/SearchDispatchDocument',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value, isMulti: false },
                success: function (data) {
                    debugger;
                    if (data.Dispatch.length > 0) {
                        $("#ddlDocumentRecive").val(data.Dispatch[0].Name);
                        $("#txtRecDocumentNo").focus();
                    }
                    else {
                        $("#ddlDocumentRecive").val('');
                        $("#txtSearchrDocumentWithhAll").focus();
                        $("#txtSearchrDocumentWithhAll").val(value);
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function getExpenseAccount(value) {
            $.ajax({
                url: '../Home/SearchExpense',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value, isMulti: false },
                success: function (data) {
                    debugger;
                    if (data.Expense.length > 0) {
                        $("#txtCodeRevenue").val(data.Expense[0].ExpensesTypeCode);
                        $("#txtAccount").val(data.Expense[0].ExpensesTypeName);
                        $("#txtReimursableAmount").focus();
                    }
                    else {
                        $("#txtAccount").val('');
                        $("#txtSearchExpenseWithAll").focus();
                        $("#txtSearchExpenseWithAll").val(value);
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function ResetContainerField() {
            $("#ContainerType").val('');
            $("#hfContainerTypeID").val('');
        }
        function ResetDispatchField() {
            $("#ddlDocument").val('');
        }
        function getVehicleType(value) {
            $.ajax({
                url: ControllerUrl + 'SearchVehicleType',
                type: 'POST',
                dataType: 'json',
                data: { Keyword: value },
                success: function (data) {
                    debugger;
                    if (data.vehicleType.length > 0) {
                        debugger;
                        $("#VehicleType").val(data.vehicleType[0].VehicleTypeName);
                        // $("#hfContainerTypeID").val(data.containerType[0].ContainerTypeID);
                        $("#VehicleQuantity").focus();
                    }
                    else {

                        $("#SearchVehicleWithAll").focus();
                        $("#SearchVehicleWithAll").val(value);
                        //$("#tblProduct").addClass("hidden");
                        //$("#hfFocusFrom").val("product");
                    }

                },
                error: function (xhr) {
                    alert("Error data not refresh");
                }
            });
        }
        function GetSetCustomerType(CompnayHierarchyID) {
            $.ajax({
                url: ControllerUrl + 'GetCustPaidToPay',
                type: 'POST',
                dataType: 'json',
                data: { CompnayHierarchy: CompnayHierarchyID },
                success: function (data) {
                    if (data.Hirarchy.length > 0) {

                        debugger;
                        $('#ddlCustomerType').val(data.Hirarchy[0].CustomerType);
                    }
                },
                error: function (xhr) {
                    alert("Error getting customer type of bill to customer");
                }
            });
        }
        $("#cInfoOpen").hide();
        $("#ShippingType").change(function () {
            if ($(this).val().search("Containerized") == -1) {
                $("#cInfoOpen").hide();
            }
            else {
                $("#cInfoOpen").show();
            }
            if ($("#ShippingType").val().search("Import") != -1) {
                $("#AgentLine").show();
            }
            else if ($("#ShippingType").val().search("Export") != -1) {
                $("#AgentLine").show();
            }
            else {
                $("#AgentLine").hide();

            }
        });
        //TAB AND SHIFT TAB FUNCTIONS......
        $("#Sender").on('keydown', '#txtSearch', function (e) {
            debugger;
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#BiltyDate").focus();
                }
                else {

                    $("#txtConsigmentReciverSearch").focus();

                }


            }
        });
        $("#Reciver").on('keydown', '#txtConsigmentReciverSearch', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtSearch").focus();
                }
                else {
                    let value = $("#txtConsigmentReciverSearch").val();
                    if (value.trim() != "") {
                        // getReciverCompany(value);
                        $("#txtBillToSearch").focus();
                    }
                    else {
                        $("#txtBillToSearch").focus();
                    }
                }


            }
        });
        $("#BillTo").on('keydown', '#txtBillToSearch', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtConsigmentReciverSearch").focus();
                }
                else {
                    $("#ShippingType").focus();
                    $("#BillingType").focus();
                    $("#txtAgentSearch").focus();

                }

            }
        });
        $("#Agent").on('keydown', '#txtAgentSearch', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtBillToSearch").focus();
                }
                else {
                    $("#ShippingType").focus();
                    $("#BillingType").focus();
                }
            }
        });
        $("#DIVpicuplocation").on('keydown', '#txtPickLocationSearch', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                debugger;
                e.preventDefault();
                if (e.shiftKey) {

                    $("#ShippingType").focus();
                }
                else {
                    //let value = $("#txtPickLocationSearch").val();
                    //if (value.trim() != "") {
                    //    //getPickLocation(value);
                    //    $("#txtDropLocationSearch").focus();
                    //}
                    //else {
                    $("#txtDropLocationSearch").focus();
                    //}
                }
            }
        });
        $("#DIVdroplocation").on('keydown', '#txtDropLocationSearch', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtPickLocationSearch").focus();
                }
                else {
                    //$("#txtSearchContainerType").focus();
                    $("#ForVehicleInfo").focus();
                    $("#txtSearchVehicleInfo").focus();



                }

            }
        });
        $("#DIVwarehouse").on('keydown', '#WareHouse', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#BiltyDate").focus();
                }
                else {
                    $("#txtSearch").focus();
                    $("#ForCustomerInfo").focus();

                }


            }
        });
        $(document).on('keydown', '#BiltyDate', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#BiltyNoManual").focus();
                }
                else {
                    $("#txtSearch").focus();


                }


            }
        });
        $("#DIVProductSearch").on('keydown', '#txtProductSearch', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtSearchVehicleInfo").focus();
                }
                else {
                    let value = $("#txtProductSearch").val();
                    if (value.trim() != "") {
                        getProduct(value);
                    }
                    else {
                        ResetProduct();
                        $("#ForDispatchInfo").focus();
                        $("#txtSearchDipatchCode").focus();
                    }

                }
            }
        });
        $("#DIVbillingType").on('keydown', '#BillingType', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {

                    $("#txtBillToSearch").focus();
                    $("#txtAgentSearch").focus();
                }
                else {
                    $("#ShippingType").focus();
                }

            }
        });
        $(document).on('keydown', '#ShippingType', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtBillToSearch").focus();
                    $("#txtAgentSearch").focus();
                }
                else {
                    $("#txtPickLocationSearch").focus();
                }

            }
        });
        $(document).on('keydown', '#txtSearchWithAllTags', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();

                if ($("#hfFocusFrom").val() == "reciver") {
                    $("#txtConsigmentReciverSearch").focus();

                }
                else if ($("#hfFocusFrom").val() == "billto") {
                    $("#txtBillToSearch").focus();

                }
                else if ($("#hfFocusFrom").val() == "agent") {
                    $("#txtAgentSearch").focus();

                }
                else {
                    $("#txtSearch").focus();
                }
                $("#tblSearchWithAllTags").addClass("hidden");
                $(this).val('');
            }
        });
        $(document).on('keydown', '#txtSearchLocationWithAll', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();
                //if (e.shiftKey) {
                //    $("#LoadingDate").focus();
                //}
                //else {
                //    if ($("#hfFocusFrom").val() == "drop") {
                //        $("#txtDropLocationSearch").focus();

                //    }
                //    else {
                //        $("#txtPickLocationSearch").focus();
                //    }
                //    $("#tblPickLocation").addClass("hidden");
                //}
                if ($("#hfFocusFrom").val() == "drop") {
                    $("#txtDropLocationSearch").focus();

                }
                else {
                    $("#txtPickLocationSearch").focus();
                }
                $("#tblPickLocation").addClass("hidden");
                $(this).val('');
            }


        });
        $(document).on('keydown', '#ddlDocument', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {


                if (e.shiftKey) {
                    e.preventDefault();
                    $("#txtProductSearch").focus();
                }
                ;
            }



        });
        $(document).on('keydown', '#txtSearchProductWithAll', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();

                $("#txtProductSearch").focus();

                $(this).val('');
                $("#tblPickLocation").addClass("hidden");
            }



        });
        $(document).on('keydown', '#SearchVehicleWithAll', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9) {
                e.preventDefault();


                $("#txtSearchVehicleInfo").focus();


                $("#tblSearchVehicleWithAll").addClass("hidden");
                $(this).val('');

            }


        });
        $(document).on('keydown', '#txtSearchContainerWithAll', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();

                $("#tblSearchContainerWithAll").addClass("hidden");
                $(this).val('');
            }


        });
        $(document).on('keydown', '#txtDocumentNo', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#ddlDocument").focus();
                }
                else {
                    $("#btnDispatchDocument").focus();
                }

            }


        });
        $(document).on('keydown', '#ForDispatchInfo', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {

                if (e.shiftKey) {

                    if ($("#txtProductPackageType").val() != "" || $("#txtProductItem").val() != "") {

                    }
                    else {
                        e.preventDefault();
                        $("#txtProductSearch").focus();
                    }
                }


            }


        });
        $(document).on('keydown', '#btnDispatchDocument', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtDocumentNo").focus();
                }
                else {
                    $("#ForRecievingInfo").focus();
                    $("#ddlRecieveBy").focus();

                }


            }


        });
        $(document).on('keydown', '#btnReciveDocument', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();

                if (e.shiftKey) {
                    $("#txtRecDocumentNo").focus();
                }
                else {
                    $("#ForDamageInfo").focus();
                    $("#ddlProduct").focus();
                }


            }


        });
        $(document).on('keydown', '#txtRecDocumentNo', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#ddlDocumentRecive").focus();
                }
                else {

                    $("#btnReciveDocument").focus();
                }

            }


        });
        $(document).on('keydown', '#txtSearchVehicleInfo', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {

                    $("#txtDropLocationSearch").focus();
                    $("#txtSearchContainerType").focus();
                }
                else {
                    if ($(this).val().trim() == "") {

                        $("#VehicleType").val('');

                        if ($("#detailsVehicle tbody tr").length > 0) {
                            $("#btnUpdateVehicleInfo").focus();
                        }
                        else {
                            $("#ForCosigmentInfo").focus();
                            $("#txtSearchContainerType").focus();

                        }
                    }
                    else {
                        $("#Regno").focus();
                    }

                }

            }


        });
        $(document).on('keydown', '#btnArrowDown', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {

                    $("#btnArrowUp").focus();

                }
                else {

                    if ($("#VehicleQuantity").text() == "1") {
                        $("#isExternal").focus();
                    }
                    else {
                        $("#btnAddVehicle").focus();
                    }
                }

            }


        });
        $(document).on('keydown', '#VehicleQuantity', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtSearchVehicleInfo").focus();

                }
                else {

                    $("#isExternal").focus();


                }

            }


        });
        $(document).on('keydown', '#txtItemQty', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $("#txtProductSearch").focus();

                }
            }


        });
        $(document).on('keydown', '#ForProductInfo', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {

                if (e.shiftKey) {
                    e.preventDefault();
                    if ($("#VehicleType").val() == "") {
                        $("#txtSearchVehicleInfo").focus();
                    }
                    else {
                        $("#btnAssignVehicle").focus();
                    }


                }


            }


        });
        $(document).on('keydown', '#btnVehicleInfo', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    if ($("#VehicleType").val() == "") {
                        $("#txtSearchVehicleInfo").focus();
                    }



                }
                else {

                    $("#txtProductSearch").focus();
                    $("#ForProductInfo").focus();

                }

            }


        });
        $(document).on('keydown', "#LoadingDate", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#ShippingType").focus();

                }
                else {

                    $("#txtPickLocationSearch").focus();
                    $("#ForLocationInfo").focus();


                }

            }


        });
        $(document).on('keydown', "#txtSearchContainerType", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtSearchVehicleInfo").focus();

                }
                else {
                    if ($(this).val().trim() == "") {
                        debugger;
                        $("#ContainerType").val('');

                        if ($("#detailsTable tbody tr").length > 0) {

                            $("#ContainerTypeInfo").focus();
                        }
                        else {
                            $("#ForProductInfo").focus();
                            $("#txtProductSearch").focus();
                        }
                    }
                    else {
                        $("#Quantity").focus();
                    }




                }

            }


        });
        $(document).on('keydown', "#ForCosigmentInfo", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {

                if (e.shiftKey) {
                    e.preventDefault();
                    $("#txtSearchVehicleInfo").focus();


                }


            }


        });
        $(document).on('keydown', "#ForVehicleInfo", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {

                if (e.shiftKey) {
                    e.preventDefault();
                    $("#txtDropLocationSearch").focus();
                }


            }


        });
        $(document).on('keydown', "#UpdateContainerTypeInfo", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    $("#txtSearchContainerType").focus();
                }
                else {
                    $("#txtSearchVehicleInfo").focus();
                }
            }


        });
        $(document).on('keydown', "#ContainerTypeInfo", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    $("#txtSearchContainerType").focus();
                }
                else {
                    $("#txtSearchVehicleInfo").focus();
                }
            }


        });
        $(document).on('keydown', "#ContainerTypeInfo", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    if ($("#ContainerType").val() == "") {
                        $("#txtSearchContainerType").focus();
                    }
                    else {
                        $("#btnAddContainerType").focus();
                    }

                }
                else {
                    $("#viewContainerInfo").focus();

                }

            }


        });
        $(document).on('keydown', "#Quantity", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtSearchContainerType").focus();

                }
                else {

                    $("#TotalWeight").focus();



                }

            }


        });
        $(document).on('keydown', "#txtSearchContainerWithAll", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();


                $("#txtSearchContainerType").focus();



            }


        });
        $(document).on('keydown', "#btnSaveBilty", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $(".btnSavePartial").focus();
                }
                else {
                    $("#BiltyNoManual").focus();
                }

            }


        });
        $(document).on('keydown', "#Regno", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $("#txtSearchVehicleInfo").focus();
                }
            }
        });
        $(document).on('keydown', "#btnAddReceiving", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                }
                else {
                    e.preventDefault();
                    $("#txtSearchrDocumentCode").focus();

                }
            }
        });
        $(document).on('keydown', "#ddlRecieveBy", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $("#ddlDocument").focus();
                }

            }
        });
        $(document).on('keydown', "#ddlDocumentRecive", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $("#ddlRecieveBy").focus();
                }

            }
        });
        $(document).on('keydown', "#ddlProduct", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $("#ddlDocumentRecive").focus();
                }

            }
        });
        $(document).on('keydown', "#ddlExpense", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $("#ddlProduct").focus();
                }

            }
        });

        $(document).on('keydown', "#btnUpdateVehicleInfo", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {
                    $("#txtSearchVehicleInfo").focus();
                }
                else {
                    $("#ForCosigmentInfo").focus();
                }

            }
        });
        //------FOCUS OUT FUNCTIONS
        $("#txtSearch").blur(function (e) {
            let value = $(this).val();
            if (value.trim() != "") {
                getSenderCompany(value);
            }
            else {
                ResetSenderFields();
            }

        });
        $("#txtSearchContainerType").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getContainerType(value);
                //$(this).val('');
            }
        });
        $("#txtCodeRevenue").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getExpenseAccount(value);
                //$(this).val('');
            }
        });
        $("#txtSearchVehicleInfo").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getVehicleType(value);
                $(this).val();
            }
        });
        $("#txtConsigmentReciverSearch").blur(function (e) {

            let value = $(this).val();
            if (value.trim() != "") {
                getReciverCompany(value);
            }
            else {
                ResetReciverFields();
            }


        });
        $("#txtBillToSearch").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getBilltoCompany(value);
            }
            else {
                ResetBilltoFields();
            }
        });
        $("#txtAgentSearch").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getAgentCompany(value);
            }
        });
        $("#txtPickLocationSearch").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getPickLocation(value);
            }
            else {
                ResetPickup();
            }
        });
        $("#txtDropLocationSearch").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getDropLocation(value);
            }
            else {
                ResetDrop();
            }
        });
        $("#txtProductSearch").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getProduct(value);
            }
            else {
                ResetProduct();
            }
        });
        $("#txtSearchDipatchCode").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getDispatchDocument(value);

            }
            else {
                $("#ForRecievingInfo").focus();
                $("#ddlRecieveBy").focus();
            }
        });
        $("#txtSearchrDocumentCode").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getrDocument(value);

            }
        });
        $("#txtCodeRevenue").blur(function () {
            let value = $(this).val();
            if (value.trim() != "") {
                getExpenseAccount(value);

            }
        });
        //PAGE LOAD PORTION
        $("#BiltyNoManual").focus();
        //DATE PORTION
        function isDateValid(date) {
            debugger;
            let Months = { "01": true, "02": false, "03": true, "04": false, "05": true, "06": false, "07": true, "08": true, "09": false, 10: true, 11: false, 12: true };

            return Months[date];
        }
        let now = new Date();
        let dateLocalFormat = now.toLocaleDateString().split("/");
        let mm = dateLocalFormat[0];
        let dd = dateLocalFormat[1];
        if (!(dd.length > 1)) {
            dd = "0" + dd;
        }
        let yyyy = dateLocalFormat[2];
        yyyy = yyyy.substring(2, 4);
        //   $("#hfDateFormatting").val(dd + mm + yyyy);
        $(".MakeDate").val(now.toDateString());
        //$(document).on("blur", ".MakeDate", function (e) {
        //    e.preventDefault();
        //    var _Date = $(this).val();
        //    if (_Date.trim() != "") {
        //        let mm = _Date.substring(0, 2);
        //        let dd = _Date.substring(2, 4);
        //        let yy = _Date.substring(4, 6);
        //        $("#hfDateFormatting").val(mm + dd + yy);
        //        let _Final = dd + "-" + mm + "-" + yy;
        //        var final = new Date(_Final);
        //        $(this).val(final.toDateString());
        //    }
        //});
        //$(document).on("focus", ".MakeDate", function (e) {
        //    e.preventDefault();
        //    $(this).val($("#hfDateFormatting").val());
        //    $(this).select();
        //});

        $(document).on("blur", ".MakeDate", function (e) {
            debugger;
            if ($(this).val().length == 3) {
                $(this).focus();

            }
            else if ($(this).val().length == 5) {
                $(this).focus();
                $(this).val('');
            }
            else if ($(this).val().length > 6) {
                $(this).focus();
                $(this).val('');
            }
            else if ($(this).val().length == 1) {
                $(this).val("0" + $(this).val());
                var Today = new Date();
                let getMonth = parseInt(Today.getMonth()) + 1
                let getYear = Today.getFullYear();
                getYear = getYear.toString().substring(2, 4);

                let date = new Date(getMonth + "-" + $(this).val() + "-" + getYear);
                $(this).val(date.toDateString());



            }
            else if ($(this).val().length == 2) {
                var Today = new Date();
                let getMonth = parseInt(Today.getMonth()) + 1
                let getYear = Today.getFullYear();
                //getYear = getYear.toString().substring(2, 4);
                if ($(this).val() == "31") {
                    if (isDateValid(getMonth)) {
                        let date = new Date(getMonth + "-" + $(this).val() + "-" + getYear);
                        $(this).val(date.toDateString());
                    }
                    else {
                        $(this).focus();
                        $(this).val('');
                    }
                }
                else {
                    let date = new Date(getMonth + "-" + $(this).val() + "-" + getYear);
                    $(this).val(date.toDateString());
                }


            }
            else if ($(this).val().length == 4) {
                let _date = $(this).val();
                if (_date.trim() != "") {
                    let mm = _date.substring(0, 2);
                    let dd = _date.substring(2, 4);
                    let Today = new Date();
                    let getYear = Today.getFullYear();
                    getYear = getYear.toString().substring(2, 4);
                    if (mm == "31") {
                        if (isDateValid(dd)) {
                            let date = new Date(dd + "-" + mm + "-" + getYear);
                            $(this).val(date.toDateString());
                        }
                        else {
                            $(this).focus();
                            $(this).val('');
                        }
                    } else {
                        let date = new Date(dd + "-" + mm + "-" + getYear);
                        $(this).val(date.toDateString());
                    }


                }
            }
            else if ($(this).val().length == 6) {
                var _Date = $(this).val();
                if (_Date.trim() != "") {
                    let mm = _Date.substring(0, 2);
                    let dd = _Date.substring(2, 4);
                    let yy = _Date.substring(4, 6);
                    if (mm == "31") {
                        if (isDateValid(dd)) {
                            let _Final = dd + "-" + mm + "-" + yy;
                            var final = new Date(_Final);
                            $(this).val(final.toDateString());
                        }
                        else {
                            $(this).focus();
                            $(this).val('');
                        }
                    } else {
                        let _Final = dd + "-" + mm + "-" + yy;
                        var final = new Date(_Final);
                        $(this).val(final.toDateString());
                    }





                }
            }
            if ($(this).val() == "Invalid Date") {
                $(this).focus();
                $(this).val('');
            }
        });
        $(".MakeDate").focus(function () {
            // $(this).val($("#hfDateFormatting").val());
            debugger;
            var date = new Date($(this).val());
            let _date = date.toLocaleDateString();
            let arr = _date.split("/");
            debugger;
            if (arr[2].length == 3) {

            }
            else {
                if (arr[1].length == 1) {
                    arr[1] = "0" + arr[1];
                }
                if (arr[0].length == 1) {
                    arr[0] = "0" + arr[0];
                }
                $(this).val(arr[1] + arr[0] + arr[2].substring(2, 4));
            }


            $(this).select();
        });
        $("#BiltyDate").keyup(function () {
            FocusNext($(this).val(), "#WareHouse");
        });
        function FocusNext(value, idORclass) {
            if (value.length > 6) {
                $(idORclass).focus();
            }
        }



        $(document).on("keydown", function (event) {
            if (event.altKey && event.which == 82) {
                $.ajax({
                    url: ControllerUrl + 'RefreshData',
                    type: 'GET',
                    dataType: 'json',
                    success: function (data) {
                        debugger;
                        var Loctable1 = $("#tblPickLocation tbody");
                        var Loctable2 = $("#tblDropLocation tbody");
                        Loctable1.html('');
                        Loctable2.html('');
                        for (var i = 0; i < data.Locations.length; i++) {
                            let row1 = "<tr class='PickLocationSearch'> <td>" + data.Locations[i].Code + "</td> <td>" + data.Locations[i].Name + "</td>  <td>" + data.Locations[i].Province + "</td> <td>" + data.Locations[i].City + "</td> <td>" + data.Locations[i].Area + "</td> <td>" + data.Locations[i].Address + "</td></tr>";
                            let row2 = "<tr class='DropLocationSearch'> <td>" + data.Locations[i].Code + "</td> <td>" + data.Locations[i].Name + "</td>  <td>" + data.Locations[i].Province + "</td> <td>" + data.Locations[i].City + "</td> <td>" + data.Locations[i].Area + "</td> <td>" + data.Locations[i].Address + "</td></tr>";
                            Loctable1.append(row1);
                            Loctable2.append(row2);
                        }
                        var ProTable = $("#tblProduct tbody");
                        ProTable.html('');
                        for (var i = 0; i < data.Products.length; i++) {
                            let row = "<tr class='ProductSearch'> <td>" + data.Products[i].Code + "</td> <td>" + data.Products[i].Name + "</td> <td>" + data.Products[i].PackageType + "</td> <td>" + data.Products[i].PackageQty + "</td></tr>";
                            ProTable.append(row);
                        }
                        var HirTable1 = $("#tblCosigmentInfo tbody");
                        var HirTable2 = $("#tblCosigmentReciverInfo tbody");
                        var HirTable3 = $("#tblBillToCustomer tbody");
                        var HirTable4 = $("#tblAgent tbody");
                        HirTable1.html('');
                        HirTable2.html('');
                        HirTable3.html('');
                        HirTable4.html('');
                        for (var i = 0; i < data.Hirarchy.length; i++) {
                            let row1 = "<tr class='Search'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
                            let row2 = "<tr class='ReciverSearch'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
                            let row3 = "<tr class='BillToSearch'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
                            let row4 = "<tr class='AgentSearch'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
                            HirTable1.append(row1);
                            HirTable2.append(row2);
                            HirTable3.append(row3);
                            HirTable4.append(row4);
                        }

                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });
            }
        });
        //$(".maask").keydown(function () {
        //    let value = $(this).val();
        //    if (value.length == 4) {
        //        $(this).val($(this).val() + "-");
        //    }
        //    else if (value.length == 11) {
        //        $(this).val($(this).val() + "-");
        //    }
        //});
        //  $("#modalTable tbody tr td:eq(2)").find("input").keydown(function () {
        //    alert();
        //});
        $("#Loading").hide();
        //$(document).bind("contextmenu", function (e) {
        //    e.preventDefault();
        //});
        //$(document).keydown(function (e) {
        //    if (e.which === 123) {
        //        return false;
        //    }
        //});
        //for (var i = 0; i < $("#tblCosigmentReciverInfo tbody tr").length; i++) {
        //    let x = i + 1;
        //    $("#tblCosigmentReciverInfo tbody tr:eq(" + i + ")").attr("tabindex", x);
        //}
        $.ajax({
            url: ControllerUrl + "GetContainerType",
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                for (var i = 0; i < data.Text.length; i++) {
                    $('#ContainerType').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                }
                $.ajax({
                    url: ControllerUrl + "GetVehicleType",
                    type: 'GET',
                    dataType: 'json',
                    success: function (data) {
                        for (var i = 0; i < data.Text.length; i++) {
                            $('#VehicleType').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                        }
                    }
                });
            }
        });
        $("#btnRefreshContainerType").click(function () {
            $.ajax({
                url: "../Home/GetContainerType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('#ContainerType').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ContainerType').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }

                }
            });
        });
        $("#btnRefreshVehicleType").click(function () {
            $.ajax({
                url: ControllerUrl + "GetVehicleType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('#VehicleType').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#VehicleType').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }
                }
            });
        });
        $("#btnRefreshDcoument").click(function () {
            $.ajax({
                url: "/ValsERP/Home/GetDocumentType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    debugger;
                    $('#ddlDocument').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ddlDocument').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }
                }
            });
        });
        $("#btnRefreshRecDcoument").click(function () {
            $.ajax({
                url: ControllerUrl + "GetDocumentType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    debugger;
                    $('#ddlDocumentRecive').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ddlDocumentRecive').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }
                }
            });
        });
        $("#btnRefreshExpense").click(function () {
            $.ajax({
                url: ControllerUrl + "GetExpenseType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    debugger;
                    $('#ddlExpense').html('');
                    $('#ddlExpenseActual').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ddlExpense').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                        $('#ddlExpenseActual').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }
                }
            });
        });
        $("#btnRefreshDamage").click(function () {
            $.ajax({
                url: "/ValsERP/Home/GetProduct",
                type: 'GET',
                dataType: 'json',
                success: function (data) {

                    $('#ddlProduct').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ddlProduct').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));

                    }
                }
            });
            $.ajax({
                url: "/ValsERP/Home/GetDocumentType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    debugger;
                    $('#ddlDamageDocumentType').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ddlDamageDocumentType').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }
                }
            });
            $.ajax({
                url: "/ValsERP/Home/GetDamageType",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    debugger;
                    $('#ddlDamage').html('');
                    for (var i = 0; i < data.Text.length; i++) {
                        $('#ddlDamage').append($('<option>').text(data.Text[i]).attr('value', data.Value[i]));
                    }
                }
            });

        });
        $("#txtSearchWithAllTags").keyup(function () {
            var SearchText = $("#txtSearchWithAllTags").val().toLowerCase();
            if (SearchText == "") {
                $("#tblSearchWithAllTags").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchCompanies',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), type: 'multi' },
                    success: function (data) {
                        var HirTable = $("#tblSearchWithAllTags tbody");
                        HirTable.html('');
                        for (var i = 0; i < data.Hirarchy.length; i++) {
                            let row = "<tr class='SearchWithAll'> <td id='start" + i + "'><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
                            HirTable.append(row);
                            $("#tblSearchWithAllTags").removeClass("hidden");

                        }
                        //var start = document.getElementById('start0');
                        //start.focus();
                        //start.style.backgroundColor = 'lightblue';
                        //start.style.color = 'black';
                        //$("#start0").addClass("current-row");
                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });

            }
        });
        $("#txtSearchContainerWithAll").keyup(function () {
            var SearchText = $("#txtSearchContainerWithAll").val().toLowerCase();
            if (SearchText == "") {
                $("#tblSearchContainerWithAll").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchContainerType',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), type: 'multi' },
                    success: function (data) {
                        debugger;
                        var HirTable = $("#tblSearchContainerWithAll tbody");
                        HirTable.html('');
                        for (var i = 0; i < data.containerType.length; i++) {
                            let row = "<tr class='SearchContainerWithAll'> <td><input type='hidden' value='" + data.containerType[i].ContainerTypeID + "'> </td> <td>" + data.containerType[i].Code + "</td>  <td>" + data.containerType[i].ContainerType1 + "</td></tr>";
                            HirTable.append(row);
                            $("#tblSearchContainerWithAll").removeClass("hidden");

                        }
                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });

            }
        });
        $("#txtSearchDipatchDocumentWithAll").keyup(function () {
            var SearchText = $("#txtSearchDipatchDocumentWithAll").val().toLowerCase();
            if (SearchText == "") {
                $("#tblDispatchSearch").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchDispatchDocument',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), isMulti: true },
                    success: function (data) {
                        debugger;
                        var HirTable = $("#tblDispatchSearch tbody");
                        HirTable.html('');
                        for (var i = 0; i < data.Dispatch.length; i++) {
                            let row = "<tr class='SearchDispatchWithAll'> <td>" + data.Dispatch[i].Code + "</td>  <td>" + data.Dispatch[i].Name + "</td></tr>";
                            HirTable.append(row);
                            $("#tblDispatchSearch").removeClass("hidden");

                        }
                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });

            }
        });
        $("#txtSearchrDocumentWithhAll").keyup(function () {
            var SearchText = $("#txtSearchrDocumentWithhAll").val().toLowerCase();
            if (SearchText == "") {
                $("#tblrDocumentSearch").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchDispatchDocument',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), isMulti: true },
                    success: function (data) {
                        debugger;
                        var HirTable = $("#tblrDocumentSearch tbody");
                        HirTable.html('');
                        for (var i = 0; i < data.Dispatch.length; i++) {
                            let row = "<tr class='SearchrDocumentWithAll'> <td>" + data.Dispatch[i].Code + "</td>  <td>" + data.Dispatch[i].Name + "</td></tr>";
                            HirTable.append(row);
                            $("#tblrDocumentSearch").removeClass("hidden");

                        }
                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });

            }
        });
        $("#SearchVehicleWithAll").keyup(function () {
            debugger;
            var SearchText = $("#SearchVehicleWithAll").val().toLowerCase();
            if (SearchText == "") {
                $("#tblSearchVehicleWithAll").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchVehicleType',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), type: 'multi' },
                    success: function (data) {
                        debugger;
                        var HirTable = $("#tblSearchVehicleWithAll tbody");
                        HirTable.html('');
                        for (var i = 0; i < data.vehicleType.length; i++) {
                            let row = "<tr class='trSearchVehicleWithAll'> <td><input type='hidden' value='" + data.vehicleType[i].VehicleTypeID + "'> </td> <td>" + data.vehicleType[i].VehicleTypeCode + "</td>  <td>" + data.vehicleType[i].VehicleTypeName + "</td></tr>";
                            HirTable.append(row);
                            $("#tblSearchVehicleWithAll").removeClass("hidden");

                        }
                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });

            }
        });
        $("#txtSearchProductWithAll").keyup(function () {
            debugger;
            var SearchText = $("#txtSearchProductWithAll").val().toLowerCase();
            if (SearchText == "") {
                $("#tblProduct").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchProduct',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), type: "multi" },
                    success: function (data) {
                        var ProTable = $("#tblProduct tbody");
                        ProTable.html('');
                        for (var i = 0; i < data.Products.length; i++) {
                            let row = "<tr class='ProductSearch'> <td>" + data.Products[i].Code + "</td> <td>" + data.Products[i].Name + "</td> <td>" + data.Products[i].ModelCode + "</td> <td>" + data.Products[i].Model + " </td> <td>" + data.Products[i].PackageType + "</td> <td>" + data.Products[i].PackageQty + "</td> <td> <input type='hidden' value='" + data.Products[i].ProductID + "' > </td> </tr>";
                            ProTable.append(row);
                            $("#tblProduct").removeClass("hidden");
                        }



                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });
            }
        });
        $("#txtSearchLocationWithAll").keyup(function () {
            var SearchText = $("#txtSearchLocationWithAll").val().toLowerCase();
            if (SearchText == "") {
                $("#tblPickLocation").addClass("hidden");
            }
            else {
                $.ajax({
                    url: ControllerUrl + 'SearchLocations',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val(), type: 'multi', HirarchyId: $("#hfBilltoCompHierarchyID").val() },
                    success: function (data) {
                        var Loctable = $("#tblPickLocation tbody");
                        Loctable.html('');
                        for (var i = 0; i < data.Locations.length; i++) {
                            let row = "<tr class='PickLocationSearch'> <td>" + data.Locations[i].Code + "</td> <td>" + data.Locations[i].Name + "</td>  <td>" + data.Locations[i].City + "</td> <td>" + data.Locations[i].Area + "</td> <td>" + data.Locations[i].Address + "</td> <td>" + data.Locations[i].PickDropID + "</td> <td>" + data.Locations[i].AreaID + "</td> <td>" + data.Locations[i].CityID + "</td></tr>";
                            Loctable.append(row);
                            $("#tblPickLocation").removeClass("hidden");
                        }
                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });

            }
        });
        $("#txtSearchWithAllTags").blur(function () {

            // $("#tblSearchWithAllTags").addClass("hidden");


        });
        $("#txtSearchContainerWithAll").blur(function () {

            // $("#tblSearchContainerWithAll").addClass("hidden");

        });
        $("#SearchVehicleWithAll").blur(function () {

            // $("#tblSearchVehicleWithAll").addClass("hidden");

        });
        $("#txtSearchProductWithAll").blur(function () {

            // $("#tblProduct").addClass("hidden");

        });
        $("#txtSearchLocationWithAll").blur(function () {


            //$("#tblPickLocation").addClass("hidden");

        });

        //$("#btnVehicleInfo").click(function () {
        //    debugger;
        //    $('#modal-add-VehicleInfo').modal('show');
        //    var RowsCount = $("#detailsVehicle tbody tr").length;
        //    for (var i = 0; i < RowsCount; i++) {
        //        var VehicleType = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(0)").text();
        //        var Quantity = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(1)").text();

        //    }
        //    $("#VehiclemodalTable tbody").html('');
        //    $.ajax({
        //        url: ControllerUrl + "test",
        //        type: 'GET',
        //        dataType: 'json',
        //        success: function (data) {

        //            // var RowsInputs = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" style="width: 180px;" /></td>   <td><input type="text" id="txtRegNo" style="width: 108px;" /></td>  <td><input type="text" id="txtVehicleContactNo" style="width: 108px;" /></td>  <td> <select class="mySelect"> </select> </td>  <td><input type="text" id="txtDrivername" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text" id="txtDriverNIC" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverLicense" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>   </tr>';
        //            var RowsInputs = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" style="width: 180px;" readonly /></td>   <td><input type="text" class="txtRegNo" style="width: 108px;" /></td>     <td><input type="text" class="txtContactNo" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text"  style="width: 108px;" /> </td>  <td> <input type="text" class="txtNICno" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>  <td> <input type="text" id="txtSearchBroker" class="searchBroker"/> </td>   </tr>';
        //            var x = 0;
        //            var Sno = 0;
        //            for (var i = 0; i < RowsCount; i++) {
        //                Sno++
        //                var EachRowQuantity = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(1)").text();

        //                for (var j = 0; j < EachRowQuantity; j++) {
        //                    var _x = parseInt(j) + parseInt(x);
        //                    var VehicleTypeValue = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(0)").text();
        //                    $("#VehiclemodalTable tbody").append(RowsInputs);

        //                    $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(1) input").val(VehicleTypeValue);
        //                    $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(0)").text(_x + 1);

        //                }

        //                x += parseInt(EachRowQuantity);


        //            }

        //            debugger;
        //            var z = 0;
        //            $.each(data.textList, function (index, value) {
        //                $('.mySelect').append($('<option>').text(value).attr('value', data.valuesList[z]));
        //                z++;
        //            });

        //            $(".txtContactNo").mask("9999-9999999");
        //            $(".txtNICno").mask("99999-9999999-9");
        //        }
        //    });
        //    $(this).addClass("hidden");
        //    $("#btnUpdateVehicleInfo").removeClass("hidden");
        //    focused('VehiclemodalTable', 2);

        //});
        $("#btnDispatchDocument").click(function (e) {
            e.preventDefault();
            //var formdata = new FormData(); //FormData object
            //var fileInput = $("#DisptachInput")[0];
            //formdata.append(fileInput.files[0].name, fileInput.files[0]);

            //var xhr = new XMLHttpRequest();
            //xhr.open('POST', ControllerUrl + 'Upload');
            //xhr.send(formdata);
            //xhr.onreadystatechange = function () {
            //    if (xhr.readyState == 4 && xhr.status == 200) {
            //        alert(xhr.responseText);
            //    }
            //}
            if ($.trim($("#txtDocumentNo").val()) == "") {
                Notification("Please enter document no", "success");
                $("#txtDocumentNo").focus();
            }
            else {

                //var Documents = $("#ddlDocument option:selected").text(),
                var Documents = $("#ddlDocument").val(),
                    DocumentNo = $("#txtDocumentNo").val(),
                    Filename = $("#txtFileName").val(),
                    detailsTableBody = $("#detailsDispatchDocument tbody");
                var DocumentItem = '<tr class="rows"><td>' + Documents + '</td><td>' + DocumentNo + '</td> <td> ' + Filename + ' </td> <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                detailsTableBody.append(DocumentItem);
                clearItem();
                $("#txtSearchDipatchCode").focus();
                $("#ddlDocument").val('');
                $formData = new FormData(); //FormData object
                var fileInput = $("#DisptachInput")[0];
                $formData.append(fileInput.files[0].name, fileInput.files[0]);
                $.ajax({
                    url: ControllerUrl + "Upload",
                    type: 'POST',
                    data: $formData,
                    dataType: 'json',
                    contentType: false,
                    processData: false,
                    success: function ($data) {
                        alert($data);
                    }

                });




            }

        });
        $("#btnAddProduct").click(function (e) {
            e.preventDefault();


            var pkgtype = $("#txtProductPackageType").val(),
                item = $("#txtProductItem").val(),
                qty = $("#txtProductQty").val(),
                Itemqty = $("#txtItemQty").val(),
                totalweight = $("#txtTotalWeight").val(),
                Id = $("#hfProductID").val(),
                detailsTableBody = $("#detailsProduct tbody");
            if (item == "" || pkgtype == "") {
                Notification("Select Item and Package Type");
            }
            else {
                var ProductItem = '<tr class="rows"><td>' + pkgtype + '</td><td>' + item + '</td> <td> ' + qty + ' </td> <td> ' + Itemqty + ' </td> <td> ' + totalweight + ' </td> <td><a data-itemId="0" href="#" class="deleteItem">Remove</a><input type="hidden" value="' + Id + '"></td></tr>';
                detailsTableBody.append(ProductItem);
                $("#ddlProduct").append("<option value='" + item + "'>" + item + " </option>");
                $("#ddlProduct").attr("disabled", false);
                var length = detailsTableBody.find("tr").length;
                var TotalPkgQty = 0;
                var TotalItemQty = 0;
                var TotalWeight = 0;
                for (var i = 0; i < length; i++) {
                    TotalPkgQty += parseInt(detailsTableBody.find("tr:eq(" + i + ")").find("td:eq(2)").text());
                    TotalItemQty += parseInt(detailsTableBody.find("tr:eq(" + i + ")").find("td:eq(3)").text());
                    TotalWeight += parseInt(detailsTableBody.find("tr:eq(" + i + ")").find("td:eq(4)").text());
                }
                $("#lblTotalPkgQty").html("Total: " + TotalPkgQty);
                $("#lblTotalitemQty").html("Total: " + TotalItemQty);
                $("#lblTotalWeight").html("Total: " + TotalWeight);
                clearItem();
                $("#txtProductSearch").focus();
            }

        });
        $("#btnReciveDocument").click(function (e) {
            e.preventDefault();
            if ($.trim($("#txtRecDocumentNo").val()) == "") {
                Notification("Please enter document no", "success");
            }
            else {
                //var Documents = $("#ddlDocumentRecive option:selected").text(),
                var Documents = $("#ddlDocumentRecive").val(),
                    DocumentNo = $("#txtRecDocumentNo").val(),
                    Filename = $("#txtRecFileName").val(),
                    detailsTableBody = $("#detailsReciveDocument tbody");
                var DocumentItem = '<tr class="rows"><td>' + Documents + '</td><td>' + DocumentNo + '</td> <td> ' + Filename + ' </td> <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                detailsTableBody.append(DocumentItem);
                clearItem();
                $("#ddlDocumentRecive").focus();
                $formData = new FormData(); //FormData object
                var fileInput = $("#fileInput")[0];
                $formData.append(fileInput.files[0].name, fileInput.files[0]);
                $.ajax({
                    url: ControllerUrl + "Upload",
                    type: 'POST',
                    data: $formData,
                    dataType: 'json',
                    contentType: false,
                    processData: false,
                    success: function ($data) {
                        alert($data);
                    }

                });

            }


        });
        $("#btnReimursable").click(function (e) {
            e.preventDefault();
            debugger;
            if ($.trim($("#ddlExpense").val()) == "" || $.trim($("#txtReimursableAmount").val())) return;

            var Expens = $("#ddlExpense option:selected").text(),
                Amount = $("#txtReimursableAmount").val(),

                detailsTableBody = $("#detailsReimursable tbody");
            //for (var i = 0; i < $("#detailsDispatchDocument tbody tr").length; i++) {
            //    if ($("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(0)").text() == Vehicle) {
            //        Quantity = parseInt($("#detailsVehicle tbody tr:eq(" + i + ") td:eq(1)").text()) + parseInt(Quantity);
            //        $("#detailsVehicle tbody tr:eq(" + i + ") td:eq(1)").text(Quantity);
            //        clearItem();
            //        return;
            //    }
            //}

            var ExpenseItem = '<tr class="rows"><td>' + Expens + '</td><td>' + Amount + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
            detailsTableBody.append(ExpenseItem);
            clearItem();
            $("#ddlExpense").focus();


        });
        $("#btnActual").click(function (e) {
            e.preventDefault();
            debugger;
            if ($.trim($("#ddlExpenseActual").val()) == "") return;

            var Expens = $("#ddlExpenseActual option:selected").text(),
                Amount = $("#txtActualAmount").val(),

                detailsTableBody = $("#detailsActualExpense tbody");
            var ActualItem = '<tr class="rows"><td>' + Expens + '</td><td>' + Amount + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
            detailsTableBody.append(ActualItem);
            clearItem();
            $("#ddlExpenseActual").focus();


        });
        $("#btnAddReceiving").click(function (e) {
            e.preventDefault();
            debugger;
            if ($.trim($("#ddlRecieveBy option:selected").val()) == "0") {
                Notification("Please Select Document type", "error");
            }
            else if ($.trim($("#txtDate").val()) == "") {
                Notification("Please enter receiving date", "error");
            }
            else if ($.trim($("#txtTime").val()) == "") {
                Notification("Please enter receiving time", "error");
            }
            else {

                var ReceiveBy = $("#ddlRecieveBy option:selected").text(),
                    Time = $("#txtTime").val(),
                    Date = $("#txtDate").val(),
                    detailsTableBody = $("#detailsReciveBy tbody");
                var ReceiveItem = '<tr class="rows"><td>' + ReceiveBy + '</td><td>' + Date + '</td> <td>' + Time + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                detailsTableBody.append(ReceiveItem);
                clearItem();
                $("#ddlRecieveBy").focus();
            }



        });
        $("#btnDamageType").click(function (e) {
            e.preventDefault();
            debugger;
            if ($.trim($("#ddlDamage").val()) == "") return;

            var Damage = $("#ddlDamage option:selected").text(),
                Documents = $("#ddlDamageDocumentType option:selected").text(),
                ItemName = $("#ddlProduct option:selected").text(),
                Cost = $("#txtDamageCost").val(),
                Cause = $("#txtCause").val(),
                detailsTableBody = $("#detailsDamageType tbody");

            var DamageItem = '<tr class="rows"><td>' + ItemName + '</td><td>' + Damage + '</td> <td>' + Documents + '</td> <td>' + Cost + '</td> <td>' + Cause + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
            detailsTableBody.append(DamageItem);
            clearItem();
            $("#ddlProduct").focus();


        });
        function ApplySerial(TableID) {
            debugger;
            let table = $("#" + TableID + " tbody tr");
            for (var i = 0; i < table.length; i++) {
                table.eq(i).find("td:eq(0)").text(i + 1);
            }
        }
        $("#DisptachInput").change(function (e) {
            $("#txtFileName").val(e.target.files[0].name);
        });
        $("#fileInput").change(function (e) {
            $("#txtRecFileName").val(e.target.files[0].name);

        });


        //$(".ProductSearch").click(function () {
        //    var currentRow = $(this).closest("tr");
        //    var Code = currentRow.find("td:eq(0)").text();
        //    var Item = currentRow.find("td:eq(1)").text();
        //    var PackageType = currentRow.find("td:eq(2)").text();
        //    var PackageQty = currentRow.find("td:eq(3)").text();


        //    $("#txtProductPackageType").val(PackageType);
        //    $("#txtProductItem").val(Item);
        //    $("#txtProductQty").val(PackageQty);
        //    //$("#txtDropLocationName").val(Name);

        //    $("#tblProduct").addClass("hidden");

        //});
        //$(".Search").click(function () {
        //    debugger;
        //    var currentRow = $(this).closest("tr");

        //    // var ID = currentRow.find("td:eq(0)").text();
        //    var CompanyName = currentRow.find("td:eq(5)").text();
        //    var GroupName = currentRow.find("td:eq(2)").text();
        //    var DepartName = currentRow.find("td:eq(8)").text();
        //    var PersonName = currentRow.find("td:eq(11)").text();

        //    var GroupID = currentRow.find("td:eq(0)").find("input").val();
        //    var CompanyID = currentRow.find("td:eq(3)").find("input").val();
        //    var DepartID = currentRow.find("td:eq(6)").find("input").val();
        //    var PersonID = currentRow.find("td:eq(9)").find("input").val();

        //    //$("#hfSenderCompanyHirarchyID").val(ID);
        //    $("#ConisgmentSenderComp").val(CompanyName);
        //    $("#ConisgmentSenderGroup").val(GroupName);
        //    $("#ConisgmentSenderPerson").val(PersonName);
        //    $("#ConisgmentSenderDepart").val(DepartName);
        //    $("#ConisgmentSenderDepart").val(DepartName);

        //    $("#hfSenderCompanyID").val(CompanyID);
        //    $("#hfSenderGroupID").val(GroupID);
        //    $("#hfSenderDepartID").val(DepartID);
        //    $("#hfSenderPersonID").val(PersonID);

        //    $("#tblCosigmentInfo").addClass("hidden");

        //});
        $(".ReciverSearch").click(function () {
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").text();
            var CompanyName = currentRow.find("td:eq(5)").text();
            var GroupName = currentRow.find("td:eq(2)").text();
            var DepartName = currentRow.find("td:eq(8)").text();
            var PersonName = currentRow.find("td:eq(11)").text();

            var GroupID = currentRow.find("td:eq(0)").find("input").val();
            var CompanyID = currentRow.find("td:eq(3)").find("input").val();
            var DepartID = currentRow.find("td:eq(6)").find("input").val();
            var PersonID = currentRow.find("td:eq(9)").find("input").val();


            $("#txtConsigmentReciverCompany").val(CompanyName);
            $("#txtConsigmentReciverGroup").val(GroupName);
            $("#txtConsigmentReciverPerson").val(PersonName);
            $("#txtConsigmentReciverDepart").val(DepartName);

            $("#hfReciverCompanyID").val(CompanyID);
            $("#hfReciverGroupID").val(GroupID);
            $("#hfReciverDepartID").val(DepartID);
            $("#hfReciverPersonID").val(PersonID);

            $("#tblCosigmentReciverInfo").addClass("hidden");

        });
        $(".BillToSearch").click(function () {
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").text();
            var CompanyName = currentRow.find("td:eq(5)").text();
            var GroupName = currentRow.find("td:eq(2)").text();
            var DepartName = currentRow.find("td:eq(8)").text();
            var PersonName = currentRow.find("td:eq(11)").text();

            var GroupID = currentRow.find("td:eq(0)").find("input").val();
            var CompanyID = currentRow.find("td:eq(3)").find("input").val();
            var DepartID = currentRow.find("td:eq(6)").find("input").val();
            var PersonID = currentRow.find("td:eq(9)").find("input").val();

            $("#txtBillToComp").val(CompanyName);
            $("#txtBillToGroup").val(GroupName);
            $("#txtBillToPerson").val(PersonName);
            $("#txtBillToDepart").val(DepartName);

            $("#hfBilltoCompanyID").val(CompanyID);
            $("#hfBilltoGroupID").val(GroupID);
            $("#hfBilltoDepartID").val(DepartID);
            $("#hfBilltoPersonID").val(PersonID);
            $("#tblBillToCustomer").addClass("hidden");

        });
        $(".AgentSearch").click(function () {
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").text();
            var CompanyName = currentRow.find("td:eq(5)").text();
            var GroupName = currentRow.find("td:eq(2)").text();
            var DepartName = currentRow.find("td:eq(8)").text();
            var PersonName = currentRow.find("td:eq(11)").text();

            var GroupID = currentRow.find("td:eq(0)").find("input").val();
            var CompanyID = currentRow.find("td:eq(3)").find("input").val();
            var DepartID = currentRow.find("td:eq(6)").find("input").val();
            var PersonID = currentRow.find("td:eq(9)").find("input").val();

            $("#AgentCompany").val(CompanyName);
            $("#AgentGroup").val(GroupName);
            $("#AgentPerson").val(PersonName);
            $("#AgentDepart").val(DepartName);

            $("#hfAgentCompanyID").val(CompanyID);
            $("#hfAgentGroupID").val(GroupID);
            $("#hfAgentDepartID").val(DepartID);
            $("#hfAgentPersonID").val(PersonID);
            $("#tblAgent").addClass("hidden");

        });
        $("#addVehicleTimings").click(function () {

            var VehicleTableRows = $("#VehiclemodalTable tbody tr").length;
            if (VehicleTableRows <= 0) {
                Notification("add vehicle information first", "error");
            }
            else {
                $("#modal-add-VehicleTimings").modal('show');
                var Table = $("#VehicleTimings tbody");
                Table.html('');
                for (var i = 0; i < VehicleTableRows; i++) {
                    var VehicleType = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(1)").find("input").val();
                    var RegNo = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val();
                    var sNo = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(0)").text();
                    var Row = "<tr><td>" + sNo + "</td> <td>" + VehicleType + "</td> <td style='width:90px'>" + RegNo + "</td>  <td><input type='text' class='form-control MakeDate' style='width: 138px;'></td> <td><input type='time' class='form-control'></td> <td><input type='text' class='form-control MakeDate' style='width: 138px;'></td> <td><input type='time' class='form-control' style='width: 138px;'></td> <td><input type='text' class='form-control MakeDate' style='width: 138px;'></td> <td><input type='time' class='form-control' style=width: '138px;'></td> </tr>";
                    Table.append(Row);
                }
            }

        });
        $("#btnAssignVehicle").click(function () {
            debugger;
            var isVehicleExist = $("#VehiclemodalTable tbody tr").length;
            var isContainerExist = $("#modalTable tbody tr").length;
            if (isVehicleExist <= 0) {
                Notification("Please add Vehicle first", "error");
            }
            else {
                if (isContainerExist <= 0) {
                    Notification("Please add container information first", "error");
                }
                else {
                    //  $("#modal-add-AssignVehicle").modal('show');
                    var ContainerRows = $("#modalTable tbody tr").length;
                    var VehicleTableRows = $("#VehiclemodalTable tbody tr").length;
                    var Table = $("#tblAssignVehicle tbody");
                    var VehicleTypeList = [];
                    Table.html('');
                    for (var i = 0; i < VehicleTableRows; i++) {
                        var VehicleSize = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(1)").find("input").val();
                        VehicleSize = VehicleSize.replace(VehicleSize.substr(0, VehicleSize.lastIndexOf(':') + 1), "").replace(")", "").trim();
                        var RegNo = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val();
                        //RegNo += " (Size : " + VehicleSize + ")";
                        VehicleTypeList.push(RegNo);


                    }

                    for (var i = 0; i < ContainerRows; i++) {
                        var ContainerType = $("#modalTable tbody tr:eq(" + i + ") td:eq(1)").find("input").val();

                        var Size = ContainerType.replace(ContainerType.substr(0, ContainerType.lastIndexOf(':') + 1), "").replace(")", "").trim();

                        ContainerType = ContainerType.replace(ContainerType.substr(ContainerType.lastIndexOf('('), ContainerType.lastIndexOf(')')), "");

                        var RegNo = $("#modalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val();

                        var sNo = $("#modalTable tbody tr:eq(" + i + ") td:eq(0)").text();
                        var Row = "<tr><td>" + sNo + "</td> <td>" + ContainerType + "</td> <td>" + Size + "</td> <td>" + RegNo + "</td>  <td><select class='form-control vehicleTypes' data-itemId='0'><option>-Select Vehicle-</option></select></td>  </tr>";
                        Table.append(Row);
                    }
                    $.each(VehicleTypeList, function (index, value) {
                        // $('.vehicleTypes').append($('<option>').text(value));
                        $('.ddlAssignVehicle').append($('<option>').text(value));
                    });
                }
            }
        });
        $(document).on('change', 'select.vehicleTypes', function (e) {
            e.preventDefault();
            var $self = $(this);
            if ($(this).attr('data-itemId') == "0") {
                var $row = $(this).parents('tr').closest("tr");
                var ContainerSize = parseFloat($("#tblAssignVehicle tbody tr:eq(" + $row.index() + ")").find("td:eq(2)").text());
                var VehicleSize = $(this).find("option:selected").text();
                VehicleSize = parseFloat(VehicleSize.replace(VehicleSize.substr(0, VehicleSize.lastIndexOf(':') + 1), "").replace(')', "").trim());
                debugger;
                if (VehicleSize >= ContainerSize) {

                }
                else {
                    debugger;
                    $(this).get(0).selectedIndex = 0;
                    //alert("You can't assign this  this vehicle to container because Container size too large");
                    Notification("You can't assign this vehicle because container size too large ", "error")



                }


            }
        });
        $(document).on('click', 'a.deleteItem', function (e) {
            e.preventDefault();
            var $self = $(this);
            if ($(this).attr('data-itemId') == "0") {
                var isconfirm = confirm('Are you sure want to Delete?');
                if (isconfirm) {
                    $(this).parents('tr').css("background-color", "#ff6347").fadeOut(800, function () {
                        $(this).remove();
                    });

                }

            }
            else if ($(this).attr('data-itemId') == "1") {
                var isConfirm = confirm('Are you sure want to Delete?');
                if (isconfirm) {
                    $(this).parents('tr').css("background-color", "#ff6347").fadeOut(800, function () {
                        $(this).remove();
                    });
                }

                var $row = $(this).parents('tr').closest("tr");
                var Filname = $("#detailsReciveDocument tbody tr:eq(" + $row.index() + ")").find("td:eq(2)").text();
                $.ajax({
                    url: ControllerUrl + "DeleteFile",
                    type: 'POST',
                    data: { Filename: Filname },
                    success: function (response) {
                        alert(response);
                    }

                });
            }
            else if ($(this).attr('data-itemId') == "2") {
                debugger;
                var isConfirm = confirm('Are you sure want to Delete?');
                if (isConfirm) {
                    let length = $("#modalTable tbody tr").length;
                    let type = $(this).parents('td').parent('tr').find('td:eq(0)').text().trim();
                    let IndexArr = [];
                    for (var i = 0; i < length; i++) {
                        let modalTypes = $(`#modalTable tbody tr:eq(${i}) td:eq(1) input`).val().trim();
                        let ContainerNo = $(`#modalTable tbody tr:eq(${i}) td:eq(2) input`).val().trim();
                        if (modalTypes == type) {
                            if (ContainerNo == "") {
                                IndexArr.push(i);
                            }
                            else {
                                return alert("this item can't be remove delete the information of related to this record then try again");
                            }

                        }
                    }
                    let forDelete = "";
                    for (var i = 0; i < IndexArr.length; i++) {
                        forDelete += `tr:eq(${IndexArr[i]}),`;
                    }
                    forDelete = forDelete.slice(0, -1);
                    $(`#modalTable tbody`).find(forDelete).remove();
                    $(this).parents('tr').css("background-color", "#ff6347").fadeOut(800, function () {
                        $(this).remove();
                    });
                    debugger;
                    let RowsCount = $("#detailsTable tbody tr").length;
                    if (RowsCount == 1) {
                        $("#ContainerTypeInfo").removeClass("hidden");
                        $("#UpdateContainerTypeInfo").addClass("hidden");
                    }
                }
            }
            else if ($(this).attr('data-itemId') == "3") {
                debugger;
                var isConfirm = confirm('Are you sure want to Delete?');
                if (isConfirm) {
                    let length = $("#VehiclemodalTable tbody tr").length;
                    let type = $(this).parents('td').parent('tr').find('td:eq(0)').text().trim();
                    let IndexArr = [];
                    for (var i = 0; i < length; i++) {
                        let modalTypes = $(`#VehiclemodalTable tbody tr:eq(${i}) td:eq(1) input`).val().trim();
                        let ContainerNo = $(`#VehiclemodalTable tbody tr:eq(${i}) td:eq(2) input`).val().trim();
                        if (modalTypes == type) {
                            if (ContainerNo == "") {
                                IndexArr.push(i);
                            }
                            else {
                                return alert("this item can't be remove delete the information of related to this record then try again");
                            }

                        }
                    }
                    let forDelete = "";
                    for (var i = 0; i < IndexArr.length; i++) {
                        forDelete += `tr:eq(${IndexArr[i]}),`;
                    }
                    forDelete = forDelete.slice(0, -1);
                    $(`#VehiclemodalTable tbody`).find(forDelete).remove();
                    $(this).parents('tr').css("background-color", "#ff6347").fadeOut(800, function () {
                        $(this).remove();
                    });
                    debugger;
                    let RowsCount = $("#detailsVehicle tbody tr").length;
                    if (RowsCount == 1) {
                        $("#btnVehicleInfo").removeClass("hidden");
                        $("#btnUpdateVehicleInfo").addClass("hidden");
                    }
                }
            }
        });
        $(document).on('click', 'a.EditItem', function (e) {
            e.preventDefault();
            var $row = $(this).parents('tr').closest("tr");
            if ($(this).attr('data-itemId') == "0") {
                let ConType = $("#detailsTable tbody tr:eq(" + $row.index() + ")").find("td:eq(0)").text();
                let qty = $("#detailsTable tbody tr:eq(" + $row.index() + ")").find("td:eq(1)").text();
                let weight = $("#detailsTable tbody tr:eq(" + $row.index() + ")").find("td:eq(2)").text();
                $("#ContainerType").val(ConType);
                $("#Quantity").val(qty);
                $("#TotalWeight").val(weight);
                ThisRowToEdit[0] = $row.index();
                ThisRowToEdit[1] = "container";
                $("#txtSearchContainerType").focus();
            }
            else if ($(this).attr('data-item') == "vehicle") {
                let vehicle = $("#detailsVehicle tbody tr:eq(" + $row.index() + ")").find("td:eq(0)").text();
                let qty = $("#detailsVehicle tbody tr:eq(" + $row.index() + ")").find("td:eq(1)").text().trim();
                let isExt = $("#detailsVehicle tbody tr:eq(" + $row.index() + ")").find("td:eq(2)").text().trim();
                let regno = $("#detailsVehicle tbody tr:eq(" + $row.index() + ")").find("td:eq(3)").text().trim();
                $("#VehicleType").val(vehicle);
                $("#VehicleQuantity").text(qty);
                $("#isExternal").val(isExt);
                $("#Regno").val(regno);
                ThisRowToEdit[0] = $row.index();
                ThisRowToEdit[1] = "vehicle";
                $("#txtSearchVehicleInfo").focus();
            }


        });
        $("#txtItemQty").keyup(function () {
            var ItemQty = $(this).val() == "" ? 0 : parseInt($(this).val());
            var PkgQty = $("#txtProductQty").val() == "" ? 0 : parseInt($("#txtProductQty").val());
            var Total = PkgQty * ItemQty;
            $("#txtTotalWeight").val(Total);
        });
        $("#txtProductQty").keyup(function () {
            var PkgQty = $(this).val() == "" ? 0 : parseInt($(this).val());
            var ItemQty = $("#txtItemQty").val() == "" ? 0 : parseInt($("#txtItemQty").val());
            var Total = PkgQty * ItemQty;
            $("#txtTotalWeight").val(Total);
        });



        function contains(text_one, text_two) {
            if (text_one.indexOf(text_two) != -1) {
                return true;
            }
        }

        function BigSaveBilty() {
            var SenderCompanyId = $("#hfSenderCompanyID").val();
            //var SenderGroupId = $("#hfSenderGroupID").val();
            var SenderDepartId = $("#hfSenderDepartID").val();
            var SenderPersonId = $("#hfSenderPersonID").val();
            var ReciverCompanyId = $("#hfReciverCompanyID").val();
            // var ReciverGroupId = $("#hfReciverGroupID").val();
            var ReciverDepartId = $("#hfReciverDepartID").val();
            var ReciverPersonId = $("#hfReciverPersonID").val();
            var BilltoCompanyId = $("#hfBilltoCompanyID").val();
            //  var BilltoGroupId = $("#hfBilltoGroupID").val();
            var BilltoDepartId = $("#hfBilltoDepartID").val();
            var BilltoPersonId = $("#hfBilltoPersonID").val();
            var AgentCompanyId = $("#hfAgentCompanyID").val();
            // var ReciverGroupId = $("#hfReciverGroupID").val();
            var AgentDepartId = $("#hfAgentDepartID").val();
            var AgentPersonId = $("#hfAgentPersonID").val();
            var PickUpProvince = $("#txtPicLocationProvince").val();
            var PickUpCity = $("#txtPickLocationCity").val();
            var PickUpArea = $("#txtPickLocationArea").val();
            var PickUpName = $("#txtPickLocationName").val();
            var PickUpAddress = $("#txtPickLocationAddress").val();
            var DropProvince = $("#txtDropLocationProvince").val();
            var DropCity = $("#txtDropLocationCity").val();
            var DropArea = $("#txtDropLocationArea").val();
            var DropName = $("#txtDropLocationName").val();
            var DropAddress = $("#txtDropLocationAddress").val();
            var BillingType = $("#BillingType option:selected").text();
            var ShipmentType = $("#ShippingType option:selected").text();
            var LoadingDate = $("#LoadingDate").val();
            var BiltyNoManual = $("#BiltyNoManual").val();

            var BiltyDate = $("#BiltyDate").val();
            if (BiltyDate == "" || BiltyDate == null) {
                BiltyDate = "";
            }
            var Warehouse = $("#WareHouse").val();
            var BiltyNoAutoCode = $("#hfCompanyCode").val().trim();
            if (!(SenderCompanyId > 0)) {
                Notification("Please enter sender company", "error");
                $("#txtSearch").focus();
            }
            else if (!(ReciverCompanyId > 0)) {
                Notification("Please enter receiver company", "error")
                $("#txtConsigmentReciverSearch").focus();
            }
            else if (!(BilltoCompanyId > 0)) {
                Notification("Please enter bill to company", "error")
                $("#txtBillToSearch").focus();
            }
            else if ($("#BillingType option:selected").val() == "0") {
                Notification("Please select billing type", "error")
                $("#BillingType").focus();
            }
            else if ($("#ShippingType option:selected").val() == "0") {
                Notification("Please select shipping type", "error")
                $("#ShippingType").focus();
            }
            else if (LoadingDate == "") {
                Notification("Please enter loading date", "error")

            }
            else {
                //ARRAYS
                var VehicleDetailsArr = [];
                var ContainerTypeArr = [];
                var RecDocumentArr = [];
                var DispatchDocumentArr = [];
                var RecieveByArr = [];
                var ReimursableExpenseArr = [];
                var ActualExpenseArr = [];
                var DamageArr = [];
                var ProductArr = [];
                var SingleDataArr = [];
                var VehicleTimingsArr = [];
                var AssignedVehicleArrv = [];
                SingleDataArr.push({ senderCompany: SenderCompanyId, senderDepart: SenderDepartId, senderPerson: SenderPersonId, reciverCompany: ReciverCompanyId, reciverDepart: ReciverDepartId, reciverPerson: ReciverPersonId, billCompany: BilltoCompanyId, billDepart: BilltoDepartId, billPerson: BilltoPersonId, AgentCompany: AgentCompanyId, AgentDepart: AgentDepartId, AgentPerson: AgentPersonId, PickUpProvince: PickUpProvince, PickUpCity: PickUpCity, PickUpArea: PickUpArea, PickUpName: PickUpName, PickUpAddress: PickUpAddress, DropProvince: DropProvince, DropCity: DropCity, DropArea: DropArea, DropName: DropName, DropAddress: DropAddress, BillingType: BillingType, ShipmentType: ShipmentType, LoadingDate: LoadingDate, BiltyNoManual: BiltyNoManual, BiltyNoAutoCode: BiltyNoAutoCode, BiltyDate: BiltyDate, WareHouse: Warehouse });
                //GAIN LENGTHS
                var VehicleRowsCount = $("#VehiclemodalTable tbody tr").length;
                var ContainerRowsCount = $("#modalTable tbody tr").length;
                var RecDocumentRowsCount = $("#detailsReciveDocument tbody tr").length;
                var DispatchDocumentRowsCount = $("#detailsDispatchDocument tbody tr").length;
                var ReciveByRowsCount = $("#detailsReciveBy tbody tr").length;
                var ReimursableRowsCount = $("#detailsReimursable tbody tr").length;
                var ActualExpenseRowsCount = $("#detailsActualExpense tbody tr").length;
                var DamageRowsCount = $("#detailsDamageType tbody tr").length;
                var ProductRowsCount = $("#detailsProduct tbody tr").length;
                var VehicleTimings = $("#VehicleTimings tbody tr").length;
                var AssignedVehicleCount = $("#tblAssignVehicle tbody tr").length;
                for (var i = 0; i < VehicleRowsCount; i++) {

                    var vehicletype = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(1)").find("input").val();
                    var Regno = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val().toUpperCase();
                    var contact = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(3)").find("input").val();
                    var broker = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(4)").find("select :selected").text();;
                    var driver = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(5)").find("input").val();
                    var father = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(6)").find("input").val();
                    var nic = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(7)").find("input").val();
                    nic = nic.replace("-", "");
                    var license = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(8)").find("input").val();
                    var cell = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(9)").find("input").val();
                    vehicletype = vehicletype.replace(vehicletype.substr(vehicletype.lastIndexOf("(")), "").trim();
                    VehicleDetailsArr.push({ VehicleType: vehicletype, RegNo: Regno, Contact: contact, Broker: broker, Driver: driver, Father: father, NIC: nic, License: license, Cell: cell });

                }
                for (var i = 0; i < ContainerRowsCount; i++) {

                    var containertype = $("#modalTable tbody tr:eq(" + i + ") td:eq(8)").find("input").val();
                    var ContainerNo = $("#modalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val().toUpperCase();
                    var weight = $("#modalTable tbody tr:eq(" + i + ") td:eq(3)").find("input").val();
                    var pick = $("#modalTable tbody tr:eq(" + i + ") td:eq(4)").find("select option:selected").text();
                    var drop = $("#modalTable tbody tr:eq(" + i + ") td:eq(5)").find("select option:selected").text();
                    var vessel = $("#modalTable tbody tr:eq(" + i + ") td:eq(6)").find("input").val();
                    var remarks = $("#modalTable tbody tr:eq(" + i + ") td:eq(7)").find("input").val();

                    ContainerTypeArr.push({

                        ContainerType: containertype, RegNo: ContainerNo,
                        Weight: weight, Pick: pick,
                        Drop: drop, Vessel: vessel,
                        Remarks: remarks
                    });
                }
                for (var i = 0; i < RecDocumentRowsCount; i++) {

                    var documenttype = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(0)").text();
                    var documentNo = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(1)").text();
                    var fileName = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(2)").text();
                    var filePath = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(4)").text();


                    RecDocumentArr.push({ DocumentType: documenttype, DocumentNo: documentNo, FileName: fileName, FilePath: filePath });

                }
                for (var i = 0; i < DispatchDocumentRowsCount; i++) {

                    var documenttype = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(0)").text();
                    var documentNo = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(1)").text();
                    var fileName = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(2)").text();
                    var filePath = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(4)").text();


                    DispatchDocumentArr.push({ DocumentType: documenttype, DocumentNo: documentNo, FileName: fileName, FilePath: filePath });

                }
                for (var i = 0; i < ReciveByRowsCount; i++) {

                    var RecievedBy = $("#detailsReciveBy tbody tr:eq(" + i + ") td:eq(0)").text();
                    var Date = $("#detailsReciveBy tbody tr:eq(" + i + ") td:eq(1)").text();
                    var Time = $("#detailsReciveBy tbody tr:eq(" + i + ") td:eq(2)").text();



                    RecieveByArr.push({ RecievedBy: RecievedBy, Date: Date, Time: Time });

                }
                for (var i = 0; i < ReimursableRowsCount; i++) {

                    var ExpenseType = $("#detailsReimursable tbody tr:eq(" + i + ") td:eq(0)").text();
                    var Amount = $("#detailsReimursable tbody tr:eq(" + i + ") td:eq(1)").text();




                    ReimursableExpenseArr.push({ ExpenseType: ExpenseType, Amount: Amount });

                }
                for (var i = 0; i < ActualExpenseRowsCount; i++) {

                    var ExpenseType = $("#detailsActualExpense tbody tr:eq(" + i + ") td:eq(0)").text();
                    var Amount = $("#detailsActualExpense tbody tr:eq(" + i + ") td:eq(1)").text();

                    ActualExpenseArr.push({ ExpenseType: ExpenseType, Amount: Amount });

                }
                for (var i = 0; i < DamageRowsCount; i++) {

                    var ItemName = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(0)").text();
                    var DamageType = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(1)").text();
                    var DocumentType = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(2)").text();
                    var DamageCost = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(3)").text();
                    var Causeof = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(4)").text();


                    DamageArr.push({ ItemName: ItemName, DamageType: DamageType, DocumentType: DocumentType, DamageCost: DamageCost, CauseOf: Causeof });

                }
                for (var i = 0; i < ProductRowsCount; i++) {

                    var PackageType = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(0)").text();
                    var Item = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(1)").text();
                    var PkgQTY = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(2)").text();
                    var ItemQTY = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(3)").text();
                    var TotalWeight = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(4)").text();



                    ProductArr.push({ ItemName: Item, PackageType: PackageType, PkgQty: PkgQTY, ItemQty: ItemQTY, TotalWeight: TotalWeight });

                }
                for (var i = 0; i < VehicleTimings; i++) {

                    var VehicleTypeForTimings = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(1)").text();
                    var RegnoForTimings = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(2)").text();
                    var ReportDate = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(3)").find("input").val();
                    var ReportTime = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(4)").find("input").val();
                    var InDate = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(5)").find("input").val();
                    var InTime = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(6)").find("input").val();
                    var OutDate = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(7)").find("input").val();
                    var OutTime = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(8)").find("input").val();
                    ReportDate = ReportDate.trim() + " " + ReportTime.trim();
                    InDate = InDate.trim() + " " + InTime.trim();
                    debugger;
                    OutDate = OutDate.trim() + " " + OutTime.trim();



                    VehicleTimingsArr.push({ VehicleType: VehicleTypeForTimings, RegNo: RegnoForTimings, ReportDate: ReportDate, InDate: InDate, OutDate: OutDate });

                }
                for (var i = 0; i < AssignedVehicleCount; i++) {

                    var AssignedContainer = $("#tblAssignVehicle tbody tr:eq(" + i + ") td:eq(1)").text();
                    var AssignedContainerNo = $("#tblAssignVehicle tbody tr:eq(" + i + ") td:eq(3)").text();
                    var AssignedVehicle = $("#tblAssignVehicle tbody tr:eq(" + i + ") td:eq(4)").find("input").val();




                    AssignedVehicleArrv.push({ ContainerType: AssignedContainer, ContainerNo: AssignedContainerNo, VehicleType: AssignedVehicle });

                }
            }
        }
        //FOR CONSIGMENT SENDER SECTION
        //$("#txtSearch").keyup(function () {
        //    var SearchText = $("#txtSearch").val().toLowerCase();
        //    if (SearchText == "") {
        //        $("#tblCosigmentInfo").addClass("hidden");
        //    }
        //    else {
        //        $.ajax({
        //            url: ControllerUrl + 'SearchCompanies',
        //            type: 'POST',
        //            dataType: 'json',
        //            data: { Keyword: $(this).val() },
        //            success: function (data) {
        //                var HirTable = $("#tblCosigmentInfo tbody");
        //                HirTable.html('');
        //                for (var i = 0; i < data.Hirarchy.length; i++) {
        //                    let row = "<tr class='Search'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
        //                    HirTable.append(row);
        //                    $("#tblCosigmentInfo").removeClass("hidden");
        //                }
        //            },
        //            error: function (xhr) {
        //                alert("Error data not refresh");
        //            }
        //        });

        //    }


        //});
        // -----------------------------------------------------
        //FOR CONSIGMENT RECIVER SECTION
        //$("#txtConsigmentReciverSearch").keyup(function (e) {
        //    var x = 0;
        //    if (e.which == 13) {

        //    }
        //    else {
        //        var SearchText = $("#txtConsigmentReciverSearch").val().toLowerCase();
        //        if (SearchText != "") {
        //            $.ajax({
        //                url: ControllerUrl + 'SearchCompanies',
        //                type: 'POST',
        //                dataType: 'json',
        //                data: { Keyword: $(this).val() },
        //                success: function (data) {
        //                    var HirTable = $("#tblCosigmentReciverInfo tbody");
        //                    HirTable.html('');
        //                    for (var i = 0; i < data.Hirarchy.length; i++) {
        //                        let row = "<tr class='ReciverSearch'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
        //                        HirTable.append(row);
        //                        $("#tblCosigmentReciverInfo").removeClass("hidden");
        //                    }
        //                },
        //                error: function (xhr) {
        //                    alert("Error data not refresh");
        //                }
        //            });
        //        }
        //        else {
        //            $("#tblCosigmentReciverInfo").addClass("hidden");
        //        }


        //    }
        //});




        //--------------------------------------------------------------------
        //-----------------------------------------------------------------------

        //FOR BILL TO CUSTOMER SECTION
        //$("#txtBillToSearch").keyup(function () {
        //    var SearchText = $("#txtBillToSearch").val().toLowerCase();
        //    if (SearchText != "") {
        //        $.ajax({
        //            url: ControllerUrl + 'SearchCompanies',
        //            type: 'POST',
        //            dataType: 'json',
        //            data: { Keyword: $(this).val() },
        //            success: function (data) {
        //                var HirTable = $("#tblBillToCustomer tbody");
        //                HirTable.html('');
        //                for (var i = 0; i < data.Hirarchy.length; i++) {
        //                    let row = "<tr class='BillToSearch'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
        //                    HirTable.append(row);
        //                    $("#tblBillToCustomer").removeClass("hidden");
        //                }
        //            },
        //            error: function (xhr) {
        //                alert("Error data not refresh");
        //            }
        //        });
        //    }
        //    else {
        //        $("#tblBillToCustomer").addClass("hidden");
        //    }

        //});

        //FOR Clearing Agent SECTION
        //$("#txtAgentSearch").keyup(function () {
        //    var SearchText = $("#txtAgentSearch").val().toLowerCase();
        //    if (SearchText != "") {
        //        $.ajax({
        //            url: ControllerUrl + 'SearchCompanies',
        //            type: 'POST',
        //            dataType: 'json',
        //            data: { Keyword: $(this).val() },
        //            success: function (data) {
        //                var HirTable = $("#tblAgent tbody");
        //                HirTable.html('');
        //                for (var i = 0; i < data.Hirarchy.length; i++) {
        //                    let row = "<tr class='AgentSearch'> <td><input type='hidden' value='" + data.Hirarchy[i].GroupID + "'> </td> <td>" + data.Hirarchy[i].GroupCode + "</td>  <td>" + data.Hirarchy[i].GroupName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].CompanyID + "' ></td> <td>" + data.Hirarchy[i].CompanyCode + "</td> <td>" + data.Hirarchy[i].CompanyName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].DepartID + "'> </td> <td>" + data.Hirarchy[i].DepartCode + "</td> <td>" + data.Hirarchy[i].DepartName + "</td> <td><input type='hidden' value='" + data.Hirarchy[i].PersonID + "'></td> <td>" + data.Hirarchy[i].PersonCode + "</td> <td>" + data.Hirarchy[i].PersonName + "</td></tr>";
        //                    HirTable.append(row);
        //                    $("#tblAgent").removeClass("hidden");
        //                }
        //            },
        //            error: function (xhr) {
        //                alert("Error data not refresh");
        //            }
        //        });
        //    }
        //    else {
        //        $("#tblAgent").addClass("hidden");
        //    }


        //});
        //--------------------------------------------------------------------
        //-----------------------------------------------------------------------
        //FOR PICK UP LOCATION
        //$("#txtPickLocationSearch").keyup(function () {
        //    var SearchText = $(this).val().toLowerCase();
        //    if (SearchText == "") {
        //        $("#tblPickLocation").addClass("hidden");
        //    }
        //    else {
        //        $.ajax({
        //            url: ControllerUrl + 'SearchLocations',
        //            type: 'POST',
        //            dataType: 'json',
        //            data: { Keyword: $(this).val() },
        //            success: function (data) {
        //                var Loctable = $("#tblPickLocation tbody");
        //                Loctable.html('');
        //                for (var i = 0; i < data.Locations.length; i++) {
        //                    let row = "<tr class='PickLocationSearch'> <td>" + data.Locations[i].Code + "</td> <td>" + data.Locations[i].Name + "</td>  <td>" + data.Locations[i].Province + "</td> <td>" + data.Locations[i].City + "</td> <td>" + data.Locations[i].Area + "</td> <td>" + data.Locations[i].Address + "</td></tr>";
        //                    Loctable.append(row);
        //                    $("#tblPickLocation").removeClass("hidden");
        //                }



        //            },
        //            error: function (xhr) {
        //                alert("Error data not refresh");
        //            }
        //        });
        //    }
        //});
        ////FOR DROP LOCATION
        //$("#txtDropLocationSearch").keyup(function () {
        //    var SearchText = $(this).val().toLowerCase();
        //    if (SearchText == "") {
        //        $("#tblDropLocation").addClass("hidden");
        //    }
        //    else {
        //        $.ajax({
        //            url: ControllerUrl + 'SearchLocations',
        //            type: 'POST',
        //            dataType: 'json',
        //            data: { Keyword: $(this).val() },
        //            success: function (data) {
        //                var Loctable = $("#tblDropLocation tbody");
        //                Loctable.html('');
        //                for (var i = 0; i < data.Locations.length; i++) {
        //                    let row = "<tr class='DropLocationSearch'> <td>" + data.Locations[i].Code + "</td> <td>" + data.Locations[i].Name + "</td>  <td>" + data.Locations[i].Province + "</td> <td>" + data.Locations[i].City + "</td> <td>" + data.Locations[i].Area + "</td> <td>" + data.Locations[i].Address + "</td></tr>";
        //                    Loctable.append(row);
        //                    $("#tblDropLocation").removeClass("hidden");
        //                }



        //            },
        //            error: function (xhr) {
        //                alert("Error data not refresh");
        //            }
        //        });
        //    }
        //});
        //CONTAINER INFO CLICK

        //ADD CONTAINER INFO IN GRID
        function clearItem() {
            $("#Quantity").val('');
            $("#txtSearchVehicleInfo").val('');

            $("#TotalWeight").val('');
            $("#VehicleQuantity").val('');
            $("#txtDocumentNo").val('');
            $("#txtFileName").val('');
            $("#ContainerType").val('');
            $("#VehicleType").val('');
            $("#txtProductSearch").val('');
            $("#txtProductPackageType").val('');
            $("#txtProductItem").val('');
            $("#txtProductModel").val('');
            $("#txtProductQty").val('');
            $("#txtTotalWeight").val('');
            $("#txtItemQty").val('');
            $("#txtDocumentNo").val('');
            $("#txtFileName").val('');
            $("#txtTime").val('');
            $("#txtRecDocumentNo").val('');
            $("#txtRecFileName").val('');
            $("#txtActualAmount").val('');
            $("#txtReimursableAmount").val('');
            $("#txtDamageCost").val('');
            $("#txtCause").val('');
            $("#Regno").val('');
            $("#isExternal").val('Internal');
            // $("#modalTable").html('')


        }
        function ResetSenderFields() {
            $("#ConisgmentSenderComp").val('');
            $("#ConisgmentSenderGroup").val('');
            $("#ConisgmentSenderPerson").val('');
            $("#ConisgmentSenderDepart").val('');
            $("#ConisgmentSenderDepart").val('');

            $("#hfSenderCompanyID").val('');
            $("#hfSenderGroupID").val('');
            $("#hfSenderDepartID").val('');
            $("#hfSenderPersonID").val('');
        }
        function ResetReciverFields() {

            $("#txtConsigmentReciverCompany").val('');
            $("#txtConsigmentReciverGroup").val('');
            $("#txtConsigmentReciverPerson").val('');
            $("#txtConsigmentReciverDepart").val('');

            $("#hfReciverCompanyID").val('');
            $("#hfReciverGroupID").val('');
            $("#hfReciverDepartID").val('');
            $("#hfReciverPersonID").val('');

        }
        function ResetBilltoFields() {

            $("#txtBillToComp").val('');
            $("#txtBillToGroup").val('');
            $("#txtBillToPerson").val('');
            $("#txtBillToDepart").val('');

            $("#hfBilltoCompanyID").val('');
            $("#hfBilltoGroupID").val('');
            $("#hfBilltoDepartID").val('');
            $("#hfBilltoPersonID").val('');

        }
        function ResetAgentFields() {

            $("#AgentCompany").val('');
            $("#AgentGroup").val('');
            $("#AgentPerson").val('');
            $("#AgentDepart").val('');

            $("#hfAgentCompanyID").val('');
            $("#hfAgentGroupID").val('');
            $("#hfAgentDepartID").val('');
            $("#hfAgentPersonID").val('');

        }
        function ResetProduct() {

            $("#txtProductPackageType").val('');
            $("#txtProductItem").val('');
            $("#txtProductModel").val('');
            $("#txtProductQty").val('');

            $("#txtTotalWeight").val('');
            $("#txtItemQty").val('');

        }
        //$("#btnAddVehicle").click(function (e) {
        //    e.preventDefault();
        //    debugger;
        //    if ($.trim($("#VehicleType").val()) == "") {
        //        Notification("Select Vehicle Type", "error");
        //        $("#VehicleType").focus();
        //    }
        //    else if ($.trim($("#VehicleQuantity").text()) == "") {
        //        Notification("Enter qty", "error");
        //        $("#VehicleQuantity").focus();
        //    }
        //    else {
        //        debugger;
        //        var Qty = $("#VehicleQuantity").text();
        //        var UserRegNo = $("#Regno").val();
        //        if ($("#isExternal").val() == "Internal") {
        //            if (Qty > 0) {
        //                var NARegNo = 0;
        //                var rowCount = $('#tblRegNo tr').length;
        //                if (rowCount > 0) {
        //                    var table = $("#tblRegNo tbody");
        //                    table.find('tr').each(function (i, el) {
        //                        var $tds = $(this).find('td'),
        //                            RegNo = $tds.eq(1).text();

        //                        if (UserRegNo == RegNo) {
        //                            NARegNo++;
        //                        }

        //                    });

        //                    //if (NARegNo > 0)
        //                    //{
        //                    var Vehicle = $("#VehicleType").val().trim(),
        //                        Quantity = parseInt($("#VehicleQuantity").text().trim()),
        //                        isExternal = $("#isExternal").val(),
        //                        RegNo = $("#Regno").val(),
        //                        detailsTableBody = $("#detailsVehicle tbody");
        //                    for (var i = 0; i < $("#detailsVehicle tbody tr").length; i++) {
        //                        if ($("#detailsVehicle tbody tr:eq(" + i + ") td:eq(0)").text().trim() == Vehicle && $("#detailsVehicle tbody tr:eq(" + i + ") td:eq(3)").text().trim() == RegNo) {
        //                            Quantity += parseInt($("#detailsVehicle tbody tr:eq(" + i + ") td:eq(1)").text());
        //                            $("#detailsVehicle tbody tr:eq(" + i + ") td:eq(1)").text(Quantity);
        //                            clearItem();
        //                            return;
        //                        }
        //                    }
        //                    if (ThisRowToEdit[0] != "empty" && ThisRowToEdit[1] == "vehicle") {
        //                        detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(0)").text(Vehicle);
        //                        detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(1)").text(Quantity);
        //                        detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(2)").text(isExternal);
        //                        detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(3)").text(RegNo);
        //                    }
        //                    else {
        //                        //var VehicleItem = '<tr class="rows"><td>' + Vehicle + '</td><td>' + Quantity + '</td> <td>' + isExternal + '</td> <td>' + RegNo + '</td> <td> <label class="label label-info"> <label class="label label-info">0</label>/<label class="label label-info">' + Quantity + '<label/> </label> </td> <td><a data-itemId="3" href="#" class="btn btn-xs btn-danger deleteItem"><i class="fa fa-trash"></i></a> <a data-item="vehicle" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fas fa-edit"></i></a></td> <td><i></i></td> </tr>';
        //                        var VehicleItem = '<tr class="rows"><td> <i class="fa fa-exclamation-triangle"></i> ' + Vehicle + '</td><td>' + Quantity + '</td> <td>' + isExternal + '</td> <td>' + RegNo + '</td>  <td><a data-itemId="3" href="#" class="btn btn-xs btn-danger deleteItem"><i class="fa fa-trash"></i></a> <a data-item="vehicle" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fas fa-edit"></i></a></td>  </tr>';
        //                        detailsTableBody.append(VehicleItem);
        //                    }
        //                    clearItem();
        //                    $("#txtSearchVehicleInfo").focus();

        //                    //add vehicle row
        //                    let rowlength = $("#detailsVehicle tbody tr").length;
        //                    if (!(rowlength > 1)) {
        //                        debugger;
        //                        //$('#modal-add-VehicleInfo').modal('show');
        //                        var RowsCount = $("#detailsVehicle tbody tr").length;
        //                        for (var i = 0; i < RowsCount; i++) {
        //                            var VehicleType = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(0)").text();
        //                            var Quantity = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(1)").text();

        //                        }
        //                        $("#VehiclemodalTable tbody").html('');
        //                        $.ajax({
        //                            url: ControllerUrl + "test",
        //                            type: 'GET',
        //                            dataType: 'json',
        //                            success: function (data) {

        //                                // var RowsInputs = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" style="width: 180px;" /></td>   <td><input type="text" id="txtRegNo" style="width: 108px;" /></td>  <td><input type="text" id="txtVehicleContactNo" style="width: 108px;" /></td>  <td> <select class="mySelect"> </select> </td>  <td><input type="text" id="txtDrivername" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text" id="txtDriverNIC" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverLicense" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>   </tr>';
        //                                var RowsInputs = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" style="width: 180px;" readonly /></td>   <td><input type="text" class="txtRegNo" style="width: 108px;" /></td>     <td><input type="text" class="txtContactNo" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text"  style="width: 108px;" /> </td>  <td> <input type="text" class="txtNICno" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>  <td> <input type="text" id="txtSearchBroker" class="searchBroker"/> </td>   </tr>';
        //                                var x = 0;
        //                                var Sno = 0;
        //                                for (var i = 0; i < RowsCount; i++) {
        //                                    Sno++
        //                                    var EachRowQuantity = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(1)").text();

        //                                    for (var j = 0; j < EachRowQuantity; j++) {
        //                                        var _x = parseInt(j) + parseInt(x);
        //                                        var VehicleTypeValue = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(0)").text();
        //                                        var RegNo = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(3)").text();
        //                                        $("#VehiclemodalTable tbody").append(RowsInputs);

        //                                        $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(1) input").val(VehicleTypeValue);
        //                                        $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(2) input").val(RegNo);
        //                                        $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(0)").text(_x + 1);

        //                                    }

        //                                    x += parseInt(EachRowQuantity);


        //                                }

        //                                debugger;
        //                                var z = 0;
        //                                $.each(data.textList, function (index, value) {
        //                                    $('.mySelect').append($('<option>').text(value).attr('value', data.valuesList[z]));
        //                                    z++;
        //                                });

        //                                $(".txtContactNo").mask("9999-9999999");
        //                                $(".txtNICno").mask("99999-9999999-9");
        //                            }
        //                        });
        //                        //$(this).addClass("hidden");
        //                        $("#btnUpdateVehicleInfo").removeClass("hidden");
        //                        focused('VehiclemodalTable', 2);
        //                        MakeVehicleSummary();

        //                    }

        //                    //}
        //                    //else {
        //                    //        alert("Please select registered vehicle");
        //                    //    }
        //                }

        //            }

        //        }

        //    }






        //});

        $("#btnAddVehicle").click(function (e) {
            e.preventDefault();
            debugger;
            if ($.trim($("#VehicleType").val()) == "") {
                Notification("Select Vehicle Type", "error");
                $("#VehicleType").focus();
            }
            else if ($.trim($("#VehicleQuantity").text()) == "") {
                Notification("Enter qty", "error");
                $("#VehicleQuantity").focus();
            }
            else {
                debugger;
                var Qty = $("#VehicleQuantity").text();
                if (Qty > 0) {
                    var NARegNo = 0;
                    var rowCount = $('#tblRegNo tr').length;
                    if (rowCount > 0) {
                        //var table = $("#tblRegNo tbody");
                        //table.find('tr').each(function (i, el) {
                        //    var $tds = $(this).find('td'),
                        //        RegNo = $tds.eq(1).text();

                        //    if (UserRegNo == RegNo) {
                        //        NARegNo++;
                        //    }

                        //});

                        //if (NARegNo > 0)
                        //{
                        var Vehicle = $("#VehicleType").val().trim(),
                            Quantity = parseInt($("#VehicleQuantity").text().trim()),
                            isExternal = $("#isExternal").val(),
                            //RegNo = $("#Regno").val(),
                            detailsTableBody = $("#detailsVehicle tbody");
                        for (var i = 0; i < $("#detailsVehicle tbody tr").length; i++) {
                            if ($("#detailsVehicle tbody tr:eq(" + i + ") td:eq(0)").text().trim() == Vehicle) {
                                Quantity += parseInt($("#detailsVehicle tbody tr:eq(" + i + ") td:eq(1)").text());
                                $("#detailsVehicle tbody tr:eq(" + i + ") td:eq(1)").text(Quantity);
                                clearItem();
                                return;
                            }
                        }
                        if (ThisRowToEdit[0] != "empty" && ThisRowToEdit[1] == "vehicle") {
                            detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(0)").text(Vehicle);
                            detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(1)").text(Quantity);
                            //detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(2)").text(isExternal);
                            //detailsTableBody.find('tr:eq(' + ThisRowToEdit[0] + ')').find("td:eq(3)").text(RegNo);
                        }
                        else {
                            //var VehicleItem = '<tr class="rows"><td>' + Vehicle + '</td><td>' + Quantity + '</td> <td>' + isExternal + '</td> <td>' + RegNo + '</td> <td> <label class="label label-info"> <label class="label label-info">0</label>/<label class="label label-info">' + Quantity + '<label/> </label> </td> <td><a data-itemId="3" href="#" class="btn btn-xs btn-danger deleteItem"><i class="fa fa-trash"></i></a> <a data-item="vehicle" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fas fa-edit"></i></a></td> <td><i></i></td> </tr>';
                            var VehicleItem = '<tr class="rows"><td> <i class="fa fa-exclamation-triangle"></i> ' + Vehicle + '</td><td>' + Quantity + '</td>  <td><a data-itemId="3" href="#" class="btn btn-xs btn-danger deleteItem"><i class="fa fa-trash"></i></a> <a data-item="vehicle" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fas fa-edit"></i></a></td>  </tr>';
                            detailsTableBody.append(VehicleItem);
                        }
                        clearItem();
                        $("#txtSearchVehicleInfo").focus();

                        //add vehicle row
                        let rowlength = $("#detailsVehicle tbody tr").length;
                        if (!(rowlength > 1)) {
                            debugger;
                            //$('#modal-add-VehicleInfo').modal('show');
                            var RowsCount = $("#detailsVehicle tbody tr").length;
                            for (var i = 0; i < RowsCount; i++) {
                                var VehicleType = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(0)").text();
                                var Quantity = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(1)").text();

                            }
                            $("#VehiclemodalTable tbody").html('');
                            $.ajax({
                                url: ControllerUrl + "test",
                                type: 'GET',
                                dataType: 'json',
                                success: function (data) {

                                    // var RowsInputs = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" style="width: 180px;" /></td>   <td><input type="text" id="txtRegNo" style="width: 108px;" /></td>  <td><input type="text" id="txtVehicleContactNo" style="width: 108px;" /></td>  <td> <select class="mySelect"> </select> </td>  <td><input type="text" id="txtDrivername" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text" id="txtDriverNIC" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverLicense" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>   </tr>';
                                    var RowsInputs = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" style="width: 180px;" readonly /></td>   <td><input type="text" class="txtRegNo" style="width: 108px;" /></td>     <td><input type="text" class="txtContactNo" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text"  style="width: 108px;" /> </td>  <td> <input type="text" class="txtNICno" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>  <td> <input type="text" id="txtSearchBroker" class="searchBroker"/> </td>   </tr>';
                                    var x = 0;
                                    var Sno = 0;
                                    for (var i = 0; i < RowsCount; i++) {
                                        Sno++
                                        var EachRowQuantity = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(1)").text();

                                        for (var j = 0; j < EachRowQuantity; j++) {
                                            var _x = parseInt(j) + parseInt(x);
                                            var VehicleTypeValue = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(0)").text();
                                            var RegNo = $("#detailsVehicle tbody tr:eq('" + i + "') td:eq(3)").text();
                                            $("#VehiclemodalTable tbody").append(RowsInputs);

                                            $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(1) input").val(VehicleTypeValue);
                                            //$("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(2) input").val(RegNo);
                                            $("#VehiclemodalTable tbody tr:eq('" + _x + "') td:eq(0)").text(_x + 1);

                                        }

                                        x += parseInt(EachRowQuantity);


                                    }

                                    debugger;
                                    var z = 0;
                                    $.each(data.textList, function (index, value) {
                                        $('.mySelect').append($('<option>').text(value).attr('value', data.valuesList[z]));
                                        z++;
                                    });

                                    $(".txtContactNo").mask("9999-9999999");
                                    $(".txtNICno").mask("99999-9999999-9");
                                }
                            });
                            //$(this).addClass("hidden");
                            $("#btnUpdateVehicleInfo").removeClass("hidden");
                            focused('VehiclemodalTable', 2);
                            MakeVehicleSummary();

                        }

                        //}
                        //else {
                        //        alert("Please select registered vehicle");
                        //    }
                    }

                }
            }






        });



        //function dotheneedful(sibling) {
        //    if (sibling != null) {
        //        start[cellsCount].focus();
        //        start[cellsCount].style.backgroundColor = 'green';
        //        start[cellsCount].style.color = '';
        //        $(start).removeClass("current-row");
        //        sibling.focus();
        //        sibling.style.bgColor = 'green';
        //        sibling.style.color = 'black';
        //        $(sibling).addClass("current-row");
        //        start[cellsCount] = sibling;
        //    }
        //}
        ////document.onkeydown = checkKey;
        //var cellsCount = 0;
        //$(document).on("keydown", checkKey);
        //function checkKey(e) {
        //    e = e || window.event;
        //    if (e.keyCode == '38') {
        //        // up arrow
        //        var idx = start.cellIndex;
        //        var nextrow = start.parentElement.previousElementSibling;
        //        if (nextrow != null) {
        //            var sibling = nextrow.cells[idx];
        //            dotheneedful(sibling);
        //        }
        //    } else if (e.keyCode == '40') {
        //        // down arrow
        //        var idx = start.cellIndex;
        //        var nextrow = start.parentElement.nextElementSibling;
        //        if (nextrow != null) {
        //            var sibling = nextrow.cells[idx];
        //            dotheneedful(sibling);
        //        }
        //    } else if (e.keyCode == '37') {
        //        // left arrow
        //        var sibling = start.previousElementSibling;
        //        dotheneedful(sibling);
        //    } else if (e.keyCode == '39') {
        //        // right arrow
        //        debugger;
        //        var sibling = start[cellsCount].nextElementSibling;
        //        dotheneedful(sibling);
        //    }
        //    cellsCount++;
        //}
        //$(document).on('keypress', function (e) {
        //    if (e.which == 13) {
        //        var currentRow = $(".current-row").closest("tr");
        //        var ID = currentRow.find("td:eq(0)").text();
        //        var CompanyName = currentRow.find("td:eq(5)").text();
        //        var GroupName = currentRow.find("td:eq(2)").text();
        //        var DepartName = currentRow.find("td:eq(8)").text();
        //        var PersonName = currentRow.find("td:eq(11)").text();

        //        var GroupID = currentRow.find("td:eq(0)").find("input").val();
        //        var CompanyID = currentRow.find("td:eq(3)").find("input").val();
        //        var DepartID = currentRow.find("td:eq(6)").find("input").val();
        //        var PersonID = currentRow.find("td:eq(9)").find("input").val();


        //        $("#txtConsigmentReciverCompany").val(CompanyName);
        //        $("#txtConsigmentReciverGroup").val(GroupName);
        //        $("#txtConsigmentReciverPerson").val(PersonName);
        //        $("#txtConsigmentReciverDepart").val(DepartName);

        //        $("#hfReciverCompanyID").val(CompanyID);
        //        $("#hfReciverGroupID").val(GroupID);
        //        $("#hfReciverDepartID").val(DepartID);
        //        $("#hfReciverPersonID").val(PersonID);

        //        $("#tblCosigmentReciverInfo").addClass("hidden");
        //    }
        //});
        $('#tblSearchWithAllTags').keydown(function (e) {
            var c = "";
            if (e.which == 39) {
                // Right Arrow
                c = currCell.next();
            } else if (e.which == 37) {
                // Left Arrow
                c = currCell.prev();
            } else if (e.which == 38) {
                // Up Arrow
                c = currCell.closest('tr').prev().find('td:eq(' +
                    currCell.index() + ')');
            } else if (e.which == 40) {
                // Down Arrow
                c = currCell.closest('tr').next().find('td:eq(' +
                    currCell.index() + ')');
            } else if (!editing && (e.which == 13 || e.which == 32)) {
                // Enter or Spacebar - edit cell
                e.preventDefault();
                edit();
            } else if (!editing && (e.which == 9 && !e.shiftKey)) {
                // Tab
                e.preventDefault();
                c = currCell.next();
            } else if (!editing && (e.which == 9 && e.shiftKey)) {
                // Shift + Tab
                e.preventDefault();
                c = currCell.prev();
            }

            // If we didn't hit a boundary, update the current cell
            if (c.length > 0) {
                currCell = c;
                currCell.focus();
            }
        });
        $(document).on('click', 'tr.ProductSearch', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var Code = currentRow.find("td:eq(0)").text();
            var Item = currentRow.find("td:eq(1)").text();
            var PackageType = currentRow.find("td:eq(4)").text();
            var modelCode = currentRow.find("td:eq(2)").text();
            var model = currentRow.find("td:eq(3)").text();
            var PackageQty = currentRow.find("td:eq(5)").text();
            var Id = currentRow.find("td:eq(6) input").val();


            $("#txtProductPackageType").val(PackageType);
            $("#txtProductItem").val(Item);
            $("#txtProductQty").val(PackageQty);
            $("#txtProductSearch").val(Code);
            $("#txtProductModel").val(model);
            $("#hfProductID").val(Id);


            $("#tblProduct").addClass("hidden");
            $("#txtItemQty").focus();



        });
        $(document).on('click', 'tr.SearchContainerWithAll', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").find("input").val();
            var ContainerType = currentRow.find("td:eq(2)").text();
            var COde = currentRow.find("td:eq(1)").text();
            $("#ContainerType").val(ContainerType);
            $("#hfContainerTypeID").val(ID);
            $("#txtSearchContainerType").val(COde);
            $("#Quantity").focus();

            $("#tblSearchContainerWithAll").addClass("hidden");



        });
        $(document).on('click', 'tr.SearchDispatchWithAll', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var CODE = currentRow.find("td:eq(0)").text();
            var NAME = currentRow.find("td:eq(1)").text();
            $("#ddlDocument").val(NAME);
            $("#txtSearchDipatchCode").val(CODE);
            $("#txtDocumentNo").focus();
            $("#tblDispatchSearch").addClass("hidden");



        });
        $(document).on('click', 'tr.SearchrDocumentWithAll', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var CODE = currentRow.find("td:eq(0)").text();
            var NAME = currentRow.find("td:eq(1)").text();
            $("#ddlDocumentRecive").val(NAME);
            $("#txtSearchrDocumentCode").val(CODE);
            $("#txtRecDocumentNo").focus();
            $("#tblrDocumentSearch").addClass("hidden");



        });
        $(document).on('click', 'tr.SearchRegNo', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").find("input").val();
            var RegNo = currentRow.find("td:eq(1)").text();
            $("#Regno").val(RegNo);
            $("#tblRegNo").addClass("hidden");
            $("#btnAddVehicle").focus();

        });
        $(document).on('click', 'tr.SearchRegNoInModal', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").find("input").val();
            var RegNo = currentRow.find("td:eq(1)").text();
            let index = parseInt($("#hfSearchVehicle").val());
            $("#VehiclemodalTable tbody").find("tr:eq(" + index + ") td:eq(2) input ").val(RegNo);
            $(".tblRegNo").addClass("hidden");

        })
        $(document).on('click', 'tr.trSearchVehicleWithAll', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            var ID = currentRow.find("td:eq(0)").find("input").val();
            var vehicletype = currentRow.find("td:eq(2)").text();
            var Code = currentRow.find("td:eq(1)").text();
            $("#VehicleType").val(vehicletype);
            // $("#hfContainerTypeID").val(ID);
            $("#txtSearchVehicleInfo").val(Code);
            $("#VehicleQuantity").focus();
            $("#tblSearchVehicleWithAll").addClass("hidden");



        });

        //$(document).on('click', 'tr.DropLocationSearch', function (e) {
        //    e.preventDefault();
        //    var currentRow = $(this).closest("tr");
        //    var Address = currentRow.find("td:eq(5)").text();
        //    var Name = currentRow.find("td:eq(1)").text();
        //    var Province = currentRow.find("td:eq(2)").text();
        //    var Cities = currentRow.find("td:eq(3)").text();
        //    var Area = currentRow.find("td:eq(4)").text();

        //    $("#txtDropLocationAddress").val(Address);
        //    $("#txtDropLocationCity").val(Cities);
        //    $("#txtDropLocationName").val(Name);
        //    $("#txtDropLocationArea").val(Area);
        //    $("#txtDropLocationProvince").val(Province);
        //    $("#tblDropLocation").addClass("hidden");

        //});
        $(document).on('click', 'tr.PickLocationSearch', function (e) {
            e.preventDefault();
            debugger;
            if ($("#hfFocusFrom").val() == "pickup") {
                var currentRow = $(this).closest("tr");
                var Address = currentRow.find("td:eq(5)").text();
                var Name = currentRow.find("td:eq(1)").text();
                var Code = currentRow.find("td:eq(0)").text();
                var Province = currentRow.find("td:eq(2)").text();
                var Cities = currentRow.find("td:eq(3)").text();
                var Area = currentRow.find("td:eq(4)").text();
                var Area = currentRow.find("td:eq(6)").text().trim();
                var Area = currentRow.find("td:eq(7)").text().trim();
                var Area = currentRow.find("td:eq(8)").text().trim();
                $("#txtPickLocationAddress").val(Address);
                $("#txtPickLocationCity").val(Cities);
                $("#txtPickLocationName").val(Name);
                $("#txtPickLocationSearch").val(Code);
                $("#txtPickLocationArea").val(Area);
                $("#txtPicLocationProvince").val(Province);
                $("#tblPickLocation").addClass("hidden");
                $("#txtDropLocationSearch").focus();
            }
            else if ($("#hfFocusFrom").val() == "drop") {
                var currentRow = $(this).closest("tr");
                var Address = currentRow.find("td:eq(5)").text();
                var Name = currentRow.find("td:eq(1)").text();
                var Code = currentRow.find("td:eq(0)").text();
                var Province = currentRow.find("td:eq(2)").text();
                var Cities = currentRow.find("td:eq(3)").text();
                var Area = currentRow.find("td:eq(4)").text();

                $("#txtDropLocationAddress").val(Address);
                $("#txtDropLocationCity").val(Cities);
                $("#txtDropLocationName").val(Name);
                $("#txtDropLocationArea").val(Area);
                $("#txtDropLocationProvince").val(Province);
                $("#txtDropLocationSearch").val(Code);
                $("#tblPickLocation").addClass("hidden");
                $("#ContainerType").focus();
            }


        });
        $(document).on('click', 'tr.Search', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            // var ID = currentRow.find("td:eq(0)").text();
            var CompanyName = currentRow.find("td:eq(5)").text();
            var GroupName = currentRow.find("td:eq(2)").text();
            var DepartName = currentRow.find("td:eq(8)").text();
            var PersonName = currentRow.find("td:eq(11)").text();

            var GroupID = currentRow.find("td:eq(0)").find("input").val();
            var CompanyID = currentRow.find("td:eq(3)").find("input").val();
            var DepartID = currentRow.find("td:eq(6)").find("input").val();
            var PersonID = currentRow.find("td:eq(9)").find("input").val();

            //$("#hfSenderCompanyHirarchyID").val(ID);
            $("#ConisgmentSenderComp").val(CompanyName);
            $("#ConisgmentSenderGroup").val(GroupName);
            $("#ConisgmentSenderPerson").val(PersonName);
            $("#ConisgmentSenderDepart").val(DepartName);
            $("#ConisgmentSenderDepart").val(DepartName);

            $("#hfSenderCompanyID").val(CompanyID);
            $("#hfSenderGroupID").val(GroupID);
            $("#hfSenderDepartID").val(DepartID);
            $("#hfSenderPersonID").val(PersonID);

            $("#tblCosigmentInfo").addClass("hidden");
        })
        $(document).on('click', 'tr.SearchWithAll', function (e) {
            e.preventDefault();
            var currentRow = $(this).closest("tr");
            // var ID = currentRow.find("td:eq(0)").text();
            var CompanyName = currentRow.find("td:eq(5)").text();
            var DepartName = currentRow.find("td:eq(8)").text();
            var Code = currentRow.find("td:eq(4)").text();
            var PersonName = currentRow.find("td:eq(11)").text();
            var CompanyID = currentRow.find("td:eq(3)").find("input").val();
            var DepartID = currentRow.find("td:eq(6)").find("input").val();
            var PersonID = currentRow.find("td:eq(9)").find("input").val();
            let ReciveFrom = $("#hfFocusFrom").val();
            if (ReciveFrom == "sender") {
                $("#ConisgmentSenderComp").val(CompanyName);
                $("#txtSearch").val(Code);
                $("#ConisgmentSenderPerson").val(PersonName);
                $("#ConisgmentSenderDepart").val(DepartName);

                $("#hfSenderCompanyID").val(CompanyID);
                $("#hfSenderDepartID").val(DepartID);
                $("#hfSenderPersonID").val(PersonID);
                $("#txtConsigmentReciverSearch").focus();
            }
            else if (ReciveFrom == "reciver") {
                $("#txtConsigmentReciverCompany").val(CompanyName);
                $("#txtConsigmentReciverPerson").val(PersonName);
                $("#txtConsigmentReciverDepart").val(DepartName);
                $("#txtConsigmentReciverSearch").val(Code);

                $("#hfReciverCompanyID").val(CompanyID);
                $("#hfReciverDepartID").val(DepartID);
                $("#hfReciverPersonID").val(PersonID);
                $("#txtBillToSearch").focus();
            }
            else if (ReciveFrom == "billto") {
                $("#txtBillToComp").val(CompanyName);
                $("#txtBillToPerson").val(PersonName);
                $("#txtBillToDepart").val(DepartName);
                $("#txtBillToSearch").val(Code);

                $("#hfBilltoCompanyID").val(CompanyID);
                $("#hfBilltoDepartID").val(DepartID);
                $("#hfBilltoPersonID").val(PersonID);
                $("#txtAgentSearch").focus();
                $("#BillingType").focus();
            }
            else if (ReciveFrom == "agent") {
                $("#AgentCompany").val(CompanyName);
                $("#AgentPerson").val(PersonName);
                $("#AgentDepart").val(DepartName);
                $("#txtAgentSearch").val(Code);

                $("#hfAgentCompanyID").val(CompanyID);
                $("#hfAgentDepartID").val(DepartID);
                $("#hfAgentPersonID").val(PersonID);
                $("#BillingType").focus();
            }

            $("#tblSearchWithAllTags").addClass("hidden");
        })
        function ResetPickup() {
            $("#txtPickLocationAddress").val('');
            $("#txtPickLocationCity").val('');
            $("#txtPickLocationName").val('');
            $("#txtPickLocationArea").val('');
            $("#txtPicLocationProvince").val('');
        }
        function ResetDrop() {
            $("#txtDropLocationAddress").val('');
            $("#txtDropLocationCity").val('');
            $("#txtDropLocationName").val('');
            $("#txtDropLocationArea").val('');
            $("#txtDropLocationProvince").val('');
        }
        //$(document).on('keypress', function (e) {
        //    e.preventDefault();
        //    if (e.which == 9) {
        //        alert();
        //    }
        //});




        $("#ForCustomerInfo").click(function () {
            debugger;
            SavePartialBilty(".customer_info", "#ForCustomerInfo", "#txtSearch");
            $('html, body').animate({
                scrollTop: $("#ForLocationInfo").offset().top
            }, 2000);
            $("#btnSaveBilty").removeClass("hidden");
        });

        $("#ForLocationInfo").click(function () {

            SavePartialBilty(".location_info", "#ForLocationInfo", "#txtPickLocationSearch");
            $('html, body').animate({
                scrollTop: $("#ForLocationInfo").offset().top
            }, 2000);

        });

        $("#ForCosigmentInfo").click(function () {
            debugger;
            if ($("#ShippingType").val().search("Containerized") != -1) {
                SavePartialBilty(".cosigment_info", "#ForCosigmentInfo", "#txtSearchContainerType");
            }
            else {
                SavePartialBilty(".product_info", "#ForProductInfo", "#txtProductSearch");
            }
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //if ($("#ShippingType").val().search("Containerized") != -1) {
            //    $(this).hide();
            //    $(".cosigment_info").show("slow");
            //     $('html, body').animate({
            //       scrollTop: $("#ForVehicleInfo").offset().top
            //     }, 1000);

            //}
            //else {

            //    $(this).hide();
            //    $(".Vehicle_info").show("slow");
            //    $("#txtSearchVehicleInfo").focus();
            //     $('html, body').animate({
            //       scrollTop: $("#ForProductInfo").offset().top
            //     }, 1000);
            //}
            // $("#txtSearchContainerType").focus();



        });

        $("#ForVehicleInfo").click(function () {
            SavePartialBilty(".Vehicle_info", "#ForVehicleInfo", "#txtSearchVehicleInfo");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".Vehicle_info").show("slow");
            //$("#txtSearchVehicleInfo").focus();
            // $('html, body').animate({
            //       scrollTop: $("#ForProductInfo").offset().top
            //     }, 1000);

        });

        $("#ForProductInfo").click(function () {
            SavePartialBilty(".product_info", "#ForProductInfo", "#txtProductSearch");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".product_info").show("slow");
            //$("#txtProductSearch").focus();
            // $('html, body').animate({
            //       scrollTop: $("#ForDispatchInfo").offset().top
            //     }, 1000);
        });

        $("#ForDispatchInfo").click(function () {
            SavePartialBilty(".dispatch_info", "#ForDispatchInfo", "#txtSearchDipatchCode");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".dispatch_info").show("slow");
            //$("#ddlDocument").focus();
            // $('html, body').animate({
            //       scrollTop: $("#ForRecievingInfo").offset().top
            //     }, 1000);

        });

        $("#ForRecievingInfo").click(function () {
            SavePartialBilty(".Reciving_info", "#ForRecievingInfo", "#ddlRecieveBy");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".Reciving_info").show("slow");
            //$("#ddlRecieveBy").focus();
            //  $('html, body').animate({
            //       scrollTop: $("#ForReimbursableInfo").offset().top
            //     }, 1000);
        });


        $("#ForRecDocumentInfo").click(function () {
            SavePartialBilty(".document_info", "#ForRecDocumentInfo", "#ddlDocumentRecive");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".document_info").show("slow");
            //  $('html, body').animate({
            //       scrollTop: $("#ForReimbursableInfo").offset().top
            //     }, 1000);

        });

        $("#ForDamageInfo").click(function () {

            SavePartialBilty(".damage_info", "#ForDamageInfo", "#ddlProduct");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".expense_info").show("slow");
            //$("#ddlExpense").focus();
            // $('html, body').animate({
            //       scrollTop: $("#ForDamageInfo").offset().top
            //     }, 1000);

        });

        $("#ForReimbursableInfo").click(function () {
            SavePartialBilty(".expense_info", "#ForReimbursableInfo", "#ddlExpense");
            $('html, body').animate({
                scrollTop: $(this).offset().top
            }, 2000);
            //$(this).hide();
            //$(".damage_info").show("slow");
            //$(".productDamage").focus();

            // $('html, body').animate({
            //       scrollTop: $("#detailsDamageType").offset().top
            //     }, 1000);
        });

        $("#ForWhole").click(function () {
            SavePartialBilty("", "", "#btnSaveBilty");
        });

        $("#showAll").click(function () {
            debugger;
            $(".customer_info,.location_info,.Vehicle_info,.cosigment_info,.product_info,.dispatch_info,.Reciving_info,.document_info,.expense_info,.damage_info").show("slow");
            $("#ForCustomerInfo,#ForLocationInfo,#ForCosigmentInfo,#ForVehicleInfo,#ForProductInfo,#ForDispatchInfo,#ForRecievingInfo,#ForRecDocumentInfo,#ForReimbursableInfo,#ForDamageInfo").hide();
            //if ($("#ShippingType").val().search("Containerized") != -1) {
            //    $("").show();
            //}
            let shippingType = $("#ShippingType").val() == null ? "" : $("#ShippingType").val();
            if (shippingType.search("Import") != -1) {
                $("#AgentLine").show();
            }
            else if (shippingType.search("Export") != -1) {
                $("#AgentLine").show();
            }
            else {
                $("#AgentLine").hide();

            }


        });

        $(document).on("focus", "input.txtContainerNo", function (e) {
            e.preventDefault();
            $(this).mask("aaaa-999999-9");
        });
        //$(document).on("focus", "input.txtRegNo", function (e) {
        //    e.preventDefault();
        //    $(this).mask("aa-9999");
        //});
        $(document).on("blur", "input.txtRegNo", function (e) {
            e.preventDefault();
            debugger;
            let $row = $(this).parent("td").parent("tr").closest("tr");
            $("#hfSearchVehicle").val($row.index());
            if ($("#VehicleQuantity").text() == "1") {
                let x = $(this).val();
                $("#detailsVehicle tbody tr:eq(0) td:eq(3)").text(x);
            }
        });
        var regExp = /[a-z]/i;
        $('.MakeDate').on('keydown keyup', function (e) {
            var value = String.fromCharCode(e.which) || e.key; txtRegNo
            // No letters
            if (regExp.test(value)) {
                e.preventDefault();
                return false;
            }
        });

        function processText(inputText) {
            var output = [];
            var json = inputText.split(' ');
            json.forEach(function (item) {
                output.push(item.replace(/\'/g, '').split(/(\d+)/).filter(Boolean));
            });
            return output;
        }
        $(document).on("blur", "input.txtRegNo", function () {

            var inputText = $(this).val();
            var Join = "";
            for (var i = 0; i < JSON.stringify(processText(inputText)[0].length); i++) {
                Join += processText(inputText)[0][i];
                Join += "-";
            }
            Join = Join.substring(0, Join.length - 1);
            $(this).val(Join);


        });
        $(document).on("blur", "input.searchBroker", function (e) {
            e.preventDefault();
            if ($(this).val() != "") {
                var $self = $(this);
                $.ajax({
                    url: ControllerUrl + 'SearchBroker',
                    type: 'POST',
                    dataType: 'json',
                    data: { Keyword: $(this).val() },
                    success: function (data) {
                        debugger;
                        if (data.Broker.length > 0) {
                            debugger;
                            //let name = data.Broker[0].Name;
                            //$(this).val(name);
                            $self.val(data.Broker[0].Name);

                        }
                        else {

                            $("#btnSaveBroker").focus();
                            $("#btnSaveBroker").tooltip({
                                disabled: true
                            }).on("focus", function () {
                                $(this)
                                    .tooltip("enable")
                                    .tooltip("open");
                            }).on("blur", function () {
                                $(this)
                                    .tooltip("close")
                                    .tooltip("disable");
                            });
                        }

                    },
                    error: function (xhr) {
                        alert("Error data not refresh");
                    }
                });
            }

        });
        $(document).on("keydown", "input.searchBroker", function (e) {

            var keyCode = e.keyCode || e.which;
            if (keyCode == 9) {
                e.preventDefault();
                if (e.shiftKey) {


                }
                else {

                    if ($(this).val() != "") {
                        var $self = $(this);
                        $.ajax({
                            url: ControllerUrl + 'SearchBroker',
                            type: 'POST',
                            dataType: 'json',
                            data: { Keyword: $(this).val() },
                            success: function (data) {
                                debugger;
                                if (data.Broker.length > 0) {
                                    debugger;
                                    //let name = data.Broker[0].Name;
                                    //$(this).val(name);
                                    $self.val(data.Broker[0].Name);
                                    $("#btnSaveVehicleInfo").focus();
                                }
                                else {

                                    $("#addBrokers").focus();
                                    $("#addBrokers").tooltip({
                                        disabled: true
                                    }).on("focus", function () {
                                        $(this)
                                            .tooltip("enable")
                                            .tooltip("open");
                                    }).on("blur", function () {
                                        $(this)
                                            .tooltip("close")
                                            .tooltip("disable");
                                    });
                                }

                            },
                            error: function (xhr) {
                                alert("Error data not refresh");
                            }
                        });
                    }


                }

            }


        });


        $('#AsPerDispatch').change(function () {
            if (this.checked) {
                $('#btnAddProduct').attr("disabled", true);
                $('#txtSearchProductWithAll').attr("disabled", true);
                //$('#txtProductSearch').attr("disabled", true);
                //$('#txtItemQty').attr("disabled", true);
                //$('#lblTotalPkgQty').hide();
                //$('#lblTotalitemQty').hide();
                //$('#lblTotalWeight').hide();
                //$('#txtProductSearch').val('');
                $(".hideProduct").hide();
                ResetProduct();
                $("#detailsProduct tbody").html('');
            }
            else {
                $(".hideProduct").show();
                $('#btnAddProduct').attr("disabled", false);
                $('#txtSearchProductWithAll').attr("disabled", false);


            }

        });
        $("#addBrokers").click(function () {
            $("#modal-add-broker").modal("show");
        });

        $("#btnSaveBroker").click(function () {
            let code = $("#Code").val();
            let name = $("#Name").val();
            $.ajax({
                url: "../Home/addBroker",
                type: 'POST',
                data: { Code: code, Name: name },
                success: function (res) {
                    alert(res.msg);
                    $("#modal-add-broker").modal('hide');
                }
            });
        });
        $(".DIVcontainerDetails").hide();


        $("#btnSaveContainerInfo").click(function () {
            MakeSummary();
        });

        $("#btnSaveVehicleInfo").click(function () {
            MakeVehicleSummary();
        });
        function MakeSummary() {
            debugger;
            let isValid = 0;
            let qtyCount = 0;
            let loopStart = 0;
            let oblic = 0;
            let infoTable = $("#modalTable");
            let summaryTable = $("#detailsTable");
            let rows = summaryTable.find("tbody tr").length;
            for (var i = 0; i < rows; i++) {
                let qty = summaryTable.find("tbody").find(`tr:eq(${i})`).find("td:eq(1)").text().trim();
                qtyCount += parseInt(qty);
                for (var j = loopStart; j < qtyCount; j++) {
                    let isDataExist = infoTable.find(`tbody tr:eq(${j}) td:eq(2) input`).val().trim();
                    if (isDataExist != "")
                        oblic++;
                    isValid += customValidate(j);
                }
                summaryTable.find(`tbody tr:eq(${i}) td:eq(3) label label:eq(0)`).text(oblic);
                if (isValid != qtyCount) {
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).addClass("fa fa-exclamation-triangle");
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).removeClass("hidden");
                }
                else {
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).removeClass("fa fa-exclamation-triangle");
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).addClass("hidden");
                }


                oblic = 0;
                loopStart += parseInt(qty);
            }

        }
        function MakeVehicleSummary() {
            debugger;
            let isValid = 0;
            let qtyCount = 0;
            let loopStart = 0;
            let oblic = 0;
            let infoTable = $("#VehiclemodalTable");
            let summaryTable = $("#detailsVehicle");
            let rows = summaryTable.find("tbody tr").length;
            for (var i = 0; i < rows; i++) {
                let qty = summaryTable.find("tbody").find(`tr:eq(${i})`).find("td:eq(1)").text().trim();
                qtyCount += parseInt(qty);
                for (var j = loopStart; j < qtyCount; j++) {
                    var isDataExist = infoTable.find(`tbody tr:eq(${j}) td:eq(2) input`).val().trim();

                    if (isDataExist != "")
                        oblic++;
                    isValid += VehicleCustomValidate(j);
                }
                summaryTable.find(`tbody tr:eq(${i}) td:eq(2) label label:eq(0)`).text(oblic);
                if (isValid != qtyCount) {
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).addClass("fa fa-exclamation-triangle");
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).removeClass("hidden");
                }
                else {
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).removeClass("fa fa-exclamation-triangle");
                    summaryTable.find(`tbody tr:eq(${i}) td:eq(0) i`).addClass("hidden");
                }


                oblic = 0;
                loopStart += parseInt(qty);
            }

        }
        function VehicleCustomValidate(index) {
            debugger;
            let row = $(`#VehiclemodalTable tbody tr:eq(${index})`);
            let Cell = row.find("td:eq(3) input").val().trim();
            let DriverName = row.find("td:eq(4) input").val().trim();
            let Father = row.find("td:eq(5) input").val().trim();
            let NIC = row.find("td:eq(6) input").val().trim();
            let License = row.find("td:eq(7) input").val().trim();
            let Broker = row.find("td:eq(8) input").val().trim();
            if (Cell != "" && DriverName != "" && Father != "" && NIC != "" && License != "" && Broker != "") {
                return 1;
            }
            else {
                return 0;
            }
        }

        function customValidate(index) {
            debugger;
            let row = $(`#modalTable tbody tr:eq(${index})`);
            let weight = row.find("td:eq(3) input").val().trim();
            let pick = row.find("td:eq(4) select").val().trim();
            let drop = row.find("td:eq(5) select").val().trim();
            let vessel = row.find("td:eq(6) input").val().trim();
            if (weight != "" && pick != "" && drop != "" && vessel != "") {
                return 1;
            }
            else {
                return 0;
            }
        }


        var ThisRowToEdit = ["empty", "empty"];
        $("#btnAddContainerType").click(function (e) {
            e.preventDefault();
            if ($.trim($("#ContainerType").val()) == "" || $.trim($("#Quantity").val()) == "") {
                Notification("Please Select Container Type and enter quantity", "error");
            }
            else {
                debugger;
                var Container = $("#ContainerType").val(),
                    Quantity = $("#Quantity").val(),
                    TotalWeight = $("#TotalWeight").val(),
                    ContainerTypeID = $("#hfContainerTypeID").val(),
                    detailsTableBody = $("#detailsTable tbody");

                for (var i = 0; i < $("#detailsTable tbody tr").length; i++) {
                    if ($("#detailsTable tbody tr:eq(" + i + ") td:eq(0)").text() == Container) {
                        Quantity = parseInt($("#detailsTable tbody tr:eq(" + i + ") td:eq(1)").text()) + parseInt(Quantity);
                        $("#detailsTable tbody tr:eq(" + i + ") td:eq(1)").text(Quantity);
                        $("#detailsTable tbody tr:eq(" + i + ") td:eq(3) label label:eq(0)").text(Quantity);
                        clearItem();
                        $("#txtSearchContainerType").focus();
                        $("#txtSearchContainerType").val('');
                        if ($("#modalTable tbody tr").length > 0) {
                            $("#ContainerTypeInfo").addClass("hidden");
                            $("#UpdateContainerTypeInfo").removeClass("hidden");
                        }
                        return;
                    }
                }

                if (ThisRowToEdit[0] != "empty" && ThisRowToEdit[1] == "container") {
                    // var ContainerItem = '<tr class="rows"><td>' + Container + '</td><td>' + Quantity + '</td><td>' + TotalWeight + '</td>   <td><a data-itemId="0" href="#" class="btn btn-danger btn-xs deleteItem"><i class="fa fa-trash"></i></a><a data-itemId="0" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fa fa-pencil"></i></a> <input type="hidden" value="' + ContainerTypeID + '" /></td>  </tr>';
                    detailsTableBody.find("tr:eq(" + ThisRowToEdit[0] + ")").find('td:eq(0)').text(Container);
                    detailsTableBody.find("tr:eq(" + ThisRowToEdit[0] + ")").find('td:eq(1)').text(Quantity);
                    detailsTableBody.find("tr:eq(" + ThisRowToEdit[0] + ")").find('td:eq(2)').text(TotalWeight);
                    detailsTableBody.find("tr:eq(" + ThisRowToEdit[0] + ")").find('td:eq(4)').text(ContainerTypeID);
                    ThisRowToEdit[0] = "empty";
                    ThisRowToEdit[1] = "empty";
                }
                else {
                    var ContainerItem = '<tr class="rows"><td>' + Container + '</td><td><label></label><label><label>' + Quantity + '</td><td>' + TotalWeight + '</td> <td><label class="label label-info"><label>0</label>/<label>' + Quantity + '</label></label> </td>  <td><a data-itemId="2" href="#" class="btn btn-danger btn-xs deleteItem"><i class="fa fa-trash"></i></a><a data-itemId="0" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fa fa-pencil"></i></a> <input type="hidden" value="' + ContainerTypeID + '" /></td> <td class="hidden"><i style="font-size:18px;color:red"></i></td> </tr>';
                    detailsTableBody.append(ContainerItem);
                }
                $("#txtSearchContainerType").focus();
                $("#txtSearchContainerType").val('');
                if ($("#modalTable tbody tr").length > 0) {
                    $("#ContainerTypeInfo").addClass("hidden");
                    $("#UpdateContainerTypeInfo").removeClass("hidden");
                }
                clearItem();



            }

        });

        $("#UpdateContainerTypeInfo").click(function () {
            let Rowindex = 0
            let row = $("#detailsTable tbody tr");
            debugger;
            for (var i = 0; i < row.length; i++) {
                let totalRowsGot = 0;
                let containerType = row.eq(i).find("td:eq(0)").text().trim();
                let qty = row.eq(i).find("td:eq(1)").text().trim();
                let weight = row.eq(i).find("td:eq(2)").text().trim();
                let ContainerID = row.eq(i).find("td:eq(3)").val().trim();
                let InfoTable = $("#modalTable tbody tr");
                for (var j = 0; j < InfoTable.length; j++) {
                    if (InfoTable.eq(j).find("td:eq(1)").find("input").val().trim() == containerType) {
                        totalRowsGot++;
                        let $row = InfoTable.eq(j).closest("tr");
                        Rowindex = $row.index();
                    }
                }
                //Rowindex += totalRowsGot - 1;
                totalRowsGot = parseInt(qty) - totalRowsGot;
                for (var k = 0; k < totalRowsGot; k++) {
                    $("#modalTable tbody tr:eq(" + Rowindex + ")").after('<tr> <td id="sno"> </td>   <td><input type="text" id="txtContainerType" readonly style="width: 180px;" value="' + containerType + '" /></td>   <td><input type="text" class="txtContainerNo" style="width: 108px;" placeholder="Like: CBID-123456-1" /></td>  <td><input type="text" id="txtContainerWeight" style="width: 108px;" /></td>  <td> <select onchange="SelectPickDropLocation(this)" class="UpdatedPickDropSelect" > </select> <label> </label> </td>  <td> <select class="UpdatedPickDropSelect" onchange="SelectPickDropLocation(this)" > </select> <label> </label> </td>   <td><input type="text" style="width: 108px;" id="txtVesselName" /></td>  <td><input type="text" id="txtRemarks" style="width: 108px;" /></td> <td> <input type="hidden" value="' + ContainerID + '"> </td>  <td><select class="ddlAssignVehicle"></select>  </td>  </tr>');
                }

            }
            $.ajax({
                url: ControllerUrl + "GetPickandDropLocation",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('.UpdatedPickDropSelect').html('');
                    var z = 0;
                    $.each(data.LocationTextList, function (index, value) {
                        $('.UpdatedPickDropSelect').append($('<option>').text(value).attr('value', data.LocationValuesList[z]));
                        z++;
                    });
                }
            });
            debugger;
            //var ModalTable = $("#modalTable tbody");
            //for (var i = 0; i < ModalTable.find("tr").length; i++) {
            //    let pickId = ModalTable.find("tr:eq(" + i + ") td:eq(4) input").val();
            //    let dropId = ModalTable.find("tr:eq(" + i + ") td:eq(5) input").val();
            //    ModalTable.find("tr:eq(" + i + ") td:eq(4)").find("#UpdatedPickDropSelect" + i + " ").val(5);

            //}
            ApplySerial("modalTable");
            $("#modal-add-Containerinfo").modal('show');
            focused('modalTable', 2);
        });
        $("#ContainerTypeInfo").click(function () {
            if ($("#detailsTable tbody tr").length == 0) {
                alert('Add container type first');
            }
            else {
                var obj = [];
                var RowsCount = $("#detailsTable tbody tr").length;
                for (var i = 0; i < RowsCount; i++) {
                    var ContainerType = $("#detailsTable tbody tr:eq('" + i + "') td:eq(0)").text();
                    var Quantity = $("#detailsTable tbody tr:eq('" + i + "') td:eq(1)").text();
                    var TotalWeight = $("#detailsTable tbody tr:eq('" + i + "') td:eq(2)").text();
                    obj.push({ type: ContainerType, Qty: Quantity, Weight: TotalWeight });

                }
                $("#modalTable tbody").html('');
                $.ajax({
                    url: ControllerUrl + "GetPickandDropLocation",
                    type: 'GET',
                    dataType: 'json',
                    success: function (data) {
                        if ($("#ShippingType").val().search("Import") != -1) {
                            $("#pickHeading").hide();
                            var RowsInputs = '<tr> <td id="sno"> </td>   <td><input type="text" readonly id="txtContainerType" style="width: 180px;" /></td>   <td><input type="text" class="txtContainerNo" onclick="$(this).focus()" style="width: 108px;" placeholder="Like: CBID-123456-1" /></td>  <td><input type="text" id="txtContainerWeight" style="width: 108px;" /></td>  <td> <select onchange="SelectPickDropLocation(this)"  class="PickDropSelect">  </select><label> </label> </td>   <td><input type="text" style="width: 108px;" id="txtVesselName" /></td>  <td><input type="text" id="txtRemarks" style="width: 108px;" /></td> <td> <input type="hidden"> </td> <td><select class="ddlAssignVehicle"></select>  </td> </tr>';
                        }
                        else if ($("#ShippingType").val().search("Export") != -1) {
                            $("#dropHeading").hide();
                            var RowsInputs = '<tr> <td id="sno"> </td>   <td><input type="text" readonly id="txtContainerType" style="width: 180px;" /></td>   <td><input type="text" class="txtContainerNo" onclick="$(this).focus()" style="width: 108px;" placeholder="Like: CBID-123456-1" /></td>  <td><input type="text" id="txtContainerWeight" style="width: 108px;" /></td>  <td> <select onchange="SelectPickDropLocation(this)"  class="PickDropSelect"> </select><label> </label>  </td>   <td><input type="text" style="width: 108px;" id="txtVesselName" /></td>  <td><input type="text" id="txtRemarks" style="width: 108px;" /></td> <td> <input type="hidden"> </td>  <td><select class="ddlAssignVehicle"></select>  </td>  </tr>';
                        }
                        else {
                            var RowsInputs = '<tr> <td id="sno"> </td>   <td><input type="text" readonly id="txtContainerType" style="width: 180px;" /></td>   <td><input type="text" class="txtContainerNo" onclick="$(this).focus()" style="width: 108px;" placeholder="Like: CBID-123456-1" /></td>  <td><input type="text" id="txtContainerWeight" style="width: 108px;" /></td>  <td> <select onchange="SelectPickDropLocation(this)"  class="PickDropSelect" >  </select> <label> </label> </td>  <td> <select onchange="SelectPickDropLocation(this)" class="PickDropSelect"> </select> <label> </label> </td>   <td><input type="text" style="width: 108px;" id="txtVesselName" /></td>  <td><input type="text" id="txtRemarks" style="width: 108px;" /></td> <td> <input type="hidden"> </td>  <td><select class="ddlAssignVehicle"></select>  </td>  </tr>';
                        }

                        var x = 0;
                        var Sno = 0;
                        for (var i = 0; i < RowsCount; i++) {
                            Sno++
                            var EachRowQuantity = $("#detailsTable tbody tr:eq('" + i + "') td:eq(1)").text();
                            for (var j = 0; j < EachRowQuantity; j++) {
                                var _x = parseInt(j) + parseInt(x);
                                var ContainerTypeValue = $("#detailsTable tbody tr:eq('" + i + "') td:eq(0)").text();
                                var ContainerTypeIDs = $("#detailsTable tbody tr:eq('" + i + "') td:eq(4)").find("input").val();
                                $("#modalTable tbody").append(RowsInputs);
                                $("#modalTable tbody tr:eq('" + _x + "') td:eq(1) input").val(ContainerTypeValue);
                                $("#modalTable tbody tr:eq('" + _x + "') td:eq(8) input").val(ContainerTypeIDs);
                                $("#modalTable tbody tr:eq('" + _x + "') td:eq(0)").text(_x + 1);

                            }
                            x += parseInt(EachRowQuantity);


                        }
                        var z = 0;
                        $.each(data.LocationTextList, function (index, value) {
                            $('.PickDropSelect').append($('<option>').text(value).attr('value', data.LocationValuesList[z]));
                            z++;
                        });
                        var ContainerRows = $("#modalTable tbody tr").length;
                        var VehicleTableRows = $("#VehiclemodalTable tbody tr").length;
                        if (VehicleTableRows > 0) {
                            var Table = $("#tblAssignVehicle tbody");
                            var VehicleTypeList = [];
                            Table.html('');
                            for (var i = 0; i < VehicleTableRows; i++) {
                                var VehicleSize = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(1)").find("input").val();
                                VehicleSize = VehicleSize.replace(VehicleSize.substr(0, VehicleSize.lastIndexOf(':') + 1), "").replace(")", "").trim();
                                var RegNo = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val();
                                //RegNo += " (Size : " + VehicleSize + ")";
                                VehicleTypeList.push(RegNo);
                            }
                            $.each(VehicleTypeList, function (index, value) {
                                // $('.vehicleTypes').append($('<option>').text(value));
                                $('.ddlAssignVehicle').append($('<option>').text(value));
                            });
                        }

                    },
                    error: function (response) {
                        alert('an error occured');
                    }

                });
                $(this).addClass("hidden");
                $("#UpdateContainerTypeInfo").removeClass("hidden");
                //$(".DIVcontainerDetails").show();
                ApplySerial("modalTable");


                $("#modal-add-Containerinfo").modal('show');
                focused('modalTable', 2);
            }

            //$("#modalTable tbody tr:eq(0) td:eq(3)").focus();


        });
        let focused = (tableId, inputIndex) => {
            setTimeout(function () { $(document).find(`#${tableId} tbody tr:eq(0) td:eq(${inputIndex}) input`).focus(); }, 1000);
        }


        $("#btnUpdateVehicleInfo").click(function () {
            debugger;
            let Rowindex = 0
            let row = $("#detailsVehicle tbody tr");
            debugger;
            for (var i = 0; i < row.length; i++) {
                let totalRowsGot = 0;
                //let RegNo = row.eq(i).find("td:eq(3)").text().trim();
                let VehicleType = row.eq(i).find("td:eq(0)").text().trim();
                let qty = row.eq(i).find("td:eq(1)").text().trim();
                // let ContainerID = row.eq(i).find("td:eq(3)").val().trim();
                let InfoTable = $("#VehiclemodalTable tbody tr");
                for (var j = 0; j < InfoTable.length; j++) {
                    if (InfoTable.eq(j).find("td:eq(1)").find("input").val().trim() == VehicleType) {
                        totalRowsGot++;
                        let $row = InfoTable.eq(j).closest("tr");
                        Rowindex = $row.index();
                    }
                }
                //Rowindex += totalRowsGot - 1;
                totalRowsGot = parseInt(qty) - totalRowsGot;
                for (var k = 0; k < totalRowsGot; k++) {
                   // $("#VehiclemodalTable tbody tr:eq(" + Rowindex + ")").after('<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" readonly value="' + VehicleType + '" style="width: 180px;" /></td>   <td><input type="text" class="txtRegNo" value="' + RegNo + '" style="width: 108px;" /></td>     <td><input type="text" class="txtContactNo" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text"  style="width: 108px;" /> </td>  <td> <input type="text" class="txtNICno" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>  <td> <input type="text" id="txtSearchBroker" class="searchBroker"/> </td>   </tr>');
                    $("#VehiclemodalTable tbody tr:eq(" + Rowindex + ")").after('<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" readonly value="' + VehicleType + '" style="width: 180px;" /></td>   <td><input type="text" class="txtRegNo" style="width: 108px;" /></td>     <td><input type="text" class="txtContactNo" style="width: 108px;" /></td>  <td> <input type="text" id="txtFathername" style="width: 108px;" /> </td>    <td> <input type="text"  style="width: 108px;" /> </td>  <td> <input type="text" class="txtNICno" style="width: 108px;" /> </td>  <td> <input type="text" id="txtDriverCell" style="width: 108px;" /> </td>  <td> <input type="text" id="txtSearchBroker" class="searchBroker"/> </td>   </tr>');
                }

            }
            $.ajax({
                url: ControllerUrl + "GetPickandDropLocation",
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    var z = 0;
                    $.each(data.LocationTextList, function (index, value) {
                        $('.UpdatedPickDropSelect').append($('<option>').text(value).attr('value', data.LocationValuesList[z]));
                        z++;
                    });
                }
            });
            ApplySerial("VehiclemodalTable");
            $("#modal-add-VehicleInfo").modal('show');
            focused('VehiclemodalTable', 2);
        });
        function SearchRegNo(value, Table, rowClass) {
            if (value != "") {
                $.ajax({
                    url: '../Home/getVehicleReg',
                    type: 'POST',
                    data: { Prefix: value },
                    success: function (data) {
                        debugger;
                        $(`${Table} tbody`).html('');
                        for (var i = 0; i < data.length; i++) {
                            let row = `<tr class='${rowClass}'> <td><input type='hidden' value='${data[i].VehicleID}'> </td> <td>${data[i].RegNo}</td> </tr>`;
                            $(`${Table} tbody`).append(row);


                        }
                        $(Table).removeClass("hidden");
                    },
                })

            }
            else {
                $(Table).addClass("hidden");
            }
        }
        $("#Regno").keyup(function () {
            debugger;
            if ($("#isExternal").val() == "External") {

            }
            else {
                let value = $(this).val().trim();
                SearchRegNo(value, "#tblRegNo", "SearchRegNo");

            }
        });
        $(document).on("keyup", "input.txtRegNo", function () {
            let value = $(this).val();
            SearchRegNo(value, ".tblRegNo", "SearchRegNoInModal");
        });


    });
    let ChangeQty = (step) => {
        let qty = $("#VehicleQuantity");
        if (step == "up") {
            qty.text(parseInt(qty.text()) + 1);
        }
        else if (step == "down") {
            if (qty.text() != "1") {
                qty.text(parseInt(qty.text()) - 1);
            }
        }
        if (qty.text() == "1") {
            $("#isExternal").attr("readonly", false);
            $("#Regno").attr("readonly", false);
        }
        else {
            $("#isExternal").attr("readonly", true);
            $("#Regno").attr("readonly", true);
        }
    }
    let getOrderByID = () => {
        debugger;
        let getid = getUrlVars()["id"];
        if (getid != undefined) {
            $.ajax({
                url: "../Home/ViewBiltyPage",
                type: 'POST',
                data: { OrderID: getid },
                success: function (res) {
                    debugger;
                    $("#hfWholeBiltyEdit").val(getid);
                    console.log(res);
                    if (res.model.Orders.Date != "") {
                        let Biltydate = new Date(parseInt(res.model.Orders.Date.substr(6)));
                        $("#BiltyDate").val(Biltydate.toDateString());
                    }

                    if (res.model.Orders.OwnCompanyID != "") {
                        $("#ddlOwnCompany").val(res.model.Orders.OwnCompanyID);
                    }
                    $("#ddlCustomerType").val(res.model.Orders.PaidToPay);

                    //------------CUSTOMER INFORMATION------------------------
                    $("#BiltyNoManual").val(res.model.Orders.OrderNoManual);
                    $("#hfSenderCompanyID").val(res.model.Orders.Hirarchysendercompanyid);
                    $("#hfSenderDepartID").val(res.model.Orders.Hirarchysenderdepartid);
                    $("#hfSenderPersonID").val(res.model.Orders.Hirarchysenderpersonid);
                    $("#hfSenderCompHierarchyID").val(res.model.Orders.SenderCompanyID);
                    $("#ConisgmentSenderComp").val(res.model.Orders.SenderCompany);
                    debugger;
                    if (res.model.SenderCompany != null)
                        $("#txtSearch").val(res.model.SenderCompany.CompanyCode);
                    $("#hfReciverCompanyID").val(res.model.Orders.Hirarchyrecivercompanyid);
                    $("#hfReciverDepartID").val(res.model.Orders.Hirarchyreciverdepartid);
                    $("#hfReciverPersonID").val(res.model.Orders.Hirarchyreciverpersonid);
                    $("#hfReciverCompHierarchyID").val(res.model.Orders.ReceiverCompanyID);
                    $("#txtConsigmentReciverCompany").val(res.model.Orders.ReceiverCompany);
                    if (res.model.ReciverCompany != null) {
                        $("#txtConsigmentReciverSearch").val(res.model.ReciverCompany.CompanyCode);
                    }
                    $("#hfBilltoCompanyID").val(res.model.Orders.Hirarchybillcompanyid);
                    $("#hfBilltoDepartID").val(res.model.Orders.Hirarchybilldepartid);
                    $("#hfBilltoPersonID").val(res.model.Orders.Hirarchybillpersonid);
                    $("#hfBilltoCompHierarchyID").val(res.model.Orders.CustomerCompanyID);
                    $("#txtBillToComp").val(res.model.Orders.BillToCustomerCompany);
                    if (res.model.ReciverCompany != null) {
                        $("#txtBillToSearch").val(res.model.BillToCompany.CompanyCode);
                    }

                    $("#hfAgentCompanyID").val(res.model.Orders.Hirarchyagentcompanyid);
                    $("#hfAgentDepartID").val(res.model.Orders.Hirarchyagentdepartid);
                    $("#hfAgentPersonID").val(res.model.Orders.Hirarchyagentpersonid);
                    $("#hfAgentCompHierarchyID").val(res.model.Orders.ClearingAgent);
                    $("#AgentCompany").val(res.model.Orders.ClearingAgentName);
                    if (res.model.AgentCompany != null) {
                        $("#txtAgentSearch").val(res.model.AgentCompany.CompanyCode);
                    }
                    //---------------------- ------------------ --------------------
                    $("#BillingType").val(res.model.Orders.PaymentType);
                    $("#ShippingType").val(res.model.Orders.ShipmentType);
                    let Loadingdate = new Date(parseInt(res.model.Orders.LoadingDate.substr(6)));
                    $("#LoadingDate").val(Loadingdate.toDateString());
                    //------------PICK LOCATION --------------
                    if (res.model.Orders.LocalPick) {
                        $("#cblocalpick").attr("checked", true);
                    }
                    if (res.model.Orders.LocalDrop) {
                        $("#cblocaldrop").attr("checked", true);
                    }
                    $("#txtPickLocationName").val(res.model.Orders.PickName);
                    $("#hfPickDropID").val(res.model.Orders.LocationID);
                    $("#txtPickLocationArea").val(res.model.Orders.PickArea);
                    $("#hfAreaID").val(res.model.Orders.AreaID);
                    $("#txtPickLocationCity").val(res.model.Orders.PickCity);
                    $("#hfCityID").val(res.model.Orders.CityID);
                    $("#txtPickLocationAddress").val(res.model.Orders.PickAddress);
                    $("#txtPickLocationSearch").val(res.model.PickLocation.PickDropCode);
                    if (res.model.PickLocation != null) {
                        $("#txtPickLocationSearch").val(res.model.PickLocation.PickDropCode);
                    }
                    //-------------------DROP LOCATION-----------------------
                    $("#txtDropLocationName").val(res.model.Orders.DropName);
                    $("#hfDropID").val(res.model.Orders.DropLocationID);
                    $("#txtDropLocationArea").val(res.model.Orders.DropArea);
                    $("#hfDropAreaID").val(res.model.Orders.DropAreaID);
                    $("#txtDropLocationCity").val(res.model.Orders.DropCity);
                    $("#hfDropCityID").val(res.model.Orders.DropCityID);
                    $("#txtDropLocationAddress").val(res.model.Orders.DropAddress);
                    if (res.model.DropLocation != null) {
                        $("#txtDropLocationSearch").val(res.model.DropLocation.PickDropCode);
                    }
                    //---------------- Vehicle INFORMATION-----------
                    //lstOrderVehcicle
                    for (var i = 0; i < res.model.lstOrderVehcicle.length; i++) {
                        let row = '<tr style="width:300px"> <td id="sno"> </td>   <td><input type="text" id="txtVehicleType" readonly value="' + res.model.lstOrderVehcicle[i].VehicleType + '" style="width: 180px;" /></td>   <td><input type="text" class="txtRegNo" value="' + (res.model.lstOrderVehcicle[i].VehicleRegNo == null ? "" : res.model.lstOrderVehcicle[i].VehicleRegNo) + '" style="width: 108px;" /></td>     <td><input type="text" class="txtContactNo" value="' + (res.model.lstOrderVehcicle[i].VehicleContactNo == 0 || res.model.lstOrderVehcicle[i].VehicleContactNo == null ? "" : res.model.lstOrderVehcicle[i].VehicleContactNo) + '" style="width: 108px;" /></td> <td> <input type="text" id="txtFathername" value="' + (res.model.lstOrderVehcicle[i].DriverName == null ? "" : res.model.lstOrderVehcicle[i].DriverName) + '" style="width: 108px;" />  </td>  <td> <input type="text" id="txtFathername" value="' + (res.model.lstOrderVehcicle[i].FatherName == null ? "" : res.model.lstOrderVehcicle[i].FatherName) + '" style="width: 108px;" /> </td>    <td> <input type="text" value="' + (res.model.lstOrderVehcicle[i].DriverNIC == null ? "" : res.model.lstOrderVehcicle[i].DriverNIC) + '"  style="width: 108px;" /> </td>  <td> <input type="text" value="' + (res.model.lstOrderVehcicle[i].DriverLicence == null ? "" : res.model.lstOrderVehcicle[i].DriverLicence) + '" class="txtNICno" style="width: 108px;" /> </td>  <td> <input type="text" id="txtSearchBroker" value="' + (res.model.lstOrderVehcicle[i].BrokerID == null ? "" : res.model.lstOrderVehcicle[i].BrokerID) + '" class="searchBroker"/> </td>   </tr>';
                        $("#VehiclemodalTable tbody").append(row);
                        //let row = `<tr class="rows"><td> <i class="fa fa-exclamation-triangle"></i> ${res.model.lstOrderVehcicle[i].VehicleType} </td><td></td> <td>Internal</td> <td></td>  <td><a data-itemid="3" href="#" class="btn btn-xs btn-danger deleteItem"><i class="fa fa-trash"></i></a> <a data-item="vehicle" style="margin-left:2px" href="#" class="btn btn-xs btn-default EditItem"><i class="fas fa-edit"></i></a></td>  </tr>`;
                    }
                    for (var i = 0; i < res.model.lstOrderConsigment.length; i++) {

                        let pickID = res.model.lstOrderConsigment[i].PickupLocationID;
                        let dropID = res.model.lstOrderConsigment[i].DropoffLocationID;
                        let row = '<tr> <td id="sno"> </td>   <td><input type="text" id="txtContainerType" readonly style="width: 180px;" value="' + res.model.lstOrderConsigment[i].ContainerTypeName + '" /></td>   <td><input type="text" value="' + res.model.lstOrderConsigment[i].ContainerNo + '" class="txtContainerNo" style="width: 108px;" placeholder="Like: CBID-123456-1" /></td>  <td><input type="text" id="txtContainerWeight" value="' + (res.model.lstOrderConsigment[i].ContainerWeight == null ? "" : res.model.lstOrderConsigment[i].ContainerWeight) + '" style="width: 108px;" /></td>  <td> <select class="UpdatedPickDropSelect" id="UpdatedPickDropSelect' + i + '" > </select> <input type="hidden" value="' + pickID + '"> </td>  <td> <select class="UpdatedPickDropSelect"> </select> <input type="hidden" value="' + dropID + '"> </td>   <td><input type="text" style="width: 108px;" value="' + (res.model.lstOrderConsigment[i].VesselName == null ? "" : res.model.lstOrderConsigment[i].VesselName) + '" /></td>  <td><input type="text"  value="' + (res.model.lstOrderConsigment[i].Remarks == null ? "" : res.model.lstOrderConsigment[i].Remarks) + '" style="width: 108px;" /></td> <td> <input type="hidden" value="' + res.model.lstOrderConsigment[i].ContainerType + '"> </td>  <td><select class="ddlAssignVehicle"></select>  </td>  </tr>';

                        $("#modalTable tbody").append(row);
                        //$("#modalTable tbody tr:eq(" + i + ") td:eq(4) select").val(pickID);
                        //$("#modalTable tbody tr:eq(" + i + ") td:eq(5) select").val(dropID);

                        //setTimeout(function () {
                        //    $("#modalTable tbody tr:eq(" + i + ")").find("td:eq(4) select").val(res.model.lstOrderConsigment[i].PickupLocationID)
                        //    $("#modalTable tbody tr:eq(" + i + ")").find("td:eq(5) select").val(res.model.lstOrderConsigment[i].DropoffLocationID)
                        //},500)
                    }
                    for (var i = 0; i < res.model.lstOrderProduct.length; i++) {
                        let row = '<tr class="rows"><td>' + res.model.lstOrderProduct[i].PackageType + '</td><td>' + res.model.lstOrderProduct[i].ProductName + '</td> <td> ' + res.model.lstOrderProduct[i].Qty + ' </td> <td> ' + res.model.lstOrderProduct[i].Qty + ' </td> <td> ' + res.model.lstOrderProduct[i].TotalWeight + ' </td> <td><a data-itemId="0" href="#" class="deleteItem">Remove</a><input type="hidden" value="' + res.model.lstOrderProduct[i].ProductID + '"></td></tr>';
                        $("#detailsProduct tbody").append(row);
                    }
                    for (var i = 0; i < res.model.lstDispatchDocument.length; i++) {
                        let row = '<tr class="rows"><td>' + res.model.lstDispatchDocument[i].DocumentType + '</td><td>' + res.model.lstDispatchDocument[i].DocumentNo + '</td> <td> ' + res.model.lstDispatchDocument[i].DocumentName + ' </td> <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                        $("#detailsDispatchDocument tbody").append(row);
                    }
                    for (var i = 0; i < res.model.lstReceiveBy.length; i++) {
                        let date = new Date(parseInt(res.model.lstReceiveBy[i].Date.substr(6)));
                        let row = '<tr class="rows"><td>' + res.model.lstReceiveBy[i].RecieveBy + '</td><td>' + date.toDateString() + '</td> <td>' + res.model.lstReceiveBy[i].time + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                        $("#detailsReciveBy tbody").append(row);
                    }
                    for (var i = 0; i < res.model.lstDocumentReceiving.length; i++) {
                        let row = '<tr class="rows"><td>' + res.model.lstDocumentReceiving[i].DocumentType + '</td><td>' + res.model.lstDocumentReceiving[i].DocumentNo + '</td> <td> ' + res.model.lstDocumentReceiving[i].FileName + ' </td> <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                        $("#detailsReciveDocument tbody").append(row);
                    }
                    for (var i = 0; i < res.model.lstOrderDamage.length; i++) {
                        let row = '<tr class="rows"><td>' + res.model.lstOrderDamage[i].ItemName + '</td><td>' + res.model.lstOrderDamage[i].DamageType + '</td> <td>' + res.model.lstOrderDamage[i].DamageDocumentName + '</td> <td>' + res.model.lstOrderDamage[i].DamageCost + '</td> <td>' + res.model.lstOrderDamage[i].DamageCause + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                        $("#detailsDamageType tbody").append(row);
                    }
                    for (var i = 0; i < res.model.lstOrderReimursable.length; i++) {
                        let row = '<tr class="rows"><td>' + res.model.lstOrderReimursable[i].ExpenseType + '</td><td>' + res.model.lstOrderReimursable[i].Amount + '</td>  <td><a data-itemId="0" href="#" class="deleteItem">Remove</a></td></tr>';
                        $("#detailsReimursable tbody").append(row);
                    }
                    $("#detailsVehicle tbody");
                    $("#showAll").click();
                    $("#btnUpdateVehicleInfo").removeClass("hidden");
                    $("#UpdateContainerTypeInfo").removeClass("hidden");
                    $("#ContainerTypeInfo").addClass("hidden");
                    $("#btnSaveBilty").removeClass("hidden");


                }
            })
        }
    }
    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }
    function SavePartialBilty(ElementToFocus, ElementToHide, TextboxToFocus) {
        if ($("#ddlOwnCompany").val() == "0")
            alert('Select Own Company');
        else if ($("#BiltyNoManual").val() == "")
            alert('Enter Bilty no');
        else if ($("#BiltyDate").val() == "")
            alert('Enter Bilty Date');
        else {
            let status;
            //if ($("#BiltyNoManual").val().trim() == "") {
            //    alert("Record don't save! Enter bilty no");
            //    $("#BiltyNoManual").focus();
            //    return false;
            //}
            var SenderCompHierarchyID = $("#hfSenderCompHierarchyID").val();
            var SenderCompanyId = $("#hfSenderCompanyID").val();
            //var SenderGroupId = $("#hfSenderGroupID").val();
            var SenderDepartId = $("#hfSenderDepartID").val();
            var SenderPersonId = $("#hfSenderPersonID").val();
            var ReciverCompanyId = $("#hfReciverCompanyID").val();
            var ReciverCompHierarchyID = $("#hfReciverCompHierarchyID").val();
            // var ReciverGroupId = $("#hfReciverGroupID").val();
            var ReciverDepartId = $("#hfReciverDepartID").val();
            var ReciverPersonId = $("#hfReciverPersonID").val();
            var BilltoCompanyId = $("#hfBilltoCompanyID").val();
            var BilltoCompHierarchyID = $("#hfBilltoCompHierarchyID").val();
            //  var BilltoGroupId = $("#hfBilltoGroupID").val();
            var BilltoDepartId = $("#hfBilltoDepartID").val();
            var BilltoPersonId = $("#hfBilltoPersonID").val();
            var AgentCompanyId = $("#hfAgentCompanyID").val();
            var AgentCompHierarchyID = $("#hfAgentCompHierarchyID").val();
            // var ReciverGroupId = $("#hfReciverGroupID").val();
            var AgentDepartId = $("#hfAgentDepartID").val();
            var AgentPersonId = $("#hfAgentPersonID").val();
            //var PickUpProvince = $("#txtPicLocationProvince").val();
            //var PickUpCity = $("#txtPickLocationCity").val();
            //var PickUpArea = $("#txtPickLocationArea").val();
            //var PickUpName = $("#txtPickLocationName").val();
            //var PickUpAddress = $("#txtPickLocationAddress").val();
            //var DropProvince = $("#txtDropLocationProvince").val();
            //var DropCity = $("#txtDropLocationCity").val();
            //var DropArea = $("#txtDropLocationArea").val();
            //var DropName = $("#txtDropLocationName").val();
            //var DropAddress = $("#txtDropLocationAddress").val();
            var PickDropID = $("#hfPickDropID").val();
            var OwnCompany = $("#ddlOwnCompany").val();
            var CustomerType = $("#ddlCustomerType").val();
            var localpick;
            var localdrop;
            debugger;
            if ($("#cblocalpick").is(":checked"))
                localpick = true;
            else
                localpick = false;
            if ($("#cblocaldrop").is(":checked"))
                localdrop = true;
            else
                localdrop = false;
            var BiltyRemarks = $('#txtBiltyRemarks').val();
            var AreaID = $("#hfAreaID").val();
            var CityID = $("#hfCityID").val();
            var DropID = $("#hfDropID").val();
            var DropAreaID = $("#hfDropAreaID").val();
            var DropCityID = $("#hfDropCityID").val();
            var BillingType = $("#BillingType option:selected").text();
            if (BillingType == "-Select-") {
                BillingType = "";
            }
            var ShipmentType = $("#ShippingType option:selected").text();
            if (ShipmentType == "-Select-") {
                ShipmentType = "";
            }
            var LoadingDate = $("#LoadingDate").val();
            var BiltyNoManual = $("#BiltyNoManual").val();
            var Warehouse = $("#WareHouse").val();
            var BiltyDate = $("#BiltyDate").val();
            var SingleDataArr = [];
            // SingleDataArr.push({ senderCompany: SenderCompanyId, senderDepart: SenderDepartId, senderPerson: SenderPersonId, reciverCompany: ReciverCompanyId, reciverDepart: ReciverDepartId, reciverPerson: ReciverPersonId, billCompany: BilltoCompanyId, billDepart: BilltoDepartId, billPerson: BilltoPersonId, AgentCompany: AgentCompanyId, AgentDepart: AgentDepartId, AgentPerson: AgentPersonId, PickUpProvince: PickUpProvince, PickUpCity: PickUpCity, PickUpArea: PickUpArea, PickUpName: PickUpName, PickUpAddress: PickUpAddress, DropProvince: DropProvince, DropCity: DropCity, DropArea: DropArea, DropName: DropName, DropAddress: DropAddress, BillingType: BillingType, ShipmentType: ShipmentType, LoadingDate: LoadingDate, BiltyNoManual: BiltyNoManual, BiltyDate: BiltyDate, WareHouse: Warehouse });
            SingleDataArr.push(
                {



                    //senderCompHierarchyID: SenderCompHierarchyID,
                    //reciverCompHierarchyID: ReciverCompHierarchyID,
                    //billtoCompHierarchyID: BilltoCompHierarchyID,
                    //agentCompHierarchyID: AgentCompHierarchyID,



                    senderCompany: SenderCompHierarchyID,
                    //senderCompany: SenderCompanyId,
                    senderDepart: SenderDepartId,
                    senderPerson: SenderPersonId,

                    reciverCompany: ReciverCompHierarchyID,
                    //reciverCompany: ReciverCompanyId,
                    reciverDepart: ReciverDepartId,
                    reciverPerson: ReciverPersonId,

                    billCompany: BilltoCompHierarchyID,
                    //billCompany: BilltoCompanyId,
                    billDepart: BilltoDepartId,
                    billPerson: BilltoPersonId,

                    AgentCompany: AgentCompHierarchyID,
                    //AgentCompany: AgentCompanyId,
                    AgentDepart: AgentDepartId,
                    AgentPerson: AgentPersonId,
                    PickDropID: PickDropID,

                    AreaID: AreaID,
                    CityID: CityID,
                    DropID: DropID,
                    DropAreaID: DropAreaID,
                    DropCityID: DropCityID,

                    BillingType: BillingType,
                    ShipmentType: ShipmentType,
                    LoadingDate: LoadingDate,
                    ManualOrderNo: BiltyNoManual,
                    BiltyDate: BiltyDate,

                    WareHouse: Warehouse,
                    OwnCompanyID: OwnCompany,
                    PaidToPay: CustomerType,

                    LocalPick: localpick,
                    LocalDrop: localdrop,
                    Remarks: BiltyRemarks

                }
            );

            //Recording Containers
            var ContainerTypeArr = [];
            var ContainerRowsCount = $("#modalTable tbody tr").length;
            for (var i = 0; i < ContainerRowsCount; i++) {

                var containertype = $("#modalTable tbody tr:eq(" + i + ") td:eq(8)").find("input").val();
                var ContainerNo = $("#modalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val().toUpperCase();
                var weight = $("#modalTable tbody tr:eq(" + i + ") td:eq(3)").find("input").val();
                var pick = $("#modalTable tbody tr:eq(" + i + ") td:eq(4)").find("select option:selected").val();
                var drop = $("#modalTable tbody tr:eq(" + i + ") td:eq(5)").find("select option:selected").val();
                var vessel = $("#modalTable tbody tr:eq(" + i + ") td:eq(6)").find("input").val();
                var remarks = $("#modalTable tbody tr:eq(" + i + ") td:eq(7)").find("input").val();
                ContainerTypeArr.push({

                    ContainerType: containertype, RegNo: ContainerNo,
                    Weight: weight, Pick: pick,
                    Drop: drop, Vessel: vessel,
                    Remarks: remarks
                });
            }
            //Recording Vehicle Modal
            var VehicleRowsCount = $("#VehiclemodalTable tbody tr").length;
            var VehicleDetailsArr = [];
            for (var i = 0; i < VehicleRowsCount; i++) {

                var vehicletype = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(1)").find("input").val();
                var Regno = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(2)").find("input").val().toUpperCase();
                debugger;
                //Regno = Regno.replace("-","");
                var contact = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(3)").find("input").val();
                contact = parseInt(contact.replace('-', ''));
                var driver = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(4)").find("input").val(); //driver
                var father = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(5)").find("input").val();//father
                var nic = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(6)").find("input").val();//NIC
                nic = nic.replace("-", "");
                var license = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(7)").find("input").val();//LICENSE
                var broker = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(8)").find("input").val();//BROKER
                //  var cell = $("#VehiclemodalTable tbody tr:eq(" + i + ") td:eq(9)").find("input").val();
                vehicletype = vehicletype.replace(vehicletype.substr(vehicletype.lastIndexOf("(")), "").trim();
                VehicleDetailsArr.push({ VehicleType: vehicletype, RegNo: Regno, Contact: contact, Broker: broker, Driver: driver, Father: father, NIC: nic, License: license });

            }

            //Recording Received Documents
            var RecDocumentRowsCount = $("#detailsReciveDocument tbody tr").length;
            var RecDocumentArr = [];
            for (var i = 0; i < RecDocumentRowsCount; i++) {

                var documenttype = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(0)").text();
                var documentNo = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(1)").text();
                var fileName = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(2)").text();
                var filePath = $("#detailsReciveDocument tbody tr:eq(" + i + ") td:eq(4)").text();
                RecDocumentArr.push({ DocumentType: documenttype, DocumentNo: documentNo, FileName: fileName, FilePath: filePath });

            }

            //Recording Receive By
            var ReciveByRowsCount = $("#detailsReciveBy tbody tr").length;
            var RecieveByArr = [];
            for (var i = 0; i < ReciveByRowsCount; i++) {

                var RecievedBy = $("#detailsReciveBy tbody tr:eq(" + i + ") td:eq(0)").text();
                var Date = $("#detailsReciveBy tbody tr:eq(" + i + ") td:eq(1)").text();
                var Time = $("#detailsReciveBy tbody tr:eq(" + i + ") td:eq(2)").text();
                RecieveByArr.push({ RecievedBy: RecievedBy, Date: Date, Time: Time });

            }

            //Recording Reimmursables
            var ReimursableRowsCount = $("#detailsReimursable tbody tr").length;
            var ReimursableExpenseArr = [];
            for (var i = 0; i < ReimursableRowsCount; i++) {

                var ExpenseType = $("#detailsReimursable tbody tr:eq(" + i + ") td:eq(0)").text();
                var Amount = $("#detailsReimursable tbody tr:eq(" + i + ") td:eq(1)").text();
                ReimursableExpenseArr.push({ ExpenseType: ExpenseType, Amount: Amount });

            }

            //Recording Actual Expenses
            var ActualExpenseRowsCount = $("#detailsActualExpense tbody tr").length;
            var ActualExpenseArr = [];
            for (var i = 0; i < ActualExpenseRowsCount; i++) {

                var ExpenseType = $("#detailsActualExpense tbody tr:eq(" + i + ") td:eq(0)").text();
                var Amount = $("#detailsActualExpense tbody tr:eq(" + i + ") td:eq(1)").text();
                ActualExpenseArr.push({ ExpenseType: ExpenseType, Amount: Amount });

            }

            //Recording Damages
            var DamageRowsCount = $("#detailsDamageType tbody tr").length;
            var DamageArr = [];
            for (var i = 0; i < DamageRowsCount; i++) {

                var ItemName = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(0)").text();
                var DamageType = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(1)").text();
                var DocumentType = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(2)").text();
                var DamageCost = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(3)").text();
                var Causeof = $("#detailsDamageType tbody tr:eq(" + i + ") td:eq(4)").text();
                DamageArr.push({ ItemName: ItemName, DamageType: DamageType, DocumentType: DocumentType, DamageCost: DamageCost, CauseOf: Causeof });

            }

            //Recording Products
            var ProductRowsCount = $("#detailsProduct tbody tr").length;
            var ProductArr = [];
            for (var i = 0; i < ProductRowsCount; i++) {

                var PackageType = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(0)").text();
                var Item = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(1)").text();
                var PkgQTY = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(2)").text();
                var ItemQTY = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(3)").text();
                var TotalWeight = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(4)").text();
                var ProductId = $("#detailsProduct tbody tr:eq(" + i + ") td:eq(5) input").val();
                ProductArr.push({ ItemName: Item, PackageType: PackageType, PkgQty: PkgQTY, ItemQty: ItemQTY, TotalWeight: TotalWeight, ProductID: ProductId });

            }

            //Recording Vehicle Timings
            debugger;
            var VehicleTimings = $("#VehicleTimings tbody tr").length;
            var VehicleTimingsArr = [];
            for (var i = 0; i < VehicleTimings; i++) {

                var VehicleTypeForTimings = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(1)").text();
                var RegnoForTimings = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(2)").text();
                var ReportDate = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(3)").find("input").val();
                var ReportTime = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(4)").find("input").val();
                var InDate = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(5)").find("input").val();
                var InTime = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(6)").find("input").val();
                var OutDate = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(7)").find("input").val();
                var OutTime = $("#VehicleTimings tbody tr:eq(" + i + ") td:eq(8)").find("input").val();
                ReportDate = ReportDate.trim() + " " + ReportTime.trim();
                InDate = InDate.trim() + " " + InTime.trim();
                debugger;
                OutDate = OutDate.trim() + " " + OutTime.trim();



                VehicleTimingsArr.push({ VehicleType: VehicleTypeForTimings, RegNo: RegnoForTimings, ReportDate: ReportDate, InDate: InDate, OutDate: OutDate });

            }

            //Recording Assigned Vehicle
            var AssignedVehicleCount = $("#tblAssignVehicle tbody tr").length;
            var AssignedVehicleArrv = [];
            for (var i = 0; i < AssignedVehicleCount; i++) {

                var AssignedContainer = $("#tblAssignVehicle tbody tr:eq(" + i + ") td:eq(1)").text();
                var AssignedContainerNo = $("#tblAssignVehicle tbody tr:eq(" + i + ") td:eq(3)").text();
                var AssignedVehicle = $("#tblAssignVehicle tbody tr:eq(" + i + ") td:eq(4)").find("input").val();
                AssignedVehicleArrv.push({ ContainerType: AssignedContainer, ContainerNo: AssignedContainerNo, VehicleType: AssignedVehicle });

            }

            //Recording Dispatch Documents
            var DispatchDocumentRowsCount = $("#detailsDispatchDocument tbody tr").length;
            var DispatchDocumentArr = [];
            for (var i = 0; i < DispatchDocumentRowsCount; i++) {

                var documenttype = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(0)").text();
                var documentNo = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(1)").text();
                var fileName = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(2)").text();
                var filePath = $("#detailsDispatchDocument tbody tr:eq(" + i + ") td:eq(4)").text();
                DispatchDocumentArr.push({ DocumentType: documenttype, DocumentNo: documentNo, FileName: fileName, FilePath: filePath });

            }

            $.ajax({
                url: ControllerUrl + 'SavePartialBilty',
                type: 'POST',
                contentType: "application/json",
                data: JSON.stringify(
                    {
                        //BiltyRemarks: BiltyRemarks,
                        SingleData: SingleDataArr,
                        Container: ContainerTypeArr,
                        Vehicle: VehicleDetailsArr,
                        Receiving: RecDocumentArr,
                        Receieved: RecieveByArr,
                        Actual: ActualExpenseArr,
                        Reimursable: ReimursableExpenseArr,
                        Damage: DamageArr,
                        Dispatch: DispatchDocumentArr,
                        Products: ProductArr,
                        Timings: VehicleTimingsArr,
                        assignedVehicle: AssignedVehicleArrv
                    }
                )
            }).done(function (data) {
                debugger;
                if (data.status == false) {
                    alert(data.message);

                }
                else {
                    $("#Openddl,#showAll,#hideAll").show();

                    if (ElementToFocus != "") {
                        $(ElementToFocus).show("slow");
                    }

                    if (TextboxToFocus != "") {
                        $(TextboxToFocus).focus();
                    }

                    if (ElementToHide != "") {
                        $(ElementToHide).hide();
                    }


                }
            });
        }

    }
    function SaveWholeBilty(isRedirect) {
        if ($("#ddlOwnCompany").val() == "0")
            alert('Select Own Company');
        else if ($("#BiltyNoManual").val() == "")
            alert('Enter Bilty no');
        else if ($("#BiltyDate").val() == "")
            alert('Enter Bilty Date');
        else {
            $("#Loading").show();
            let OrderID = $("#hfWholeBiltyEdit").val();
            SavePartialBilty("", "", "");
            $.ajax({
                url: "../Home/addBilty",
                type: 'POST',
                data: { OrderID_string: OrderID },
                success: function (message) {
                    $("#Loading").hide();
                    if (isRedirect) {
                        window.location = "../ASPX/Orders.aspx";
                    }
                    else {
                        alert('Record Saved Success');
                        SaveAndNew();

                    }
                }
            });
        }
    }
    function SaveAndNew() {
        $("#modalTable tbody").html('');
        $("#detailsVehicle tbody").html('');
        $("#detailsTable tbody").html('');
        $("#detailsProduct tbody").html('');
        $("#detailsDispatchDocument tbody").html('');
        $("#detailsReciveBy tbody").html('');
        $("#detailsReciveDocument tbody").html('');
        $("#detailsDamageType tbody").html('');
        $("#detailsReimursable tbody").html('');
        $("#VehicleTimings tbody").html('');
        $(".cosigment_info, .Vehicle_info, .product_info,.dispatch_info,.Reciving_info,.document_info,.expense_info,.damage_info").hide();
        $("#BiltyNoManual").val('');
        $("#BiltyNoManual").focus();
    }


    function SelectPickDropLocation(e) {
        $(e).next().text($(e).find("option:selected").text());
    }</script>

