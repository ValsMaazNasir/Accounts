@model LiquadCargoManagment.Models.UserAccount
@using LiquadCargoManagment.Models
@{
    Layout = null;
}
<!DOCTYPE html>
<!--[if IE 9]>         <html class="no-js lt-ie10" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">

    <title>Register</title>

    <meta name="description" content="Liquad & Cargo Managment Developed by ABC Systems">
    <meta name="author" content="ABCSystems">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">

    <!-- Icons -->
    <!-- The following icons can be replaced with your own, they are used by desktop and mobile browsers -->
    <link rel="shortcut icon" href="~/img/favicon.png">
    <link rel="apple-touch-icon" href="~/img/icon57.png" sizes="57x57">
    <link rel="apple-touch-icon" href="~/img/icon72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="~/img/icon76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="~/img/icon114.png" sizes="114x114">
    <link rel="apple-touch-icon" href="~/img/icon120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="~/img/icon144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="~/img/icon152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="~/img/icon180.png" sizes="180x180">
    <!-- END Icons -->
    <!-- Stylesheets -->
    <!-- Bootstrap is included in its original form, unaltered -->
    <link rel="stylesheet" href="~/css/bootstrap.min.css">

    <!-- Related styles of various icon packs and plugins -->
    <link rel="stylesheet" href="~/css/plugins.css">

    <!-- The main stylesheet of this template. All Bootstrap overwrites are defined in here -->
    <link rel="stylesheet" href="~/css/main.css">

    <!-- Include a specific file here from ~/css/themes/ folder to alter the default theme of the template -->
    <!-- The themes stylesheet of this template (for using specific theme color in individual elements - must included last) -->
    <link rel="stylesheet" href="~/css/themes.css">
    <!-- END Stylesheets -->
    <!-- Modernizr (browser feature detection library) -->
    <script src="~/js/vendor/modernizr.min.js"></script>
</head>
<body>
    <!-- Login Full Background -->
    <!-- For best results use an image with a resolution of 1280x1280 pixels (prefer a blurred image for smaller file size) -->
    <img src="~/img/placeholders/backgrounds/login_full_bg.jpg" alt="Login Full Background" class="full-bg animation-pulseSlow">
    <!-- END Login Full Background -->
    <!-- Login Container -->
    <div id="login-container" class="animation-fadeIn">
        <!-- Login Title -->
        <div class="login-title text-center">
            <h1><i class="gi gi-flash"></i> <strong>ABC Systems</strong><br><small><strong>Register Account</strong></small><br><small><strong><a href="@Url.Action("Dashboard","Admin")">Goto Dashboard</a></strong></small></h1>
        </div>
        <!-- END Login Title -->
        <!-- Login Block -->
        <div class="block push-bit">
            <!-- Login Form -->

            <div id="form-register" class="form-horizontal form-bordered form-control-borderless">
                <div class="form-group">
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-home"></i></span>
                            @Html.DropDownList("OwnCompanyId", ViewBag.OwnCompany as SelectList, "-Select Company-", new { @class = "form-control", @required = true })
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="input-group">
                            <input type="hidden" name="UserID" value="@Model.UserID" id="hfEditID" />
                            <span class="input-group-addon"><i class="gi gi-user"></i></span>
                            <input type="text" id="FullName" name="FullName" class="form-control input-lg" value="@Model.FullName" placeholder="Full Name">
                        </div>
                    </div>

                </div>
                <div class="form-group">
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-envelope"></i></span>
                            <input type="text" id="Email" name="Email" class="form-control input-lg" value="@Model.Email" placeholder="Email">
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-user"></i></span>
                            <input type="text" id="UserName" name="UserName" class="form-control input-lg" value="@Model.UserName" placeholder="Username">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-asterisk"></i></span>
                            <input type="password" id="UserPassword" name="UserPassword" class="form-control input-lg" value="@Model.UserPassword" placeholder="Password">
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-asterisk"></i></span>
                            <input type="password" id="UserPassword" name="UserPassword" value="@Model.UserPassword" class="form-control input-lg" placeholder="Verify Password">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-user"></i></span>
                            @Html.DropDownList("RoleID", ViewBag.Roles as SelectList, "-Select Role-", new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-file"></i></span>
                            <input type="file" accept="png,jpeg,jpg" name="file" class="form-control input-lg">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-6">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="gi gi-user"></i></span>
                            @Html.DropDownList("BiltyRole",new SelectList(ViewBag.BiltyRole), "-Select Role-", new { @class = "form-control select-chosen",@multiple = true })
                        </div>
                    </div>
                   
                </div>
                <div class="form-group">
                    <div class="col-xs-12">
                        <div class="input-group">
                            @{List<OwnCompany> ownCompanies = (List<OwnCompany>)Session["OwnCompanies"];}
                            @foreach (var item in ownCompanies)
                            {
                                <input type="checkbox" id="OwnCompanyID" value="@item.ID" name="" style="margin-right:10px; margin-left:10px;" /><label>@item.Name</label>
                            }
                        </div>
                    </div>
                </div>
                <div class="form-group form-actions">
                    <div class="col-xs-6 text-right">
                        <button type="submit" class="btn btn-sm btn-success" onclick="UserAccounts()"><i class="fa fa-plus"></i> Register Account</button>
                    </div>
                </div>
            </div>
            <!-- END Login Form -->
            <!-- Reminder Form -->
        </div>
        <!-- END Login Block -->
    </div>
    <!-- END Login Container -->
    <!-- Modal Terms -->
    <!-- END Modal Terms -->
    <!-- jQuery, Bootstrap.js, jQuery plugins and Custom JS code -->

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/js/vendor/bootstrap.min.js"></script>
    <script src="~/js/plugins.js"></script>
    <script src="~/js/app.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <!-- Load and execute javascript code used only in this page -->
    <script src="~/js/pages/login.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>

        function UserAccounts() {
            debugger;
            let User = {}
            let ID = $('#hfEditID').val();
            let OwnCompanyID = $('#OwnCompanyId').val();
            let FullName = $('#FullName').val();
            let Email = $('#Email').val();
            let UserName = $('#UserName').val();
            let UserPassword = $('#UserPassword').val();
            let RoleID = $('#RoleID').val();

            User.ID = ID;
            User.OwnCompanyID = OwnCompanyID;
            User.FullName = FullName;
            User.Email = Email;
            User.UserName = UserName;
            User.UserPassword = UserPassword;
            User.RoleID = RoleID;


            //Bilty Role
            let biltyRole = $("#BiltyRole").val();
            $.ajax({
                url: `../Account/addRegistration`,
                type: "POST",
                data: { model: User, BiltyRole: biltyRole },
                success: function (r) {
                    debugger;
                    Message("Success", r.Message, "success");
                    window.location = "../Admin/Dashboard";
                }
            })
        }

        function fnSuccess(response) {
            if (response.Status == "OK") {
                Message("Registerd", response.Message, "success");
                setTimeout(function () { window.location = "../Admin/Dashboard" }, 2000);
            }
            else {
                Message("Invalid", response.Message, "error");
            }
        }
        function fnFailed() {
            Message("Error", "Request Failed", "error");
        }
        function Message(title, text, type) {
            Swal.fire({
                title: title + '!',
                text: text,
                icon: type,
                confirmButtonText: 'OK'
            })
        }


    </script>
</body>
</html>